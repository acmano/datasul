59f22d37c068613cdc1dc7b0c1d912a3
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.OdbcConnection = void 0;
// @ts-nocheck
// src/infrastructure/database/connections/OdbcConnection.ts
function stryNS_9fa48() {
    var g = typeof globalThis === 'object' && globalThis && globalThis.Math === Math && globalThis || new Function("return this")();
    var ns = g.__stryker__ || (g.__stryker__ = {});
    if (ns.activeMutant === undefined && g.process && g.process.env && g.process.env.__STRYKER_ACTIVE_MUTANT__) {
        ns.activeMutant = g.process.env.__STRYKER_ACTIVE_MUTANT__;
    }
    function retrieveNS() {
        return ns;
    }
    stryNS_9fa48 = retrieveNS;
    return retrieveNS();
}
stryNS_9fa48();
function stryCov_9fa48() {
    var ns = stryNS_9fa48();
    var cov = ns.mutantCoverage || (ns.mutantCoverage = {
        static: {},
        perTest: {}
    });
    function cover() {
        var c = cov.static;
        if (ns.currentTestId) {
            c = cov.perTest[ns.currentTestId] = cov.perTest[ns.currentTestId] || {};
        }
        var a = arguments;
        for (var i = 0; i < a.length; i++) {
            c[a[i]] = (c[a[i]] || 0) + 1;
        }
    }
    stryCov_9fa48 = cover;
    cover.apply(null, arguments);
}
function stryMutAct_9fa48(id) {
    var ns = stryNS_9fa48();
    function isActive(id) {
        if (ns.activeMutant === id) {
            if (ns.hitCount !== void 0 && ++ns.hitCount > ns.hitLimit) {
                throw new Error('Stryker: Hit count limit reached (' + ns.hitCount + ')');
            }
            return true;
        }
        return false;
    }
    stryMutAct_9fa48 = isActive;
    return isActive(id);
}
const odbc_1 = __importDefault(require("odbc"));
const logger_1 = require("@shared/utils/logger");
const retry_1 = require("@shared/utils/retry");
const env_config_1 = require("@config/env.config");
class OdbcConnection {
    constructor(connectionString, name = stryMutAct_9fa48("1536") ? "" : (stryCov_9fa48("1536"), 'ODBC')) {
        this.connection = null;
        if (stryMutAct_9fa48("1537")) {
            { }
        }
        else {
            stryCov_9fa48("1537");
            this.connectionString = connectionString;
            this.name = name;
        }
    }
    async connect() {
        if (stryMutAct_9fa48("1538")) {
            { }
        }
        else {
            stryCov_9fa48("1538");
            const context = stryMutAct_9fa48("1539") ? `` : (stryCov_9fa48("1539"), `${this.name} (ODBC)`);
            logger_1.log.info(stryMutAct_9fa48("1540") ? `` : (stryCov_9fa48("1540"), `Conectando ${context}...`));
            // ✅ NOVO: Retry com backoff exponencial
            const retryOptions = stryMutAct_9fa48("1541") ? {} : (stryCov_9fa48("1541"), {
                maxAttempts: env_config_1.config.database.retry.maxAttempts,
                initialDelay: env_config_1.config.database.retry.initialDelay,
                maxDelay: env_config_1.config.database.retry.maxDelay,
                backoffFactor: env_config_1.config.database.retry.backoffFactor,
                jitter: stryMutAct_9fa48("1542") ? false : (stryCov_9fa48("1542"), true),
                onRetry: (error, attempt, delay) => {
                    if (stryMutAct_9fa48("1543")) {
                        { }
                    }
                    else {
                        stryCov_9fa48("1543");
                        // Só retry em erros de conexão
                        if (stryMutAct_9fa48("1546") ? false : stryMutAct_9fa48("1545") ? true : stryMutAct_9fa48("1544") ? (0, retry_1.isRetryableError)(error) : (stryCov_9fa48("1544", "1545", "1546"), !(0, retry_1.isRetryableError)(error))) {
                            if (stryMutAct_9fa48("1547")) {
                                { }
                            }
                            else {
                                stryCov_9fa48("1547");
                                logger_1.log.error(stryMutAct_9fa48("1548") ? `` : (stryCov_9fa48("1548"), `${context}: Erro não-retryable, abortando`), stryMutAct_9fa48("1549") ? {} : (stryCov_9fa48("1549"), {
                                    error: error.message,
                                    attempt
                                }));
                                throw error;
                            }
                        }
                    }
                }
            });
            try {
                if (stryMutAct_9fa48("1550")) {
                    { }
                }
                else {
                    stryCov_9fa48("1550");
                    this.connection = await (0, retry_1.retryWithBackoff)(async () => {
                        if (stryMutAct_9fa48("1551")) {
                            { }
                        }
                        else {
                            stryCov_9fa48("1551");
                            const conn = await odbc_1.default.connect(this.connectionString);
                            return conn;
                        }
                    }, retryOptions, context);
                    logger_1.log.info(stryMutAct_9fa48("1552") ? `` : (stryCov_9fa48("1552"), `${context} conectado`));
                }
            }
            catch (error) {
                if (stryMutAct_9fa48("1553")) {
                    { }
                }
                else {
                    stryCov_9fa48("1553");
                    logger_1.log.error(stryMutAct_9fa48("1554") ? `` : (stryCov_9fa48("1554"), `${context}: Falha após todas as tentativas de retry`), stryMutAct_9fa48("1555") ? {} : (stryCov_9fa48("1555"), {
                        error: error instanceof Error ? error.message : stryMutAct_9fa48("1556") ? "" : (stryCov_9fa48("1556"), 'Erro desconhecido'),
                        maxAttempts: retryOptions.maxAttempts
                    }));
                    throw error;
                }
            }
        }
    }
    async query(sql) {
        if (stryMutAct_9fa48("1557")) {
            { }
        }
        else {
            stryCov_9fa48("1557");
            if (stryMutAct_9fa48("1560") ? false : stryMutAct_9fa48("1559") ? true : stryMutAct_9fa48("1558") ? this.connection : (stryCov_9fa48("1558", "1559", "1560"), !this.connection)) {
                if (stryMutAct_9fa48("1561")) {
                    { }
                }
                else {
                    stryCov_9fa48("1561");
                    throw new Error(stryMutAct_9fa48("1562") ? `` : (stryCov_9fa48("1562"), `${this.name}: Conexão não inicializada`));
                }
            }
            try {
                if (stryMutAct_9fa48("1563")) {
                    { }
                }
                else {
                    stryCov_9fa48("1563");
                    const result = await this.connection.query(sql);
                    return result;
                }
            }
            catch (error) {
                if (stryMutAct_9fa48("1564")) {
                    { }
                }
                else {
                    stryCov_9fa48("1564");
                    logger_1.log.error(stryMutAct_9fa48("1565") ? `` : (stryCov_9fa48("1565"), `${this.name}: Erro na query`), stryMutAct_9fa48("1566") ? {} : (stryCov_9fa48("1566"), {
                        error: error instanceof Error ? error.message : stryMutAct_9fa48("1567") ? "" : (stryCov_9fa48("1567"), 'Erro desconhecido'),
                        sql: stryMutAct_9fa48("1568") ? sql : (stryCov_9fa48("1568"), sql.substring(0, 100))
                    }));
                    throw error;
                }
            }
        }
    }
    async queryWithParams(sql, params) {
        if (stryMutAct_9fa48("1569")) {
            { }
        }
        else {
            stryCov_9fa48("1569");
            if (stryMutAct_9fa48("1572") ? false : stryMutAct_9fa48("1571") ? true : stryMutAct_9fa48("1570") ? this.connection : (stryCov_9fa48("1570", "1571", "1572"), !this.connection)) {
                if (stryMutAct_9fa48("1573")) {
                    { }
                }
                else {
                    stryCov_9fa48("1573");
                    throw new Error(stryMutAct_9fa48("1574") ? `` : (stryCov_9fa48("1574"), `${this.name}: Conexão não inicializada`));
                }
            }
            try {
                if (stryMutAct_9fa48("1575")) {
                    { }
                }
                else {
                    stryCov_9fa48("1575");
                    // ODBC usa '?' como placeholder
                    const values = params.map(stryMutAct_9fa48("1576") ? () => undefined : (stryCov_9fa48("1576"), p => p.value));
                    const result = await this.connection.query(sql, values);
                    return result;
                }
            }
            catch (error) {
                if (stryMutAct_9fa48("1577")) {
                    { }
                }
                else {
                    stryCov_9fa48("1577");
                    logger_1.log.error(stryMutAct_9fa48("1578") ? `` : (stryCov_9fa48("1578"), `${this.name}: Erro na query parametrizada`), stryMutAct_9fa48("1579") ? {} : (stryCov_9fa48("1579"), {
                        error: error instanceof Error ? error.message : stryMutAct_9fa48("1580") ? "" : (stryCov_9fa48("1580"), 'Erro desconhecido'),
                        params: params.map(stryMutAct_9fa48("1581") ? () => undefined : (stryCov_9fa48("1581"), p => stryMutAct_9fa48("1582") ? {} : (stryCov_9fa48("1582"), {
                            name: p.name,
                            type: p.type
                        })))
                    }));
                    throw error;
                }
            }
        }
    }
    async close() {
        if (stryMutAct_9fa48("1583")) {
            { }
        }
        else {
            stryCov_9fa48("1583");
            if (stryMutAct_9fa48("1585") ? false : stryMutAct_9fa48("1584") ? true : (stryCov_9fa48("1584", "1585"), this.connection)) {
                if (stryMutAct_9fa48("1586")) {
                    { }
                }
                else {
                    stryCov_9fa48("1586");
                    await this.connection.close();
                    this.connection = null;
                    logger_1.log.info(stryMutAct_9fa48("1587") ? `` : (stryCov_9fa48("1587"), `${this.name} desconectado`));
                }
            }
        }
    }
    isConnected() {
        if (stryMutAct_9fa48("1588")) {
            { }
        }
        else {
            stryCov_9fa48("1588");
            return stryMutAct_9fa48("1591") ? this.connection === null : stryMutAct_9fa48("1590") ? false : stryMutAct_9fa48("1589") ? true : (stryCov_9fa48("1589", "1590", "1591"), this.connection !== null);
        }
    }
    async healthCheck() {
        if (stryMutAct_9fa48("1592")) {
            { }
        }
        else {
            stryCov_9fa48("1592");
            const startTime = Date.now();
            try {
                if (stryMutAct_9fa48("1593")) {
                    { }
                }
                else {
                    stryCov_9fa48("1593");
                    if (stryMutAct_9fa48("1596") ? false : stryMutAct_9fa48("1595") ? true : stryMutAct_9fa48("1594") ? this.connection : (stryCov_9fa48("1594", "1595", "1596"), !this.connection)) {
                        if (stryMutAct_9fa48("1597")) {
                            { }
                        }
                        else {
                            stryCov_9fa48("1597");
                            return stryMutAct_9fa48("1598") ? {} : (stryCov_9fa48("1598"), {
                                connected: stryMutAct_9fa48("1599") ? true : (stryCov_9fa48("1599"), false),
                                responseTime: 0
                            });
                        }
                    }
                    await this.connection.query(stryMutAct_9fa48("1600") ? "" : (stryCov_9fa48("1600"), 'SELECT 1 AS health'));
                    const responseTime = stryMutAct_9fa48("1601") ? Date.now() + startTime : (stryCov_9fa48("1601"), Date.now() - startTime);
                    return stryMutAct_9fa48("1602") ? {} : (stryCov_9fa48("1602"), {
                        connected: stryMutAct_9fa48("1603") ? false : (stryCov_9fa48("1603"), true),
                        responseTime
                    });
                }
            }
            catch (error) {
                if (stryMutAct_9fa48("1604")) {
                    { }
                }
                else {
                    stryCov_9fa48("1604");
                    logger_1.log.error(stryMutAct_9fa48("1605") ? `` : (stryCov_9fa48("1605"), `${this.name}: Health check falhou`), stryMutAct_9fa48("1606") ? {} : (stryCov_9fa48("1606"), {
                        error: error instanceof Error ? error.message : stryMutAct_9fa48("1607") ? "" : (stryCov_9fa48("1607"), 'Erro desconhecido')
                    }));
                    return stryMutAct_9fa48("1608") ? {} : (stryCov_9fa48("1608"), {
                        connected: stryMutAct_9fa48("1609") ? true : (stryCov_9fa48("1609"), false),
                        responseTime: stryMutAct_9fa48("1610") ? Date.now() + startTime : (stryCov_9fa48("1610"), Date.now() - startTime)
                    });
                }
            }
        }
    }
}
exports.OdbcConnection = OdbcConnection;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvbWFuby9wcm9qZXRvcy9kYXRhc3VsL2xvcjAxMzgvLnN0cnlrZXItdG1wL3NhbmRib3gtRUZGMmJSL3NyYy9pbmZyYXN0cnVjdHVyZS9kYXRhYmFzZS9jb25uZWN0aW9ucy9PZGJjQ29ubmVjdGlvbi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxjQUFjO0FBQ2QsNERBQTREO0FBQzVELFNBQVMsWUFBWTtJQUNuQixJQUFJLENBQUMsR0FBRyxPQUFPLFVBQVUsS0FBSyxRQUFRLElBQUksVUFBVSxJQUFJLFVBQVUsQ0FBQyxJQUFJLEtBQUssSUFBSSxJQUFJLFVBQVUsSUFBSSxJQUFJLFFBQVEsQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDO0lBQ2hJLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxXQUFXLElBQUksQ0FBQyxDQUFDLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQy9DLElBQUksRUFBRSxDQUFDLFlBQVksS0FBSyxTQUFTLElBQUksQ0FBQyxDQUFDLE9BQU8sSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsRUFBRSxDQUFDO1FBQzNHLEVBQUUsQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMseUJBQXlCLENBQUM7SUFDNUQsQ0FBQztJQUNELFNBQVMsVUFBVTtRQUNqQixPQUFPLEVBQUUsQ0FBQztJQUNaLENBQUM7SUFDRCxZQUFZLEdBQUcsVUFBVSxDQUFDO0lBQzFCLE9BQU8sVUFBVSxFQUFFLENBQUM7QUFDdEIsQ0FBQztBQUNELFlBQVksRUFBRSxDQUFDO0FBQ2YsU0FBUyxhQUFhO0lBQ3BCLElBQUksRUFBRSxHQUFHLFlBQVksRUFBRSxDQUFDO0lBQ3hCLElBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQyxjQUFjLElBQUksQ0FBQyxFQUFFLENBQUMsY0FBYyxHQUFHO1FBQ2xELE1BQU0sRUFBRSxFQUFFO1FBQ1YsT0FBTyxFQUFFLEVB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QUMsQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsRUFBRSxtQkFBbUIsQ0FBQztxQkFDN0gsQ0FBQyxDQUFDLENBQUM7b0JBQ0osT0FBTyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsRUFBRTt3QkFDN0QsU0FBUyxFQUFFLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEtBQUssQ0FBQzt3QkFDM0UsWUFBWSxFQUFFLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsU0FBUyxDQUFDO3FCQUNsSCxDQUFDLENBQUM7Z0JBQ0wsQ0FBQztZQUNILENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQztDQUNGO0FBbk9ELHdDQW1PQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9tYW5vL3Byb2pldG9zL2RhdGFzdWwvbG9yMDEzOC8uc3RyeWtlci10bXAvc2FuZGJveC1FRkYyYlIvc3JjL2luZnJhc3RydWN0dXJlL2RhdGFiYXNlL2Nvbm5lY3Rpb25zL09kYmNDb25uZWN0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEB0cy1ub2NoZWNrXG4vLyBzcmMvaW5mcmFzdHJ1Y3R1cmUvZGF0YWJhc2UvY29ubmVjdGlvbnMvT2RiY0Nvbm5lY3Rpb24udHNcbmZ1bmN0aW9uIHN0cnlOU185ZmE0OCgpIHtcbiAgdmFyIGcgPSB0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcgJiYgZ2xvYmFsVGhpcyAmJiBnbG9iYWxUaGlzLk1hdGggPT09IE1hdGggJiYgZ2xvYmFsVGhpcyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xuICB2YXIgbnMgPSBnLl9fc3RyeWtlcl9fIHx8IChnLl9fc3RyeWtlcl9fID0ge30pO1xuICBpZiAobnMuYWN0aXZlTXV0YW50ID09PSB1bmRlZmluZWQgJiYgZy5wcm9jZXNzICYmIGcucHJvY2Vzcy5lbnYgJiYgZy5wcm9jZXNzLmVudi5fX1NUUllLRVJfQUNUSVZFX01VVEFOVF9fKSB7XG4gICAgbnMuYWN0aXZlTXV0YW50ID0gZy5wcm9jZXNzLmVudi5fX1NUUllLRVJfQUNUSVZFX01VVEFOVF9fO1xuICB9XG4gIGZ1bmN0aW9uIHJldHJpZXZlTlMoKSB7XG4gICAgcmV0dXJuIG5zO1xuICB9XG4gIHN0cnlOU185ZmE0OCA9IHJldHJpZXZlTlM7XG4gIHJldHVybiByZXRyaWV2ZU5TKCk7XG59XG5zdHJ5TlNfOWZhNDgoKTtcbmZ1bmN0aW9uIHN0cnlDb3ZfOWZhNDgoKSB7XG4gIHZhciBucyA9IHN0cnlOU185ZmE0OCgpO1xuICB2YXIgY292ID0gbnMubXV0YW50Q292ZXJhZ2UgfHwgKG5zLm11dGFudENvdmVyYWdlID0ge1xuICAgIHN0YXRpYzoge30sXG4gICAgcGVyVGVzdDoge31cbiAgfSk7XG4gIGZ1bmN0aW9uIGNvdmVyKCkge1xuICAgIHZhciBjID0gY292LnN0YXRpYztcbiAgICBpZiAobnMuY3VycmVudFRlc3RJZCkge1xuICAgICAgYyA9IGNvdi5wZXJUZXN0W25zLmN1cnJlbnRUZXN0SWRdID0gY292LnBlclRlc3RbbnMuY3VycmVudFRlc3RJZF0gfHwge307XG4gICAgfVxuICAgIHZhciBhID0gYXJndW1lbnRzO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgY1thW2ldXSA9IChjW2FbaV1dIHx8IDApICsgMTtcbiAgICB9XG4gIH1cbiAgc3RyeUNvdl85ZmE0OCA9IGNvdmVyO1xuICBjb3Zlci5hcHBseShudWxsLCBhcmd1bWVudHMpO1xufVxuZnVuY3Rpb24gc3RyeU11dEFjdF85ZmE0OChpZCkge1xuICB2YXIgbnMgPSBzdHJ5TlNfOWZhNDgoKTtcbiAgZnVuY3Rpb24gaXNBY3RpdmUoaWQpIHtcbiAgICBpZiAobnMuYWN0aXZlTXV0YW50ID09PSBpZCkge1xuICAgICAgaWYgKG5zLmhpdENvdW50ICE9PSB2b2lkIDAgJiYgKytucy5oaXRDb3VudCA+IG5zLmhpdExpbWl0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU3RyeWtlcjogSGl0IGNvdW50IGxpbWl0IHJlYWNoZWQgKCcgKyBucy5oaXRDb3VudCArICcpJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHN0cnlNdXRBY3RfOWZhNDggPSBpc0FjdGl2ZTtcbiAgcmV0dXJuIGlzQWN0aXZlKGlkKTtcbn1cbmltcG9ydCBvZGJjIGZyb20gJ29kYmMnO1xuaW1wb3J0IHsgSUNvbm5lY3Rpb24sIFF1ZXJ5UGFyYW1ldGVyIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgbG9nIH0gZnJvbSAnQHNoYXJlZC91dGlscy9sb2dnZXInO1xuaW1wb3J0IHsgcmV0cnlXaXRoQmFja29mZiwgaXNSZXRyeWFibGVFcnJvciB9IGZyb20gJ0BzaGFyZWQvdXRpbHMvcmV0cnknO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnQGNvbmZpZy9lbnYuY29uZmlnJztcbmV4cG9ydCBjbGFzcyBPZGJjQ29ubmVjdGlvbiBpbXBsZW1lbnRzIElDb25uZWN0aW9uIHtcbiAgcHJpdmF0ZSBjb25uZWN0aW9uOiBvZGJjLkNvbm5lY3Rpb24gfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBjb25uZWN0aW9uU3RyaW5nOiBzdHJpbmc7XG4gIHByaXZhdGUgbmFtZTogc3RyaW5nO1xuICBjb25zdHJ1Y3Rvcihjb25uZWN0aW9uU3RyaW5nOiBzdHJpbmcsIG5hbWU6IHN0cmluZyA9IHN0cnlNdXRBY3RfOWZhNDgoXCIxNTM2XCIpID8gXCJcIiA6IChzdHJ5Q292XzlmYTQ4KFwiMTUzNlwiKSwgJ09EQkMnKSkge1xuICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTUzN1wiKSkge1xuICAgICAge31cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyeUNvdl85ZmE0OChcIjE1MzdcIik7XG4gICAgICB0aGlzLmNvbm5lY3Rpb25TdHJpbmcgPSBjb25uZWN0aW9uU3RyaW5nO1xuICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgY29ubmVjdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjE1MzhcIikpIHtcbiAgICAgIHt9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxNTM4XCIpO1xuICAgICAgY29uc3QgY29udGV4dCA9IHN0cnlNdXRBY3RfOWZhNDgoXCIxNTM5XCIpID8gYGAgOiAoc3RyeUNvdl85ZmE0OChcIjE1MzlcIiksIGAke3RoaXMubmFtZX0gKE9EQkMpYCk7XG4gICAgICBsb2cuaW5mbyhzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU0MFwiKSA/IGBgIDogKHN0cnlDb3ZfOWZhNDgoXCIxNTQwXCIpLCBgQ29uZWN0YW5kbyAke2NvbnRleHR9Li4uYCkpO1xuXG4gICAgICAvLyDinIUgTk9WTzogUmV0cnkgY29tIGJhY2tvZmYgZXhwb25lbmNpYWxcbiAgICAgIGNvbnN0IHJldHJ5T3B0aW9ucyA9IHN0cnlNdXRBY3RfOWZhNDgoXCIxNTQxXCIpID8ge30gOiAoc3RyeUNvdl85ZmE0OChcIjE1NDFcIiksIHtcbiAgICAgICAgbWF4QXR0ZW1wdHM6IGNvbmZpZy5kYXRhYmFzZS5yZXRyeS5tYXhBdHRlbXB0cyxcbiAgICAgICAgaW5pdGlhbERlbGF5OiBjb25maWcuZGF0YWJhc2UucmV0cnkuaW5pdGlhbERlbGF5LFxuICAgICAgICBtYXhEZWxheTogY29uZmlnLmRhdGFiYXNlLnJldHJ5Lm1heERlbGF5LFxuICAgICAgICBiYWNrb2ZmRmFjdG9yOiBjb25maWcuZGF0YWJhc2UucmV0cnkuYmFja29mZkZhY3RvcixcbiAgICAgICAgaml0dGVyOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU0MlwiKSA/IGZhbHNlIDogKHN0cnlDb3ZfOWZhNDgoXCIxNTQyXCIpLCB0cnVlKSxcbiAgICAgICAgb25SZXRyeTogKGVycm9yOiBFcnJvciwgYXR0ZW1wdDogbnVtYmVyLCBkZWxheTogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxNTQzXCIpKSB7XG4gICAgICAgICAgICB7fVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHJ5Q292XzlmYTQ4KFwiMTU0M1wiKTtcbiAgICAgICAgICAgIC8vIFPDsyByZXRyeSBlbSBlcnJvcyBkZSBjb25leMOjb1xuICAgICAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxNTQ2XCIpID8gZmFsc2UgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU0NVwiKSA/IHRydWUgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU0NFwiKSA/IGlzUmV0cnlhYmxlRXJyb3IoZXJyb3IpIDogKHN0cnlDb3ZfOWZhNDgoXCIxNTQ0XCIsIFwiMTU0NVwiLCBcIjE1NDZcIiksICFpc1JldHJ5YWJsZUVycm9yKGVycm9yKSkpIHtcbiAgICAgICAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxNTQ3XCIpKSB7XG4gICAgICAgICAgICAgICAge31cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdHJ5Q292XzlmYTQ4KFwiMTU0N1wiKTtcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3Ioc3RyeU11dEFjdF85ZmE0OChcIjE1NDhcIikgPyBgYCA6IChzdHJ5Q292XzlmYTQ4KFwiMTU0OFwiKSwgYCR7Y29udGV4dH06IEVycm8gbsOjby1yZXRyeWFibGUsIGFib3J0YW5kb2ApLCBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU0OVwiKSA/IHt9IDogKHN0cnlDb3ZfOWZhNDgoXCIxNTQ5XCIpLCB7XG4gICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgIGF0dGVtcHRcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxNTUwXCIpKSB7XG4gICAgICAgICAge31cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHJ5Q292XzlmYTQ4KFwiMTU1MFwiKTtcbiAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBhd2FpdCByZXRyeVdpdGhCYWNrb2ZmKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU1MVwiKSkge1xuICAgICAgICAgICAgICB7fVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc3RyeUNvdl85ZmE0OChcIjE1NTFcIik7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbm4gPSBhd2FpdCBvZGJjLmNvbm5lY3QodGhpcy5jb25uZWN0aW9uU3RyaW5nKTtcbiAgICAgICAgICAgICAgcmV0dXJuIGNvbm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgcmV0cnlPcHRpb25zLCBjb250ZXh0KTtcbiAgICAgICAgICBsb2cuaW5mbyhzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU1MlwiKSA/IGBgIDogKHN0cnlDb3ZfOWZhNDgoXCIxNTUyXCIpLCBgJHtjb250ZXh0fSBjb25lY3RhZG9gKSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU1M1wiKSkge1xuICAgICAgICAgIHt9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyeUNvdl85ZmE0OChcIjE1NTNcIik7XG4gICAgICAgICAgbG9nLmVycm9yKHN0cnlNdXRBY3RfOWZhNDgoXCIxNTU0XCIpID8gYGAgOiAoc3RyeUNvdl85ZmE0OChcIjE1NTRcIiksIGAke2NvbnRleHR9OiBGYWxoYSBhcMOzcyB0b2RhcyBhcyB0ZW50YXRpdmFzIGRlIHJldHJ5YCksIHN0cnlNdXRBY3RfOWZhNDgoXCIxNTU1XCIpID8ge30gOiAoc3RyeUNvdl85ZmE0OChcIjE1NTVcIiksIHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IHN0cnlNdXRBY3RfOWZhNDgoXCIxNTU2XCIpID8gXCJcIiA6IChzdHJ5Q292XzlmYTQ4KFwiMTU1NlwiKSwgJ0Vycm8gZGVzY29uaGVjaWRvJyksXG4gICAgICAgICAgICBtYXhBdHRlbXB0czogcmV0cnlPcHRpb25zLm1heEF0dGVtcHRzXG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGFzeW5jIHF1ZXJ5KHNxbDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjE1NTdcIikpIHtcbiAgICAgIHt9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxNTU3XCIpO1xuICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxNTYwXCIpID8gZmFsc2UgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU1OVwiKSA/IHRydWUgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU1OFwiKSA/IHRoaXMuY29ubmVjdGlvbiA6IChzdHJ5Q292XzlmYTQ4KFwiMTU1OFwiLCBcIjE1NTlcIiwgXCIxNTYwXCIpLCAhdGhpcy5jb25uZWN0aW9uKSkge1xuICAgICAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjE1NjFcIikpIHtcbiAgICAgICAgICB7fVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxNTYxXCIpO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU2MlwiKSA/IGBgIDogKHN0cnlDb3ZfOWZhNDgoXCIxNTYyXCIpLCBgJHt0aGlzLm5hbWV9OiBDb25leMOjbyBuw6NvIGluaWNpYWxpemFkYWApKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxNTYzXCIpKSB7XG4gICAgICAgICAge31cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHJ5Q292XzlmYTQ4KFwiMTU2M1wiKTtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmNvbm5lY3Rpb24ucXVlcnkoc3FsKTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjE1NjRcIikpIHtcbiAgICAgICAgICB7fVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxNTY0XCIpO1xuICAgICAgICAgIGxvZy5lcnJvcihzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU2NVwiKSA/IGBgIDogKHN0cnlDb3ZfOWZhNDgoXCIxNTY1XCIpLCBgJHt0aGlzLm5hbWV9OiBFcnJvIG5hIHF1ZXJ5YCksIHN0cnlNdXRBY3RfOWZhNDgoXCIxNTY2XCIpID8ge30gOiAoc3RyeUNvdl85ZmE0OChcIjE1NjZcIiksIHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IHN0cnlNdXRBY3RfOWZhNDgoXCIxNTY3XCIpID8gXCJcIiA6IChzdHJ5Q292XzlmYTQ4KFwiMTU2N1wiKSwgJ0Vycm8gZGVzY29uaGVjaWRvJyksXG4gICAgICAgICAgICBzcWw6IHN0cnlNdXRBY3RfOWZhNDgoXCIxNTY4XCIpID8gc3FsIDogKHN0cnlDb3ZfOWZhNDgoXCIxNTY4XCIpLCBzcWwuc3Vic3RyaW5nKDAsIDEwMCkpXG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGFzeW5jIHF1ZXJ5V2l0aFBhcmFtcyhzcWw6IHN0cmluZywgcGFyYW1zOiBRdWVyeVBhcmFtZXRlcltdKTogUHJvbWlzZTxhbnk+IHtcbiAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjE1NjlcIikpIHtcbiAgICAgIHt9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxNTY5XCIpO1xuICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxNTcyXCIpID8gZmFsc2UgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU3MVwiKSA/IHRydWUgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU3MFwiKSA/IHRoaXMuY29ubmVjdGlvbiA6IChzdHJ5Q292XzlmYTQ4KFwiMTU3MFwiLCBcIjE1NzFcIiwgXCIxNTcyXCIpLCAhdGhpcy5jb25uZWN0aW9uKSkge1xuICAgICAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjE1NzNcIikpIHtcbiAgICAgICAgICB7fVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxNTczXCIpO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU3NFwiKSA/IGBgIDogKHN0cnlDb3ZfOWZhNDgoXCIxNTc0XCIpLCBgJHt0aGlzLm5hbWV9OiBDb25leMOjbyBuw6NvIGluaWNpYWxpemFkYWApKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxNTc1XCIpKSB7XG4gICAgICAgICAge31cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHJ5Q292XzlmYTQ4KFwiMTU3NVwiKTtcbiAgICAgICAgICAvLyBPREJDIHVzYSAnPycgY29tbyBwbGFjZWhvbGRlclxuICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IHBhcmFtcy5tYXAoc3RyeU11dEFjdF85ZmE0OChcIjE1NzZcIikgPyAoKSA9PiB1bmRlZmluZWQgOiAoc3RyeUNvdl85ZmE0OChcIjE1NzZcIiksIHAgPT4gcC52YWx1ZSkpO1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuY29ubmVjdGlvbi5xdWVyeShzcWwsIHZhbHVlcyk7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxNTc3XCIpKSB7XG4gICAgICAgICAge31cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHJ5Q292XzlmYTQ4KFwiMTU3N1wiKTtcbiAgICAgICAgICBsb2cuZXJyb3Ioc3RyeU11dEFjdF85ZmE0OChcIjE1NzhcIikgPyBgYCA6IChzdHJ5Q292XzlmYTQ4KFwiMTU3OFwiKSwgYCR7dGhpcy5uYW1lfTogRXJybyBuYSBxdWVyeSBwYXJhbWV0cml6YWRhYCksIHN0cnlNdXRBY3RfOWZhNDgoXCIxNTc5XCIpID8ge30gOiAoc3RyeUNvdl85ZmE0OChcIjE1NzlcIiksIHtcbiAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IHN0cnlNdXRBY3RfOWZhNDgoXCIxNTgwXCIpID8gXCJcIiA6IChzdHJ5Q292XzlmYTQ4KFwiMTU4MFwiKSwgJ0Vycm8gZGVzY29uaGVjaWRvJyksXG4gICAgICAgICAgICBwYXJhbXM6IHBhcmFtcy5tYXAoc3RyeU11dEFjdF85ZmE0OChcIjE1ODFcIikgPyAoKSA9PiB1bmRlZmluZWQgOiAoc3RyeUNvdl85ZmE0OChcIjE1ODFcIiksIHAgPT4gc3RyeU11dEFjdF85ZmE0OChcIjE1ODJcIikgPyB7fSA6IChzdHJ5Q292XzlmYTQ4KFwiMTU4MlwiKSwge1xuICAgICAgICAgICAgICBuYW1lOiBwLm5hbWUsXG4gICAgICAgICAgICAgIHR5cGU6IHAudHlwZVxuICAgICAgICAgICAgfSkpKVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBhc3luYyBjbG9zZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjE1ODNcIikpIHtcbiAgICAgIHt9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxNTgzXCIpO1xuICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxNTg1XCIpID8gZmFsc2UgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU4NFwiKSA/IHRydWUgOiAoc3RyeUNvdl85ZmE0OChcIjE1ODRcIiwgXCIxNTg1XCIpLCB0aGlzLmNvbm5lY3Rpb24pKSB7XG4gICAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU4NlwiKSkge1xuICAgICAgICAgIHt9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyeUNvdl85ZmE0OChcIjE1ODZcIik7XG4gICAgICAgICAgYXdhaXQgdGhpcy5jb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gbnVsbDtcbiAgICAgICAgICBsb2cuaW5mbyhzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU4N1wiKSA/IGBgIDogKHN0cnlDb3ZfOWZhNDgoXCIxNTg3XCIpLCBgJHt0aGlzLm5hbWV9IGRlc2NvbmVjdGFkb2ApKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBpc0Nvbm5lY3RlZCgpOiBib29sZWFuIHtcbiAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjE1ODhcIikpIHtcbiAgICAgIHt9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxNTg4XCIpO1xuICAgICAgcmV0dXJuIHN0cnlNdXRBY3RfOWZhNDgoXCIxNTkxXCIpID8gdGhpcy5jb25uZWN0aW9uID09PSBudWxsIDogc3RyeU11dEFjdF85ZmE0OChcIjE1OTBcIikgPyBmYWxzZSA6IHN0cnlNdXRBY3RfOWZhNDgoXCIxNTg5XCIpID8gdHJ1ZSA6IChzdHJ5Q292XzlmYTQ4KFwiMTU4OVwiLCBcIjE1OTBcIiwgXCIxNTkxXCIpLCB0aGlzLmNvbm5lY3Rpb24gIT09IG51bGwpO1xuICAgIH1cbiAgfVxuICBhc3luYyBoZWFsdGhDaGVjaygpOiBQcm9taXNlPHtcbiAgICBjb25uZWN0ZWQ6IGJvb2xlYW47XG4gICAgcmVzcG9uc2VUaW1lOiBudW1iZXI7XG4gIH0+IHtcbiAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjE1OTJcIikpIHtcbiAgICAgIHt9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0cnlDb3ZfOWZhNDgoXCIxNTkyXCIpO1xuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU5M1wiKSkge1xuICAgICAgICAgIHt9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyeUNvdl85ZmE0OChcIjE1OTNcIik7XG4gICAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxNTk2XCIpID8gZmFsc2UgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU5NVwiKSA/IHRydWUgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTU5NFwiKSA/IHRoaXMuY29ubmVjdGlvbiA6IChzdHJ5Q292XzlmYTQ4KFwiMTU5NFwiLCBcIjE1OTVcIiwgXCIxNTk2XCIpLCAhdGhpcy5jb25uZWN0aW9uKSkge1xuICAgICAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCIxNTk3XCIpKSB7XG4gICAgICAgICAgICAgIHt9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzdHJ5Q292XzlmYTQ4KFwiMTU5N1wiKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHN0cnlNdXRBY3RfOWZhNDgoXCIxNTk4XCIpID8ge30gOiAoc3RyeUNvdl85ZmE0OChcIjE1OThcIiksIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0ZWQ6IHN0cnlNdXRBY3RfOWZhNDgoXCIxNTk5XCIpID8gdHJ1ZSA6IChzdHJ5Q292XzlmYTQ4KFwiMTU5OVwiKSwgZmFsc2UpLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlVGltZTogMFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgdGhpcy5jb25uZWN0aW9uLnF1ZXJ5KHN0cnlNdXRBY3RfOWZhNDgoXCIxNjAwXCIpID8gXCJcIiA6IChzdHJ5Q292XzlmYTQ4KFwiMTYwMFwiKSwgJ1NFTEVDVCAxIEFTIGhlYWx0aCcpKTtcbiAgICAgICAgICBjb25zdCByZXNwb25zZVRpbWUgPSBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTYwMVwiKSA/IERhdGUubm93KCkgKyBzdGFydFRpbWUgOiAoc3RyeUNvdl85ZmE0OChcIjE2MDFcIiksIERhdGUubm93KCkgLSBzdGFydFRpbWUpO1xuICAgICAgICAgIHJldHVybiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTYwMlwiKSA/IHt9IDogKHN0cnlDb3ZfOWZhNDgoXCIxNjAyXCIpLCB7XG4gICAgICAgICAgICBjb25uZWN0ZWQ6IHN0cnlNdXRBY3RfOWZhNDgoXCIxNjAzXCIpID8gZmFsc2UgOiAoc3RyeUNvdl85ZmE0OChcIjE2MDNcIiksIHRydWUpLFxuICAgICAgICAgICAgcmVzcG9uc2VUaW1lXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiMTYwNFwiKSkge1xuICAgICAgICAgIHt9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RyeUNvdl85ZmE0OChcIjE2MDRcIik7XG4gICAgICAgICAgbG9nLmVycm9yKHN0cnlNdXRBY3RfOWZhNDgoXCIxNjA1XCIpID8gYGAgOiAoc3RyeUNvdl85ZmE0OChcIjE2MDVcIiksIGAke3RoaXMubmFtZX06IEhlYWx0aCBjaGVjayBmYWxob3VgKSwgc3RyeU11dEFjdF85ZmE0OChcIjE2MDZcIikgPyB7fSA6IChzdHJ5Q292XzlmYTQ4KFwiMTYwNlwiKSwge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogc3RyeU11dEFjdF85ZmE0OChcIjE2MDdcIikgPyBcIlwiIDogKHN0cnlDb3ZfOWZhNDgoXCIxNjA3XCIpLCAnRXJybyBkZXNjb25oZWNpZG8nKVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgICByZXR1cm4gc3RyeU11dEFjdF85ZmE0OChcIjE2MDhcIikgPyB7fSA6IChzdHJ5Q292XzlmYTQ4KFwiMTYwOFwiKSwge1xuICAgICAgICAgICAgY29ubmVjdGVkOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiMTYwOVwiKSA/IHRydWUgOiAoc3RyeUNvdl85ZmE0OChcIjE2MDlcIiksIGZhbHNlKSxcbiAgICAgICAgICAgIHJlc3BvbnNlVGltZTogc3RyeU11dEFjdF85ZmE0OChcIjE2MTBcIikgPyBEYXRlLm5vdygpICsgc3RhcnRUaW1lIDogKHN0cnlDb3ZfOWZhNDgoXCIxNjEwXCIpLCBEYXRlLm5vdygpIC0gc3RhcnRUaW1lKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59Il0sInZlcnNpb24iOjN9