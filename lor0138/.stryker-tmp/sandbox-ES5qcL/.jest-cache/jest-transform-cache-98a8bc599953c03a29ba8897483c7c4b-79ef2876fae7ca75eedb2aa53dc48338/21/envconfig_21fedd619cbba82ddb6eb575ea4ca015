d96b3d6ebdef23fcba75c165a66df05a
"use strict";
// src/config/env.config.ts
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.serverConfig = exports.envConfig = exports.config = void 0;
exports.parseTimeout = parseTimeout;
const dotenv_1 = __importDefault(require("dotenv"));
const app_config_1 = require("./app.config");
dotenv_1.default.config();
/**
 * Parse de string de timeout para milissegundos
 * Aceita formatos: "30s", "5000ms", "5m", "5000"
 *
 * IMPORTANTE: Esta função é usada em TODO o projeto.
 * Garante que timeouts sempre sejam números válidos em ms.
 *
 * Formatos suportados:
 * - "30000" → 30000ms (número puro)
 * - "30s" → 30000ms (segundos)
 * - "30000ms" → 30000ms (milissegundos)
 * - "5m" → 300000ms (minutos)
 */
function parseTimeout(value, defaultValue) {
    if (!value)
        return defaultValue;
    // Se for número puro, retorna direto
    if (/^\d+$/.test(value)) {
        return parseInt(value, 10);
    }
    // ✅ IMPORTANTE: Verificar 'ms' ANTES de 's'
    // (porque 'ms' também termina com 's')
    if (value.endsWith('ms')) {
        return parseInt(value.slice(0, -2), 10);
    }
    // Se terminar com 's', converte segundos para ms
    if (value.endsWith('s')) {
        return parseInt(value.slice(0, -1), 10) * 1000;
    }
    // Se terminar com 'm', converte minutos para ms
    if (value.endsWith('m')) {
        return parseInt(value.slice(0, -1), 10) * 60000;
    }
    return defaultValue;
}
// ============================================
// CONFIGURAÇÃO CENTRALIZADA
// ============================================
exports.config = {
    // ==================== SERVIDOR ====================
    server: {
        port: parseInt(process.env.PORT || '3000', 10),
        nodeEnv: (process.env.NODE_ENV || 'development'),
        apiPrefix: process.env.API_PREFIX || '/api',
    },
    // ==================== BANCO DE DADOS ====================
    database: {
        // Tipo de conexão
        type: (process.env.DB_CONNECTION_TYPE || 'sqlserver'),
        useMockData: process.env.USE_MOCK_DATA === 'true',
        // SQL Server (usado pelo DatabaseManager)
        sqlServer: {
            server: process.env.DB_SERVER || app_config_1.appConfig.host,
            port: parseInt(process.env.DB_PORT || '1433', 10),
            user: process.env.DB_USER || '',
            password: process.env.DB_PASSWORD || '',
            // ✅ CORRETO: Usa DB_DATABASE_* (não DB_NAME_*)
            databaseEmp: process.env.DB_DATABASE_EMP || '',
            databaseMult: process.env.DB_DATABASE_MULT || '',
            // ✅ CORRETO: Usa parseTimeout para TODOS os timeouts
            connectionTimeout: parseTimeout(process.env.DB_CONNECTION_TIMEOUT, 15000),
            requestTimeout: parseTimeout(process.env.DB_REQUEST_TIMEOUT, 30000),
            encrypt: process.env.DB_ENCRYPT === 'true',
            trustServerCertificate: process.env.DB_TRUST_SERVER_CERTIFICATE === 'true',
        },
        // ODBC
        odbc: {
            dsnEmp: process.env.ODBC_DSN_EMP || '',
            dsnMult: process.env.ODBC_DSN_MULT || '',
            connectionTimeout: parseTimeout(process.env.ODBC_CONNECTION_TIMEOUT, 15000),
        },
        // Retry
        retry: {
            maxAttempts: parseInt(process.env.DB_RETRY_MAX_ATTEMPTS || '3', 10),
            initialDelay: parseTimeout(process.env.DB_RETRY_INITIAL_DELAY, 1000),
            maxDelay: parseTimeout(process.env.DB_RETRY_MAX_DELAY, 10000),
            backoffFactor: parseFloat(process.env.DB_RETRY_BACKOFF_FACTOR || '2'),
        },
    },
    // ==================== CORS ====================
    cors: {
        allowedOrigins: process.env.CORS_ALLOWED_ORIGINS
            ? process.env.CORS_ALLOWED_ORIGINS.split(',')
            : [app_config_1.appConfig.baseUrl],
    },
    // ==================== TIMEOUTS HTTP ====================
    timeout: {
        request: parseTimeout(process.env.HTTP_REQUEST_TIMEOUT, 30000),
        heavyOperation: parseTimeout(process.env.HTTP_HEAVY_TIMEOUT, 60000),
        healthCheck: parseTimeout(process.env.HTTP_HEALTH_TIMEOUT, 5000),
    },
    // ==================== CACHE (Redis) ====================
    cache: {
        enabled: process.env.CACHE_ENABLED === 'true',
        strategy: (process.env.CACHE_STRATEGY || 'memory'),
        redis: {
            url: process.env.CACHE_REDIS_URL || 'redis://lor0138.lorenzetti.ibe:6379',
        },
        defaultTTL: parseTimeout(process.env.CACHE_DEFAULT_TTL, 300000), // 5min padrão
    },
};
// ============================================
// EXPORTS COMPATÍVEIS (não quebra código existente)
// ============================================
/**
 * @deprecated Use 'config' ao invés de 'envConfig'
 */
exports.envConfig = exports.config;
/**
 * @deprecated Use 'config.server' diretamente
 */
exports.serverConfig = {
    port: exports.config.server.port,
    nodeEnv: exports.config.server.nodeEnv,
    apiPrefix: exports.config.server.apiPrefix,
    corsOrigin: exports.config.cors.allowedOrigins[0] || '*',
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvbWFuby9wcm9qZXRvcy9kYXRhc3VsL2xvcjAxMzgvc3JjL2NvbmZpZy9lbnYuY29uZmlnLnRzIiwibWFwcGluZ3MiOiI7QUFBQSwyQkFBMkI7Ozs7OztBQW9CM0Isb0NBeUJDO0FBM0NELG9EQUE0QjtBQUM1Qiw2Q0FBeUM7QUFFekMsZ0JBQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUVoQjs7Ozs7Ozs7Ozs7O0dBWUc7QUFDSCxTQUFnQixZQUFZLENBQUMsS0FBeUIsRUFBRSxZQUFvQjtJQUMxRSxJQUFJLENBQUMsS0FBSztRQUFFLE9BQU8sWUFBWSxDQUFDO0lBRWhDLHFDQUFxQztJQUNyQyxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUN4QixPQUFPLFFBQVEsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDN0IsQ0FBQztJQUVELDRDQUE0QztJQUM1Qyx1Q0FBdUM7SUFDdkMsSUFBSSxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7UUFDekIsT0FBTyxRQUFRLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUMxQyxDQUFDO0lBRUQsaURBQWlEO0lBQ2pELElBQUksS0FBSyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDO1FBQ3hCLE9BQU8sUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ2pELENBQUM7SUFFRCxnREFBZ0Q7SUFDaEQsSUFBSSxLQUFLLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUM7UUFDeEIsT0FBTyxRQUFRLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUM7SUFD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dXJjZXMiOlsiL2hvbWUvbWFuby9wcm9qZXRvcy9kYXRhc3VsL2xvcjAxMzgvc3JjL2NvbmZpZy9lbnYuY29uZmlnLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHNyYy9jb25maWcvZW52LmNvbmZpZy50c1xyXG5cclxuaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xyXG5pbXBvcnQgeyBhcHBDb25maWcgfSBmcm9tICcuL2FwcC5jb25maWcnO1xyXG5cclxuZG90ZW52LmNvbmZpZygpO1xyXG5cclxuLyoqXHJcbiAqIFBhcnNlIGRlIHN0cmluZyBkZSB0aW1lb3V0IHBhcmEgbWlsaXNzZWd1bmRvc1xyXG4gKiBBY2VpdGEgZm9ybWF0b3M6IFwiMzBzXCIsIFwiNTAwMG1zXCIsIFwiNW1cIiwgXCI1MDAwXCJcclxuICpcclxuICogSU1QT1JUQU5URTogRXN0YSBmdW7Dp8OjbyDDqSB1c2FkYSBlbSBUT0RPIG8gcHJvamV0by5cclxuICogR2FyYW50ZSBxdWUgdGltZW91dHMgc2VtcHJlIHNlamFtIG7Dum1lcm9zIHbDoWxpZG9zIGVtIG1zLlxyXG4gKlxyXG4gKiBGb3JtYXRvcyBzdXBvcnRhZG9zOlxyXG4gKiAtIFwiMzAwMDBcIiDihpIgMzAwMDBtcyAobsO6bWVybyBwdXJvKVxyXG4gKiAtIFwiMzBzXCIg4oaSIDMwMDAwbXMgKHNlZ3VuZG9zKVxyXG4gKiAtIFwiMzAwMDBtc1wiIOKGkiAzMDAwMG1zIChtaWxpc3NlZ3VuZG9zKVxyXG4gKiAtIFwiNW1cIiDihpIgMzAwMDAwbXMgKG1pbnV0b3MpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VUaW1lb3V0KHZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQsIGRlZmF1bHRWYWx1ZTogbnVtYmVyKTogbnVtYmVyIHtcclxuICBpZiAoIXZhbHVlKSByZXR1cm4gZGVmYXVsdFZhbHVlO1xyXG5cclxuICAvLyBTZSBmb3IgbsO6bWVybyBwdXJvLCByZXRvcm5hIGRpcmV0b1xyXG4gIGlmICgvXlxcZCskLy50ZXN0KHZhbHVlKSkge1xyXG4gICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlLCAxMCk7XHJcbiAgfVxyXG5cclxuICAvLyDinIUgSU1QT1JUQU5URTogVmVyaWZpY2FyICdtcycgQU5URVMgZGUgJ3MnXHJcbiAgLy8gKHBvcnF1ZSAnbXMnIHRhbWLDqW0gdGVybWluYSBjb20gJ3MnKVxyXG4gIGlmICh2YWx1ZS5lbmRzV2l0aCgnbXMnKSkge1xyXG4gICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlLnNsaWNlKDAsIC0yKSwgMTApO1xyXG4gIH1cclxuXHJcbiAgLy8gU2UgdGVybWluYXIgY29tICdzJywgY29udmVydGUgc2VndW5kb3MgcGFyYSBtc1xyXG4gIGlmICh2YWx1ZS5lbmRzV2l0aCgncycpKSB7XHJcbiAgICByZXR1cm4gcGFyc2VJbnQodmFsdWUuc2xpY2UoMCwgLTEpLCAxMCkgKiAxMDAwO1xyXG4gIH1cclxuXHJcbiAgLy8gU2UgdGVybWluYXIgY29tICdtJywgY29udmVydGUgbWludXRvcyBwYXJhIG1zXHJcbiAgaWYgKHZhbHVlLmVuZHNXaXRoKCdtJykpIHtcclxuICAgIHJldHVybiBwYXJzZUludCh2YWx1ZS5zbGljZSgwLCAtMSksIDEwKSAqIDYwMDAwO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcclxufVxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gQ09ORklHVVJBw4fDg08gQ0VOVFJBTElaQURBXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xyXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFNFUlZJRE9SID09PT09PT09PT09PT09PT09PT09XHJcbiAgc2VydmVyOiB7XHJcbiAgICBwb3J0OiBwYXJzZUludChwcm9jZXNzLmVudi5QT1JUIHx8ICczMDAwJywgMTApLFxyXG4gICAgbm9kZUVudjogKHByb2Nlc3MuZW52Lk5PREVfRU5WIHx8ICdkZXZlbG9wbWVudCcpIGFzICdkZXZlbG9wbWVudCcgfCAncHJvZHVjdGlvbicgfCAndGVzdCcsXHJcbiAgICBhcGlQcmVmaXg6IHByb2Nlc3MuZW52LkFQSV9QUkVGSVggfHwgJy9hcGknLFxyXG4gIH0sXHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09IEJBTkNPIERFIERBRE9TID09PT09PT09PT09PT09PT09PT09XHJcbiAgZGF0YWJhc2U6IHtcclxuICAgIC8vIFRpcG8gZGUgY29uZXjDo29cclxuICAgIHR5cGU6IChwcm9jZXNzLmVudi5EQl9DT05ORUNUSU9OX1RZUEUgfHwgJ3NxbHNlcnZlcicpIGFzICdzcWxzZXJ2ZXInIHwgJ29kYmMnLFxyXG4gICAgdXNlTW9ja0RhdGE6IHByb2Nlc3MuZW52LlVTRV9NT0NLX0RBVEEgPT09ICd0cnVlJyxcclxuXHJcbiAgICAvLyBTUUwgU2VydmVyICh1c2FkbyBwZWxvIERhdGFiYXNlTWFuYWdlcilcclxuICAgIHNxbFNlcnZlcjoge1xyXG4gICAgICBzZXJ2ZXI6IHByb2Nlc3MuZW52LkRCX1NFUlZFUiB8fCBhcHBDb25maWcuaG9zdCxcclxuICAgICAgcG9ydDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuREJfUE9SVCB8fCAnMTQzMycsIDEwKSxcclxuICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCAnJyxcclxuICAgICAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1NXT1JEIHx8ICcnLFxyXG5cclxuICAgICAgLy8g4pyFIENPUlJFVE86IFVzYSBEQl9EQVRBQkFTRV8qIChuw6NvIERCX05BTUVfKilcclxuICAgICAgZGF0YWJhc2VFbXA6IHByb2Nlc3MuZW52LkRCX0RBVEFCQVNFX0VNUCB8fCAnJyxcclxuICAgICAgZGF0YWJhc2VNdWx0OiBwcm9jZXNzLmVudi5EQl9EQVRBQkFTRV9NVUxUIHx8ICcnLFxyXG5cclxuICAgICAgLy8g4pyFIENPUlJFVE86IFVzYSBwYXJzZVRpbWVvdXQgcGFyYSBUT0RPUyBvcyB0aW1lb3V0c1xyXG4gICAgICBjb25uZWN0aW9uVGltZW91dDogcGFyc2VUaW1lb3V0KHByb2Nlc3MuZW52LkRCX0NPTk5FQ1RJT05fVElNRU9VVCwgMTUwMDApLFxyXG4gICAgICByZXF1ZXN0VGltZW91dDogcGFyc2VUaW1lb3V0KHByb2Nlc3MuZW52LkRCX1JFUVVFU1RfVElNRU9VVCwgMzAwMDApLFxyXG5cclxuICAgICAgZW5jcnlwdDogcHJvY2Vzcy5lbnYuREJfRU5DUllQVCA9PT0gJ3RydWUnLFxyXG4gICAgICB0cnVzdFNlcnZlckNlcnRpZmljYXRlOiBwcm9jZXNzLmVudi5EQl9UUlVTVF9TRVJWRVJfQ0VSVElGSUNBVEUgPT09ICd0cnVlJyxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gT0RCQ1xyXG4gICAgb2RiYzoge1xyXG4gICAgICBkc25FbXA6IHByb2Nlc3MuZW52Lk9EQkNfRFNOX0VNUCB8fCAnJyxcclxuICAgICAgZHNuTXVsdDogcHJvY2Vzcy5lbnYuT0RCQ19EU05fTVVMVCB8fCAnJyxcclxuICAgICAgY29ubmVjdGlvblRpbWVvdXQ6IHBhcnNlVGltZW91dChwcm9jZXNzLmVudi5PREJDX0NPTk5FQ1RJT05fVElNRU9VVCwgMTUwMDApLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBSZXRyeVxyXG4gICAgcmV0cnk6IHtcclxuICAgICAgbWF4QXR0ZW1wdHM6IHBhcnNlSW50KHByb2Nlc3MuZW52LkRCX1JFVFJZX01BWF9BVFRFTVBUUyB8fCAnMycsIDEwKSxcclxuICAgICAgaW5pdGlhbERlbGF5OiBwYXJzZVRpbWVvdXQocHJvY2Vzcy5lbnYuREJfUkVUUllfSU5JVElBTF9ERUxBWSwgMTAwMCksXHJcbiAgICAgIG1heERlbGF5OiBwYXJzZVRpbWVvdXQocHJvY2Vzcy5lbnYuREJfUkVUUllfTUFYX0RFTEFZLCAxMDAwMCksXHJcbiAgICAgIGJhY2tvZmZGYWN0b3I6IHBhcnNlRmxvYXQocHJvY2Vzcy5lbnYuREJfUkVUUllfQkFDS09GRl9GQUNUT1IgfHwgJzInKSxcclxuICAgIH0sXHJcbiAgfSxcclxuXHJcbiAgLy8gPT09PT09PT09PT09PT09PT09PT0gQ09SUyA9PT09PT09PT09PT09PT09PT09PVxyXG4gIGNvcnM6IHtcclxuICAgIGFsbG93ZWRPcmlnaW5zOiBwcm9jZXNzLmVudi5DT1JTX0FMTE9XRURfT1JJR0lOU1xyXG4gICAgICA/IHByb2Nlc3MuZW52LkNPUlNfQUxMT1dFRF9PUklHSU5TLnNwbGl0KCcsJylcclxuICAgICAgOiBbYXBwQ29uZmlnLmJhc2VVcmxdLFxyXG4gIH0sXHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09IFRJTUVPVVRTIEhUVFAgPT09PT09PT09PT09PT09PT09PT1cclxuICB0aW1lb3V0OiB7XHJcbiAgICByZXF1ZXN0OiBwYXJzZVRpbWVvdXQocHJvY2Vzcy5lbnYuSFRUUF9SRVFVRVNUX1RJTUVPVVQsIDMwMDAwKSxcclxuICAgIGhlYXZ5T3BlcmF0aW9uOiBwYXJzZVRpbWVvdXQocHJvY2Vzcy5lbnYuSFRUUF9IRUFWWV9USU1FT1VULCA2MDAwMCksXHJcbiAgICBoZWFsdGhDaGVjazogcGFyc2VUaW1lb3V0KHByb2Nlc3MuZW52LkhUVFBfSEVBTFRIX1RJTUVPVVQsIDUwMDApLFxyXG4gIH0sXHJcblxyXG4gIC8vID09PT09PT09PT09PT09PT09PT09IENBQ0hFIChSZWRpcykgPT09PT09PT09PT09PT09PT09PT1cclxuICBjYWNoZToge1xyXG4gICAgZW5hYmxlZDogcHJvY2Vzcy5lbnYuQ0FDSEVfRU5BQkxFRCA9PT0gJ3RydWUnLFxyXG4gICAgc3RyYXRlZ3k6IChwcm9jZXNzLmVudi5DQUNIRV9TVFJBVEVHWSB8fCAnbWVtb3J5JykgYXMgJ21lbW9yeScgfCAncmVkaXMnIHwgJ2xheWVyZWQnLFxyXG4gICAgcmVkaXM6IHtcclxuICAgICAgdXJsOiBwcm9jZXNzLmVudi5DQUNIRV9SRURJU19VUkwgfHwgJ3JlZGlzOi8vbG9yMDEzOC5sb3JlbnpldHRpLmliZTo2Mzc5JyxcclxuICAgIH0sXHJcbiAgICBkZWZhdWx0VFRMOiBwYXJzZVRpbWVvdXQocHJvY2Vzcy5lbnYuQ0FDSEVfREVGQVVMVF9UVEwsIDMwMDAwMCksIC8vIDVtaW4gcGFkcsOjb1xyXG4gIH0sXHJcbn07XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBFWFBPUlRTIENPTVBBVMONVkVJUyAobsOjbyBxdWVicmEgY8OzZGlnbyBleGlzdGVudGUpXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vKipcclxuICogQGRlcHJlY2F0ZWQgVXNlICdjb25maWcnIGFvIGludsOpcyBkZSAnZW52Q29uZmlnJ1xyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGVudkNvbmZpZyA9IGNvbmZpZztcclxuXHJcbi8qKlxyXG4gKiBAZGVwcmVjYXRlZCBVc2UgJ2NvbmZpZy5zZXJ2ZXInIGRpcmV0YW1lbnRlXHJcbiAqL1xyXG5leHBvcnQgY29uc3Qgc2VydmVyQ29uZmlnID0ge1xyXG4gIHBvcnQ6IGNvbmZpZy5zZXJ2ZXIucG9ydCxcclxuICBub2RlRW52OiBjb25maWcuc2VydmVyLm5vZGVFbnYsXHJcbiAgYXBpUHJlZml4OiBjb25maWcuc2VydmVyLmFwaVByZWZpeCxcclxuICBjb3JzT3JpZ2luOiBjb25maWcuY29ycy5hbGxvd2VkT3JpZ2luc1swXSB8fCAnKicsXHJcbn07Il0sInZlcnNpb24iOjN9