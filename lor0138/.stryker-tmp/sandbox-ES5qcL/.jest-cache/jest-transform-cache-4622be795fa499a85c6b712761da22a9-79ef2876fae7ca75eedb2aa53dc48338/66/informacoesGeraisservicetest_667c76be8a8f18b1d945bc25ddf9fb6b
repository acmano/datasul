b147ba6f41b50195db989476b92e3417
"use strict";
// @ts-nocheck
// tests/unit/services/informacoesGerais.service.test.ts
Object.defineProperty(exports, "__esModule", { value: true });
// Mock do Repository
jest.mock('@api/lor0138/item/dadosCadastrais/informacoesGerais/repository/informacoesGerais.repository');
// Mock do logger
jest.mock('@shared/utils/logger', () => ({
    log: {
        info: jest.fn(),
        error: jest.fn(),
        warn: jest.fn(),
    },
}));
const informacoesGerais_service_1 = require("@api/lor0138/item/dadosCadastrais/informacoesGerais/service/informacoesGerais.service");
const informacoesGerais_repository_1 = require("@api/lor0138/item/dadosCadastrais/informacoesGerais/repository/informacoesGerais.repository");
const CustomErrors_1 = require("@shared/errors/CustomErrors");
const item_factory_1 = require("../../factories/item.factory");
describe('Service - InformacoesGeraisService', () => {
    beforeEach(() => {
        jest.clearAllMocks();
    });
    // ========================================
    // CASOS DE SUCESSO
    // ========================================
    describe('getInformacoesGerais - Sucesso', () => {
        it('deve retornar informações completas do item', async () => {
            const mockItem = (0, item_factory_1.createItemMasterQueryResult)();
            const mockEstabs = [
                (0, item_factory_1.createItemEstabQueryResult)(),
                (0, item_factory_1.createItemEstabQueryResult)({ estabCodigo: '02.01', codObsoleto: 1 })
            ];
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockResolvedValue(mockItem);
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemEstabelecimentos.mockResolvedValue(mockEstabs);
            const result = await informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('7530110');
            expect(result).toBeDefined();
            expect(result.identificacaoItemCodigo).toBe('7530110');
            expect(result.identificacaoItemDescricao).toBe('VALVULA DE ESFERA 1/2" BRONZE');
            expect(result.identificacaoItemUnidade).toBe('UN');
            expect(result.identificacaoItensEstabelecimentos).toHaveLength(2);
        });
        it('deve transformar dados do repository para DTO de resposta', async () => {
            const mockItem = (0, item_factory_1.createItemMasterQueryResult)();
            const mockEstabs = [(0, item_factory_1.createItemEstabQueryResult)()];
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockResolvedValue(mockItem);
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemEstabelecimentos.mockResolvedValue(mockEstabs);
            const result = await informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('7530110');
            // Valida mapeamento de campos
            expect(result).toHaveProperty('identificacaoItemCodigo');
            expect(result).toHaveProperty('identificacaoItemDescricao');
            expect(result).toHaveProperty('identificacaoItemUnidade');
            expect(result).toHaveProperty('identificacaoItensEstabelecimentos');
        });
        it('deve calcular statusIndex corretamente (0 = ativo)', async () => {
            const mockItem = (0, item_factory_1.createItemMasterQueryResult)();
            const mockEstabs = [
                (0, item_factory_1.createItemEstabQueryResult)({ codObsoleto: 0 }) // Ativo
            ];
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockResolvedValue(mockItem);
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemEstabelecimentos.mockResolvedValue(mockEstabs);
            const result = await informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('7530110');
            expect(result.identificacaoItensEstabelecimentos[0].statusIndex).toBe(1);
        });
        it('deve calcular statusIndex corretamente (1+ = inativo)', async () => {
            const mockItem = (0, item_factory_1.createItemMasterQueryResult)();
            const mockEstabs = [
                (0, item_factory_1.createItemEstabQueryResult)({ codObsoleto: 1 }), // Inativo
                (0, item_factory_1.createItemEstabQueryResult)({ codObsoleto: 2 }), // Inativo
                (0, item_factory_1.createItemEstabQueryResult)({ codObsoleto: 99 }) // Inativo
            ];
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockResolvedValue(mockItem);
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemEstabelecimentos.mockResolvedValue(mockEstabs);
            const result = await informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('7530110');
            expect(result.identificacaoItensEstabelecimentos[0].statusIndex).toBe(2);
            expect(result.identificacaoItensEstabelecimentos[1].statusIndex).toBe(2);
            expect(result.identificacaoItensEstabelecimentos[2].statusIndex).toBe(2);
        });
        it('deve retornar item com array vazio de estabelecimentos', async () => {
            const mockItem = (0, item_factory_1.createItemMasterQueryResult)();
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockResolvedValue(mockItem);
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemEstabelecimentos.mockResolvedValue([]);
            const result = await informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('7530110');
            expect(result.identificacaoItensEstabelecimentos).toEqual([]);
        });
        it('deve mapear todos os campos do estabelecimento', async () => {
            const mockItem = (0, item_factory_1.createItemMasterQueryResult)();
            const mockEstabs = [(0, item_factory_1.createItemEstabQueryResult)({
                    itemCodigo: '7530110',
                    estabCodigo: '01.01',
                    estabNome: 'CD São Paulo',
                    codObsoleto: 0
                })];
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockResolvedValue(mockItem);
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemEstabelecimentos.mockResolvedValue(mockEstabs);
            const result = await informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('7530110');
            const estab = result.identificacaoItensEstabelecimentos[0];
            expect(estab.itemCodigo).toBe('7530110');
            expect(estab.estabCodigo).toBe('01.01');
            expect(estab.estabNome).toBe('CD São Paulo');
            expect(estab.statusIndex).toBe(1);
        });
    });
    // ========================================
    // ITEM NÃO ENCONTRADO
    // ========================================
    describe('getInformacoesGerais - Item Não Encontrado', () => {
        it('deve lançar ItemNotFoundError quando item não existe', async () => {
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockResolvedValue(null);
            await expect(informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('INEXISTENTE')).rejects.toThrow(CustomErrors_1.ItemNotFoundError);
        });
        it('deve incluir código do item na mensagem de erro', async () => {
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockResolvedValue(null);
            try {
                await informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('ABC123');
                fail('Deveria ter lançado erro');
            }
            catch (error) {
                expect(error).toBeInstanceOf(CustomErrors_1.ItemNotFoundError);
                expect(error.message).toContain('ABC123');
            }
        });
        it('deve logar quando item não é encontrado', async () => {
            const { log } = require('@shared/utils/logger');
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockResolvedValue(null);
            try {
                await informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('7530110');
            }
            catch (error) {
                // Esperado
            }
            expect(log.info).toHaveBeenCalledWith('Item não encontrado', { itemCodigo: '7530110' });
        });
    });
    // ========================================
    // TRATAMENTO DE ERROS
    // ========================================
    describe('getInformacoesGerais - Tratamento de Erros', () => {
        it('deve re-lançar ItemNotFoundError sem conversão', async () => {
            const notFoundError = new CustomErrors_1.ItemNotFoundError('7530110');
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockRejectedValue(notFoundError);
            await expect(informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('7530110')).rejects.toThrow(CustomErrors_1.ItemNotFoundError);
        });
        it('deve converter erros de banco em DatabaseError', async () => {
            const dbError = new Error('Conexão perdida');
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockRejectedValue(dbError);
            await expect(informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('7530110')).rejects.toThrow(CustomErrors_1.DatabaseError);
        });
        it('deve incluir erro original em DatabaseError', async () => {
            const originalError = new Error('Timeout SQL');
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockRejectedValue(originalError);
            try {
                await informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('7530110');
                fail('Deveria ter lançado erro');
            }
            catch (error) {
                expect(error).toBeInstanceOf(CustomErrors_1.DatabaseError);
                expect(error.message).toContain('Falha ao buscar');
            }
        });
        it('deve logar erros de banco', async () => {
            const { log } = require('@shared/utils/logger');
            const dbError = new Error('Erro SQL');
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockRejectedValue(dbError);
            try {
                await informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('7530110');
            }
            catch (error) {
                // Esperado
            }
            expect(log.error).toHaveBeenCalledWith('Erro ao buscar informações gerais', expect.objectContaining({
                itemCodigo: '7530110',
                error: 'Erro SQL'
            }));
        });
        it('deve tratar erro na busca de estabelecimentos', async () => {
            const mockItem = (0, item_factory_1.createItemMasterQueryResult)();
            const estabError = new Error('Erro ao buscar estabelecimentos');
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockResolvedValue(mockItem);
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemEstabelecimentos.mockRejectedValue(estabError);
            await expect(informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('7530110')).rejects.toThrow(CustomErrors_1.DatabaseError);
        });
    });
    // ========================================
    // INTEGRAÇÃO COM REPOSITORY
    // ========================================
    describe('Integração com Repository', () => {
        it('deve chamar getItemMaster com código correto', async () => {
            const mockItem = (0, item_factory_1.createItemMasterQueryResult)();
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockResolvedValue(mockItem);
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemEstabelecimentos.mockResolvedValue([]);
            await informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('ABC123');
            expect(informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster).toHaveBeenCalledWith('ABC123');
        });
        it('deve chamar getItemEstabelecimentos com código correto', async () => {
            const mockItem = (0, item_factory_1.createItemMasterQueryResult)();
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockResolvedValue(mockItem);
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemEstabelecimentos.mockResolvedValue([]);
            await informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('ABC123');
            expect(informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemEstabelecimentos).toHaveBeenCalledWith('ABC123');
        });
        it('deve chamar Repository na ordem correta (master → estabelecimentos)', async () => {
            const mockItem = (0, item_factory_1.createItemMasterQueryResult)();
            const callOrder = [];
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockImplementation(async () => {
                callOrder.push('master');
                return mockItem;
            });
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemEstabelecimentos.mockImplementation(async () => {
                callOrder.push('estabelecimentos');
                return [];
            });
            await informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('7530110');
            expect(callOrder).toEqual(['master', 'estabelecimentos']);
        });
        it('não deve buscar estabelecimentos se item não existe', async () => {
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockResolvedValue(null);
            try {
                await informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('7530110');
            }
            catch (error) {
                // Esperado
            }
            expect(informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemEstabelecimentos).not.toHaveBeenCalled();
        });
    });
    // ========================================
    // EDGE CASES
    // ========================================
    describe('Edge Cases', () => {
        it('deve tratar item com descrição vazia', async () => {
            const mockItem = (0, item_factory_1.createItemMasterQueryResult)({ itemDescricao: '' });
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockResolvedValue(mockItem);
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemEstabelecimentos.mockResolvedValue([]);
            const result = await informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('7530110');
            expect(result.identificacaoItemDescricao).toBe('');
        });
        it('deve tratar múltiplos estabelecimentos (10+)', async () => {
            const mockItem = (0, item_factory_1.createItemMasterQueryResult)();
            const mockEstabs = Array.from({ length: 15 }, (_, i) => (0, item_factory_1.createItemEstabQueryResult)({
                estabCodigo: `0${i + 1}.01`,
                codObsoleto: i % 2
            }));
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockResolvedValue(mockItem);
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemEstabelecimentos.mockResolvedValue(mockEstabs);
            const result = await informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('7530110');
            expect(result.identificacaoItensEstabelecimentos).toHaveLength(15);
        });
        it('deve tratar nome de estabelecimento null', async () => {
            const mockItem = (0, item_factory_1.createItemMasterQueryResult)();
            const mockEstabs = [
                (0, item_factory_1.createItemEstabQueryResult)({ estabNome: null })
            ];
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockResolvedValue(mockItem);
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemEstabelecimentos.mockResolvedValue(mockEstabs);
            const result = await informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('7530110');
            expect(result.identificacaoItensEstabelecimentos[0].estabNome).toBeNull();
        });
        it('deve tratar valores negativos de codObsoleto', async () => {
            const mockItem = (0, item_factory_1.createItemMasterQueryResult)();
            const mockEstabs = [
                (0, item_factory_1.createItemEstabQueryResult)({ codObsoleto: -1 })
            ];
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemMaster.mockResolvedValue(mockItem);
            informacoesGerais_repository_1.ItemInformacoesGeraisRepository.getItemEstabelecimentos.mockResolvedValue(mockEstabs);
            const result = await informacoesGerais_service_1.InformacoesGeraisService.getInformacoesGerais('7530110');
            // -1 não é 0, então statusIndex = 2
            expect(result.identificacaoItensEstabelecimentos[0].statusIndex).toBe(2);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvbWFuby9wcm9qZXRvcy9kYXRhc3VsL2xvcjAxMzgvLnN0cnlrZXItdG1wL3NhbmRib3gtRVM1cWNML3Rlc3RzL3VuaXQvc2VydmljZXMvaW5mb3JtYWNvZXNHZXJhaXMuc2VydmljZS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7QUFBQSxjQUFjO0FBQ2Qsd0RBQXdEOztBQVd4RCxxQkFBcUI7QUFDckIsSUFBSSxDQUFDLElBQUksQ0FBQyw2RkFBNkYsQ0FBQyxDQUFDO0FBRXpHLGlCQUFpQjtBQUNqQixJQUFJLENBQUMsSUFBSSxDQUFDLHNCQUFzQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDdkMsR0FBRyxFQUFFO1FBQ0gsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDZixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNoQixJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtLQUNoQjtDQUNGLENBQUMsQ0FBQyxDQUFDO0FBbkJKLHFJQUFpSTtBQUNqSSw4SUFBOEk7QUFDOUksOERBQStFO0FBQy9FLCtEQUlzQztBQWN0QyxRQUFRLENBQUMsb0NBQW9DLEVBQUUsR0FBRyxFQUFFO0lBRWxELFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDZCxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDdkIsQ0FBQyxDQUFDLENBQUM7SUFFSCwyQ0FBMkM7SUFDM0MsbUJBQW1CO0lBQ25CLDJDQUEyQztJQUMzQyxRQUFRLENBQUMsZ0NBQWdDLEVBQUUsR0FBRyxFQUFFO1FBRTlDLEVBQUUsQ0FBQyw2Q0FBNkMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUMzRCxNQUFNLFFBQVEsR0FBRyxJQUFBLDBDQUEyQixHQUFFLENBQUM7WUFDL0MsTUFBTSxVQUFVLEdBQUc7Z0JBQ2pCLElBQUEseUNBQTBCLEdBQUU7Z0JBQzVCLElBQUEseUNBQTBCLEVBQUMsRUFBRSxXQUFXLEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxDQUFDLEVBQUUsQ0FBQzthQUNyRSxDQUFDO1lB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LENBQUM7WUFDeEYsOERBQStCLENBQUMsdUJBQXFDLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLENBQUM7WUFFckcsTUFBTSxNQUFNLEdBQUcsTUFBTSxvREFBd0IsQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUU5RSxvQ0FBb0M7WUFDcEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxrQ0FBa0MsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0UsQ0FBQyxDQUFDLENBQUM7SUFFTCxDQUFDLENBQUMsQ0FBQztBQUVMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL21hbm8vcHJvamV0b3MvZGF0YXN1bC9sb3IwMTM4Ly5zdHJ5a2VyLXRtcC9zYW5kYm94LUVTNXFjTC90ZXN0cy91bml0L3NlcnZpY2VzL2luZm9ybWFjb2VzR2VyYWlzLnNlcnZpY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtbm9jaGVja1xuLy8gdGVzdHMvdW5pdC9zZXJ2aWNlcy9pbmZvcm1hY29lc0dlcmFpcy5zZXJ2aWNlLnRlc3QudHNcblxuaW1wb3J0IHsgSW5mb3JtYWNvZXNHZXJhaXNTZXJ2aWNlIH0gZnJvbSAnQGFwaS9sb3IwMTM4L2l0ZW0vZGFkb3NDYWRhc3RyYWlzL2luZm9ybWFjb2VzR2VyYWlzL3NlcnZpY2UvaW5mb3JtYWNvZXNHZXJhaXMuc2VydmljZSc7XG5pbXBvcnQgeyBJdGVtSW5mb3JtYWNvZXNHZXJhaXNSZXBvc2l0b3J5IH0gZnJvbSAnQGFwaS9sb3IwMTM4L2l0ZW0vZGFkb3NDYWRhc3RyYWlzL2luZm9ybWFjb2VzR2VyYWlzL3JlcG9zaXRvcnkvaW5mb3JtYWNvZXNHZXJhaXMucmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBJdGVtTm90Rm91bmRFcnJvciwgRGF0YWJhc2VFcnJvciB9IGZyb20gJ0BzaGFyZWQvZXJyb3JzL0N1c3RvbUVycm9ycyc7XG5pbXBvcnQgeyBcbiAgY3JlYXRlSXRlbU1hc3RlclF1ZXJ5UmVzdWx0LCBcbiAgY3JlYXRlSXRlbUVzdGFiUXVlcnlSZXN1bHQsXG4gIGNyZWF0ZUluZm9ybWFjb2VzR2VyYWlzXG59IGZyb20gJy4uLy4uL2ZhY3Rvcmllcy9pdGVtLmZhY3RvcnknO1xuXG4vLyBNb2NrIGRvIFJlcG9zaXRvcnlcbmplc3QubW9jaygnQGFwaS9sb3IwMTM4L2l0ZW0vZGFkb3NDYWRhc3RyYWlzL2luZm9ybWFjb2VzR2VyYWlzL3JlcG9zaXRvcnkvaW5mb3JtYWNvZXNHZXJhaXMucmVwb3NpdG9yeScpO1xuXG4vLyBNb2NrIGRvIGxvZ2dlclxuamVzdC5tb2NrKCdAc2hhcmVkL3V0aWxzL2xvZ2dlcicsICgpID0+ICh7XG4gIGxvZzoge1xuICAgIGluZm86IGplc3QuZm4oKSxcbiAgICBlcnJvcjogamVzdC5mbigpLFxuICAgIHdhcm46IGplc3QuZm4oKSxcbiAgfSxcbn0pKTtcblxuZGVzY3JpYmUoJ1NlcnZpY2UgLSBJbmZvcm1hY29lc0dlcmFpc1NlcnZpY2UnLCAoKSA9PiB7XG4gIFxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBDQVNPUyBERSBTVUNFU1NPXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgZGVzY3JpYmUoJ2dldEluZm9ybWFjb2VzR2VyYWlzIC0gU3VjZXNzbycsICgpID0+IHtcbiAgICBcbiAgICBpdCgnZGV2ZSByZXRvcm5hciBpbmZvcm1hw6fDtWVzIGNvbXBsZXRhcyBkbyBpdGVtJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0l0ZW0gPSBjcmVhdGVJdGVtTWFzdGVyUXVlcnlSZXN1bHQoKTtcbiAgICAgIGNvbnN0IG1vY2tFc3RhYnMgPSBbXG4gICAgICAgIGNyZWF0ZUl0ZW1Fc3RhYlF1ZXJ5UmVzdWx0KCksXG4gICAgICAgIGNyZWF0ZUl0ZW1Fc3RhYlF1ZXJ5UmVzdWx0KHsgZXN0YWJDb2RpZ286ICcwMi4wMScsIGNvZE9ic29sZXRvOiAxIH0pXG4gICAgICBdO1xuXG4gICAgICAoSXRlbUluZm9ybWFjb2VzR2VyYWlzUmVwb3NpdG9yeS5nZXRJdGVtTWFzdGVyIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0l0ZW0pO1xuICAgICAgKEl0ZW1JbmZvcm1hY29lc0dlcmFpc1JlcG9zaXRvcnkuZ2V0SXRlbUVzdGFiZWxlY2ltZW50b3MgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRXN0YWJzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgSW5mb3JtYWNvZXNHZXJhaXNTZXJ2aWNlLmdldEluZm9ybWFjb2VzR2VyYWlzKCc3NTMwMTEwJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocmVzdWx0LmlkZW50aWZpY2FjYW9JdGVtQ29kaWdvKS50b0JlKCc3NTMwMTEwJyk7XG4gICAgICBleHBlY3QocmVzdWx0LmlkZW50aWZpY2FjYW9JdGVtRGVzY3JpY2FvKS50b0JlKCdWQUxWVUxBIERFIEVTRkVSQSAxLzJcIiBCUk9OWkUnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuaWRlbnRpZmljYWNhb0l0ZW1VbmlkYWRlKS50b0JlKCdVTicpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5pZGVudGlmaWNhY2FvSXRlbnNFc3RhYmVsZWNpbWVudG9zKS50b0hhdmVMZW5ndGgoMik7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSB0cmFuc2Zvcm1hciBkYWRvcyBkbyByZXBvc2l0b3J5IHBhcmEgRFRPIGRlIHJlc3Bvc3RhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0l0ZW0gPSBjcmVhdGVJdGVtTWFzdGVyUXVlcnlSZXN1bHQoKTtcbiAgICAgIGNvbnN0IG1vY2tFc3RhYnMgPSBbY3JlYXRlSXRlbUVzdGFiUXVlcnlSZXN1bHQoKV07XG5cbiAgICAgIChJdGVtSW5mb3JtYWNvZXNHZXJhaXNSZXBvc2l0b3J5LmdldEl0ZW1NYXN0ZXIgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrSXRlbSk7XG4gICAgICAoSXRlbUluZm9ybWFjb2VzR2VyYWlzUmVwb3NpdG9yeS5nZXRJdGVtRXN0YWJlbGVjaW1lbnRvcyBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tFc3RhYnMpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBJbmZvcm1hY29lc0dlcmFpc1NlcnZpY2UuZ2V0SW5mb3JtYWNvZXNHZXJhaXMoJzc1MzAxMTAnKTtcblxuICAgICAgLy8gVmFsaWRhIG1hcGVhbWVudG8gZGUgY2FtcG9zXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnaWRlbnRpZmljYWNhb0l0ZW1Db2RpZ28nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdpZGVudGlmaWNhY2FvSXRlbURlc2NyaWNhbycpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2lkZW50aWZpY2FjYW9JdGVtVW5pZGFkZScpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2lkZW50aWZpY2FjYW9JdGVuc0VzdGFiZWxlY2ltZW50b3MnKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGNhbGN1bGFyIHN0YXR1c0luZGV4IGNvcnJldGFtZW50ZSAoMCA9IGF0aXZvKScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tJdGVtID0gY3JlYXRlSXRlbU1hc3RlclF1ZXJ5UmVzdWx0KCk7XG4gICAgICBjb25zdCBtb2NrRXN0YWJzID0gW1xuICAgICAgICBjcmVhdGVJdGVtRXN0YWJRdWVyeVJlc3VsdCh7IGNvZE9ic29sZXRvOiAwIH0pIC8vIEF0aXZvXG4gICAgICBdO1xuXG4gICAgICAoSXRlbUluZm9ybWFjb2VzR2VyYWlzUmVwb3NpdG9yeS5nZXRJdGVtTWFzdGVyIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0l0ZW0pO1xuICAgICAgKEl0ZW1JbmZvcm1hY29lc0dlcmFpc1JlcG9zaXRvcnkuZ2V0SXRlbUVzdGFiZWxlY2ltZW50b3MgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRXN0YWJzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgSW5mb3JtYWNvZXNHZXJhaXNTZXJ2aWNlLmdldEluZm9ybWFjb2VzR2VyYWlzKCc3NTMwMTEwJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaWRlbnRpZmljYWNhb0l0ZW5zRXN0YWJlbGVjaW1lbnRvc1swXS5zdGF0dXNJbmRleCkudG9CZSgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGNhbGN1bGFyIHN0YXR1c0luZGV4IGNvcnJldGFtZW50ZSAoMSsgPSBpbmF0aXZvKScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tJdGVtID0gY3JlYXRlSXRlbU1hc3RlclF1ZXJ5UmVzdWx0KCk7XG4gICAgICBjb25zdCBtb2NrRXN0YWJzID0gW1xuICAgICAgICBjcmVhdGVJdGVtRXN0YWJRdWVyeVJlc3VsdCh7IGNvZE9ic29sZXRvOiAxIH0pLCAvLyBJbmF0aXZvXG4gICAgICAgIGNyZWF0ZUl0ZW1Fc3RhYlF1ZXJ5UmVzdWx0KHsgY29kT2Jzb2xldG86IDIgfSksIC8vIEluYXRpdm9cbiAgICAgICAgY3JlYXRlSXRlbUVzdGFiUXVlcnlSZXN1bHQoeyBjb2RPYnNvbGV0bzogOTkgfSkgLy8gSW5hdGl2b1xuICAgICAgXTtcblxuICAgICAgKEl0ZW1JbmZvcm1hY29lc0dlcmFpc1JlcG9zaXRvcnkuZ2V0SXRlbU1hc3RlciBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tJdGVtKTtcbiAgICAgIChJdGVtSW5mb3JtYWNvZXNHZXJhaXNSZXBvc2l0b3J5LmdldEl0ZW1Fc3RhYmVsZWNpbWVudG9zIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0VzdGFicyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEluZm9ybWFjb2VzR2VyYWlzU2VydmljZS5nZXRJbmZvcm1hY29lc0dlcmFpcygnNzUzMDExMCcpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlkZW50aWZpY2FjYW9JdGVuc0VzdGFiZWxlY2ltZW50b3NbMF0uc3RhdHVzSW5kZXgpLnRvQmUoMik7XG4gICAgICBleHBlY3QocmVzdWx0LmlkZW50aWZpY2FjYW9JdGVuc0VzdGFiZWxlY2ltZW50b3NbMV0uc3RhdHVzSW5kZXgpLnRvQmUoMik7XG4gICAgICBleHBlY3QocmVzdWx0LmlkZW50aWZpY2FjYW9JdGVuc0VzdGFiZWxlY2ltZW50b3NbMl0uc3RhdHVzSW5kZXgpLnRvQmUoMik7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSByZXRvcm5hciBpdGVtIGNvbSBhcnJheSB2YXppbyBkZSBlc3RhYmVsZWNpbWVudG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0l0ZW0gPSBjcmVhdGVJdGVtTWFzdGVyUXVlcnlSZXN1bHQoKTtcblxuICAgICAgKEl0ZW1JbmZvcm1hY29lc0dlcmFpc1JlcG9zaXRvcnkuZ2V0SXRlbU1hc3RlciBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tJdGVtKTtcbiAgICAgIChJdGVtSW5mb3JtYWNvZXNHZXJhaXNSZXBvc2l0b3J5LmdldEl0ZW1Fc3RhYmVsZWNpbWVudG9zIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBJbmZvcm1hY29lc0dlcmFpc1NlcnZpY2UuZ2V0SW5mb3JtYWNvZXNHZXJhaXMoJzc1MzAxMTAnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pZGVudGlmaWNhY2FvSXRlbnNFc3RhYmVsZWNpbWVudG9zKS50b0VxdWFsKFtdKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIG1hcGVhciB0b2RvcyBvcyBjYW1wb3MgZG8gZXN0YWJlbGVjaW1lbnRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0l0ZW0gPSBjcmVhdGVJdGVtTWFzdGVyUXVlcnlSZXN1bHQoKTtcbiAgICAgIGNvbnN0IG1vY2tFc3RhYnMgPSBbY3JlYXRlSXRlbUVzdGFiUXVlcnlSZXN1bHQoe1xuICAgICAgICBpdGVtQ29kaWdvOiAnNzUzMDExMCcsXG4gICAgICAgIGVzdGFiQ29kaWdvOiAnMDEuMDEnLFxuICAgICAgICBlc3RhYk5vbWU6ICdDRCBTw6NvIFBhdWxvJyxcbiAgICAgICAgY29kT2Jzb2xldG86IDBcbiAgICAgIH0pXTtcblxuICAgICAgKEl0ZW1JbmZvcm1hY29lc0dlcmFpc1JlcG9zaXRvcnkuZ2V0SXRlbU1hc3RlciBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tJdGVtKTtcbiAgICAgIChJdGVtSW5mb3JtYWNvZXNHZXJhaXNSZXBvc2l0b3J5LmdldEl0ZW1Fc3RhYmVsZWNpbWVudG9zIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0VzdGFicyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEluZm9ybWFjb2VzR2VyYWlzU2VydmljZS5nZXRJbmZvcm1hY29lc0dlcmFpcygnNzUzMDExMCcpO1xuXG4gICAgICBjb25zdCBlc3RhYiA9IHJlc3VsdC5pZGVudGlmaWNhY2FvSXRlbnNFc3RhYmVsZWNpbWVudG9zWzBdO1xuICAgICAgZXhwZWN0KGVzdGFiLml0ZW1Db2RpZ28pLnRvQmUoJzc1MzAxMTAnKTtcbiAgICAgIGV4cGVjdChlc3RhYi5lc3RhYkNvZGlnbykudG9CZSgnMDEuMDEnKTtcbiAgICAgIGV4cGVjdChlc3RhYi5lc3RhYk5vbWUpLnRvQmUoJ0NEIFPDo28gUGF1bG8nKTtcbiAgICAgIGV4cGVjdChlc3RhYi5zdGF0dXNJbmRleCkudG9CZSgxKTtcbiAgICB9KTtcblxuICB9KTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIElURU0gTsODTyBFTkNPTlRSQURPXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgZGVzY3JpYmUoJ2dldEluZm9ybWFjb2VzR2VyYWlzIC0gSXRlbSBOw6NvIEVuY29udHJhZG8nLCAoKSA9PiB7XG4gICAgXG4gICAgaXQoJ2RldmUgbGFuw6dhciBJdGVtTm90Rm91bmRFcnJvciBxdWFuZG8gaXRlbSBuw6NvIGV4aXN0ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIChJdGVtSW5mb3JtYWNvZXNHZXJhaXNSZXBvc2l0b3J5LmdldEl0ZW1NYXN0ZXIgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBJbmZvcm1hY29lc0dlcmFpc1NlcnZpY2UuZ2V0SW5mb3JtYWNvZXNHZXJhaXMoJ0lORVhJU1RFTlRFJylcbiAgICAgICkucmVqZWN0cy50b1Rocm93KEl0ZW1Ob3RGb3VuZEVycm9yKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGluY2x1aXIgY8OzZGlnbyBkbyBpdGVtIG5hIG1lbnNhZ2VtIGRlIGVycm8nLCBhc3luYyAoKSA9PiB7XG4gICAgICAoSXRlbUluZm9ybWFjb2VzR2VyYWlzUmVwb3NpdG9yeS5nZXRJdGVtTWFzdGVyIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IEluZm9ybWFjb2VzR2VyYWlzU2VydmljZS5nZXRJbmZvcm1hY29lc0dlcmFpcygnQUJDMTIzJyk7XG4gICAgICAgIGZhaWwoJ0RldmVyaWEgdGVyIGxhbsOnYWRvIGVycm8nKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGV4cGVjdChlcnJvcikudG9CZUluc3RhbmNlT2YoSXRlbU5vdEZvdW5kRXJyb3IpO1xuICAgICAgICBleHBlY3QoKGVycm9yIGFzIEl0ZW1Ob3RGb3VuZEVycm9yKS5tZXNzYWdlKS50b0NvbnRhaW4oJ0FCQzEyMycpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbG9nYXIgcXVhbmRvIGl0ZW0gbsOjbyDDqSBlbmNvbnRyYWRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyBsb2cgfSA9IHJlcXVpcmUoJ0BzaGFyZWQvdXRpbHMvbG9nZ2VyJyk7XG4gICAgICBcbiAgICAgIChJdGVtSW5mb3JtYWNvZXNHZXJhaXNSZXBvc2l0b3J5LmdldEl0ZW1NYXN0ZXIgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgSW5mb3JtYWNvZXNHZXJhaXNTZXJ2aWNlLmdldEluZm9ybWFjb2VzR2VyYWlzKCc3NTMwMTEwJyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBFc3BlcmFkb1xuICAgICAgfVxuXG4gICAgICBleHBlY3QobG9nLmluZm8pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnSXRlbSBuw6NvIGVuY29udHJhZG8nLFxuICAgICAgICB7IGl0ZW1Db2RpZ286ICc3NTMwMTEwJyB9XG4gICAgICApO1xuICAgIH0pO1xuXG4gIH0pO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gVFJBVEFNRU5UTyBERSBFUlJPU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGRlc2NyaWJlKCdnZXRJbmZvcm1hY29lc0dlcmFpcyAtIFRyYXRhbWVudG8gZGUgRXJyb3MnLCAoKSA9PiB7XG4gICAgXG4gICAgaXQoJ2RldmUgcmUtbGFuw6dhciBJdGVtTm90Rm91bmRFcnJvciBzZW0gY29udmVyc8OjbycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5vdEZvdW5kRXJyb3IgPSBuZXcgSXRlbU5vdEZvdW5kRXJyb3IoJzc1MzAxMTAnKTtcbiAgICAgIFxuICAgICAgKEl0ZW1JbmZvcm1hY29lc0dlcmFpc1JlcG9zaXRvcnkuZ2V0SXRlbU1hc3RlciBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlKG5vdEZvdW5kRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIEluZm9ybWFjb2VzR2VyYWlzU2VydmljZS5nZXRJbmZvcm1hY29lc0dlcmFpcygnNzUzMDExMCcpXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhJdGVtTm90Rm91bmRFcnJvcik7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBjb252ZXJ0ZXIgZXJyb3MgZGUgYmFuY28gZW0gRGF0YWJhc2VFcnJvcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRiRXJyb3IgPSBuZXcgRXJyb3IoJ0NvbmV4w6NvIHBlcmRpZGEnKTtcbiAgICAgIFxuICAgICAgKEl0ZW1JbmZvcm1hY29lc0dlcmFpc1JlcG9zaXRvcnkuZ2V0SXRlbU1hc3RlciBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlKGRiRXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIEluZm9ybWFjb2VzR2VyYWlzU2VydmljZS5nZXRJbmZvcm1hY29lc0dlcmFpcygnNzUzMDExMCcpXG4gICAgICApLnJlamVjdHMudG9UaHJvdyhEYXRhYmFzZUVycm9yKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGluY2x1aXIgZXJybyBvcmlnaW5hbCBlbSBEYXRhYmFzZUVycm9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgb3JpZ2luYWxFcnJvciA9IG5ldyBFcnJvcignVGltZW91dCBTUUwnKTtcbiAgICAgIFxuICAgICAgKEl0ZW1JbmZvcm1hY29lc0dlcmFpc1JlcG9zaXRvcnkuZ2V0SXRlbU1hc3RlciBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlKG9yaWdpbmFsRXJyb3IpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBJbmZvcm1hY29lc0dlcmFpc1NlcnZpY2UuZ2V0SW5mb3JtYWNvZXNHZXJhaXMoJzc1MzAxMTAnKTtcbiAgICAgICAgZmFpbCgnRGV2ZXJpYSB0ZXIgbGFuw6dhZG8gZXJybycpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgZXhwZWN0KGVycm9yKS50b0JlSW5zdGFuY2VPZihEYXRhYmFzZUVycm9yKTtcbiAgICAgICAgZXhwZWN0KChlcnJvciBhcyBEYXRhYmFzZUVycm9yKS5tZXNzYWdlKS50b0NvbnRhaW4oJ0ZhbGhhIGFvIGJ1c2NhcicpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgbG9nYXIgZXJyb3MgZGUgYmFuY28nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IGxvZyB9ID0gcmVxdWlyZSgnQHNoYXJlZC91dGlscy9sb2dnZXInKTtcbiAgICAgIGNvbnN0IGRiRXJyb3IgPSBuZXcgRXJyb3IoJ0Vycm8gU1FMJyk7XG4gICAgICBcbiAgICAgIChJdGVtSW5mb3JtYWNvZXNHZXJhaXNSZXBvc2l0b3J5LmdldEl0ZW1NYXN0ZXIgYXMgamVzdC5Nb2NrKS5tb2NrUmVqZWN0ZWRWYWx1ZShkYkVycm9yKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgSW5mb3JtYWNvZXNHZXJhaXNTZXJ2aWNlLmdldEluZm9ybWFjb2VzR2VyYWlzKCc3NTMwMTEwJyk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBFc3BlcmFkb1xuICAgICAgfVxuXG4gICAgICBleHBlY3QobG9nLmVycm9yKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ0Vycm8gYW8gYnVzY2FyIGluZm9ybWHDp8O1ZXMgZ2VyYWlzJyxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGl0ZW1Db2RpZ286ICc3NTMwMTEwJyxcbiAgICAgICAgICBlcnJvcjogJ0Vycm8gU1FMJ1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHRyYXRhciBlcnJvIG5hIGJ1c2NhIGRlIGVzdGFiZWxlY2ltZW50b3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrSXRlbSA9IGNyZWF0ZUl0ZW1NYXN0ZXJRdWVyeVJlc3VsdCgpO1xuICAgICAgY29uc3QgZXN0YWJFcnJvciA9IG5ldyBFcnJvcignRXJybyBhbyBidXNjYXIgZXN0YWJlbGVjaW1lbnRvcycpO1xuXG4gICAgICAoSXRlbUluZm9ybWFjb2VzR2VyYWlzUmVwb3NpdG9yeS5nZXRJdGVtTWFzdGVyIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0l0ZW0pO1xuICAgICAgKEl0ZW1JbmZvcm1hY29lc0dlcmFpc1JlcG9zaXRvcnkuZ2V0SXRlbUVzdGFiZWxlY2ltZW50b3MgYXMgamVzdC5Nb2NrKS5tb2NrUmVqZWN0ZWRWYWx1ZShlc3RhYkVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KFxuICAgICAgICBJbmZvcm1hY29lc0dlcmFpc1NlcnZpY2UuZ2V0SW5mb3JtYWNvZXNHZXJhaXMoJzc1MzAxMTAnKVxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coRGF0YWJhc2VFcnJvcik7XG4gICAgfSk7XG5cbiAgfSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBJTlRFR1JBw4fDg08gQ09NIFJFUE9TSVRPUllcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBkZXNjcmliZSgnSW50ZWdyYcOnw6NvIGNvbSBSZXBvc2l0b3J5JywgKCkgPT4ge1xuICAgIFxuICAgIGl0KCdkZXZlIGNoYW1hciBnZXRJdGVtTWFzdGVyIGNvbSBjw7NkaWdvIGNvcnJldG8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrSXRlbSA9IGNyZWF0ZUl0ZW1NYXN0ZXJRdWVyeVJlc3VsdCgpO1xuICAgICAgXG4gICAgICAoSXRlbUluZm9ybWFjb2VzR2VyYWlzUmVwb3NpdG9yeS5nZXRJdGVtTWFzdGVyIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0l0ZW0pO1xuICAgICAgKEl0ZW1JbmZvcm1hY29lc0dlcmFpc1JlcG9zaXRvcnkuZ2V0SXRlbUVzdGFiZWxlY2ltZW50b3MgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShbXSk7XG5cbiAgICAgIGF3YWl0IEluZm9ybWFjb2VzR2VyYWlzU2VydmljZS5nZXRJbmZvcm1hY29lc0dlcmFpcygnQUJDMTIzJyk7XG5cbiAgICAgIGV4cGVjdChJdGVtSW5mb3JtYWNvZXNHZXJhaXNSZXBvc2l0b3J5LmdldEl0ZW1NYXN0ZXIpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdBQkMxMjMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIGNoYW1hciBnZXRJdGVtRXN0YWJlbGVjaW1lbnRvcyBjb20gY8OzZGlnbyBjb3JyZXRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0l0ZW0gPSBjcmVhdGVJdGVtTWFzdGVyUXVlcnlSZXN1bHQoKTtcbiAgICAgIFxuICAgICAgKEl0ZW1JbmZvcm1hY29lc0dlcmFpc1JlcG9zaXRvcnkuZ2V0SXRlbU1hc3RlciBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tJdGVtKTtcbiAgICAgIChJdGVtSW5mb3JtYWNvZXNHZXJhaXNSZXBvc2l0b3J5LmdldEl0ZW1Fc3RhYmVsZWNpbWVudG9zIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuXG4gICAgICBhd2FpdCBJbmZvcm1hY29lc0dlcmFpc1NlcnZpY2UuZ2V0SW5mb3JtYWNvZXNHZXJhaXMoJ0FCQzEyMycpO1xuXG4gICAgICBleHBlY3QoSXRlbUluZm9ybWFjb2VzR2VyYWlzUmVwb3NpdG9yeS5nZXRJdGVtRXN0YWJlbGVjaW1lbnRvcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ0FCQzEyMycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgY2hhbWFyIFJlcG9zaXRvcnkgbmEgb3JkZW0gY29ycmV0YSAobWFzdGVyIOKGkiBlc3RhYmVsZWNpbWVudG9zKScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tJdGVtID0gY3JlYXRlSXRlbU1hc3RlclF1ZXJ5UmVzdWx0KCk7XG4gICAgICBjb25zdCBjYWxsT3JkZXI6IHN0cmluZ1tdID0gW107XG5cbiAgICAgIChJdGVtSW5mb3JtYWNvZXNHZXJhaXNSZXBvc2l0b3J5LmdldEl0ZW1NYXN0ZXIgYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKCkgPT4ge1xuICAgICAgICBjYWxsT3JkZXIucHVzaCgnbWFzdGVyJyk7XG4gICAgICAgIHJldHVybiBtb2NrSXRlbTtcbiAgICAgIH0pO1xuXG4gICAgICAoSXRlbUluZm9ybWFjb2VzR2VyYWlzUmVwb3NpdG9yeS5nZXRJdGVtRXN0YWJlbGVjaW1lbnRvcyBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAoKSA9PiB7XG4gICAgICAgIGNhbGxPcmRlci5wdXNoKCdlc3RhYmVsZWNpbWVudG9zJyk7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBJbmZvcm1hY29lc0dlcmFpc1NlcnZpY2UuZ2V0SW5mb3JtYWNvZXNHZXJhaXMoJzc1MzAxMTAnKTtcblxuICAgICAgZXhwZWN0KGNhbGxPcmRlcikudG9FcXVhbChbJ21hc3RlcicsICdlc3RhYmVsZWNpbWVudG9zJ10pO1xuICAgIH0pO1xuXG4gICAgaXQoJ27Do28gZGV2ZSBidXNjYXIgZXN0YWJlbGVjaW1lbnRvcyBzZSBpdGVtIG7Do28gZXhpc3RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKEl0ZW1JbmZvcm1hY29lc0dlcmFpc1JlcG9zaXRvcnkuZ2V0SXRlbU1hc3RlciBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBJbmZvcm1hY29lc0dlcmFpc1NlcnZpY2UuZ2V0SW5mb3JtYWNvZXNHZXJhaXMoJzc1MzAxMTAnKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIEVzcGVyYWRvXG4gICAgICB9XG5cbiAgICAgIGV4cGVjdChJdGVtSW5mb3JtYWNvZXNHZXJhaXNSZXBvc2l0b3J5LmdldEl0ZW1Fc3RhYmVsZWNpbWVudG9zKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gIH0pO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gRURHRSBDQVNFU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGRlc2NyaWJlKCdFZGdlIENhc2VzJywgKCkgPT4ge1xuICAgIFxuICAgIGl0KCdkZXZlIHRyYXRhciBpdGVtIGNvbSBkZXNjcmnDp8OjbyB2YXppYScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tJdGVtID0gY3JlYXRlSXRlbU1hc3RlclF1ZXJ5UmVzdWx0KHsgaXRlbURlc2NyaWNhbzogJycgfSk7XG4gICAgICBcbiAgICAgIChJdGVtSW5mb3JtYWNvZXNHZXJhaXNSZXBvc2l0b3J5LmdldEl0ZW1NYXN0ZXIgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrSXRlbSk7XG4gICAgICAoSXRlbUluZm9ybWFjb2VzR2VyYWlzUmVwb3NpdG9yeS5nZXRJdGVtRXN0YWJlbGVjaW1lbnRvcyBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKFtdKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgSW5mb3JtYWNvZXNHZXJhaXNTZXJ2aWNlLmdldEluZm9ybWFjb2VzR2VyYWlzKCc3NTMwMTEwJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaWRlbnRpZmljYWNhb0l0ZW1EZXNjcmljYW8pLnRvQmUoJycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgdHJhdGFyIG3Dumx0aXBsb3MgZXN0YWJlbGVjaW1lbnRvcyAoMTArKScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tJdGVtID0gY3JlYXRlSXRlbU1hc3RlclF1ZXJ5UmVzdWx0KCk7XG4gICAgICBjb25zdCBtb2NrRXN0YWJzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTUgfSwgKF8sIGkpID0+IFxuICAgICAgICBjcmVhdGVJdGVtRXN0YWJRdWVyeVJlc3VsdCh7IFxuICAgICAgICAgIGVzdGFiQ29kaWdvOiBgMCR7aSArIDF9LjAxYCxcbiAgICAgICAgICBjb2RPYnNvbGV0bzogaSAlIDIgXG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICAoSXRlbUluZm9ybWFjb2VzR2VyYWlzUmVwb3NpdG9yeS5nZXRJdGVtTWFzdGVyIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0l0ZW0pO1xuICAgICAgKEl0ZW1JbmZvcm1hY29lc0dlcmFpc1JlcG9zaXRvcnkuZ2V0SXRlbUVzdGFiZWxlY2ltZW50b3MgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRXN0YWJzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgSW5mb3JtYWNvZXNHZXJhaXNTZXJ2aWNlLmdldEluZm9ybWFjb2VzR2VyYWlzKCc3NTMwMTEwJyk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaWRlbnRpZmljYWNhb0l0ZW5zRXN0YWJlbGVjaW1lbnRvcykudG9IYXZlTGVuZ3RoKDE1KTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHRyYXRhciBub21lIGRlIGVzdGFiZWxlY2ltZW50byBudWxsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0l0ZW0gPSBjcmVhdGVJdGVtTWFzdGVyUXVlcnlSZXN1bHQoKTtcbiAgICAgIGNvbnN0IG1vY2tFc3RhYnMgPSBbXG4gICAgICAgIGNyZWF0ZUl0ZW1Fc3RhYlF1ZXJ5UmVzdWx0KHsgZXN0YWJOb21lOiBudWxsIGFzIGFueSB9KVxuICAgICAgXTtcblxuICAgICAgKEl0ZW1JbmZvcm1hY29lc0dlcmFpc1JlcG9zaXRvcnkuZ2V0SXRlbU1hc3RlciBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tJdGVtKTtcbiAgICAgIChJdGVtSW5mb3JtYWNvZXNHZXJhaXNSZXBvc2l0b3J5LmdldEl0ZW1Fc3RhYmVsZWNpbWVudG9zIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0VzdGFicyk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEluZm9ybWFjb2VzR2VyYWlzU2VydmljZS5nZXRJbmZvcm1hY29lc0dlcmFpcygnNzUzMDExMCcpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlkZW50aWZpY2FjYW9JdGVuc0VzdGFiZWxlY2ltZW50b3NbMF0uZXN0YWJOb21lKS50b0JlTnVsbCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgdHJhdGFyIHZhbG9yZXMgbmVnYXRpdm9zIGRlIGNvZE9ic29sZXRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0l0ZW0gPSBjcmVhdGVJdGVtTWFzdGVyUXVlcnlSZXN1bHQoKTtcbiAgICAgIGNvbnN0IG1vY2tFc3RhYnMgPSBbXG4gICAgICAgIGNyZWF0ZUl0ZW1Fc3RhYlF1ZXJ5UmVzdWx0KHsgY29kT2Jzb2xldG86IC0xIH0pXG4gICAgICBdO1xuXG4gICAgICAoSXRlbUluZm9ybWFjb2VzR2VyYWlzUmVwb3NpdG9yeS5nZXRJdGVtTWFzdGVyIGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUobW9ja0l0ZW0pO1xuICAgICAgKEl0ZW1JbmZvcm1hY29lc0dlcmFpc1JlcG9zaXRvcnkuZ2V0SXRlbUVzdGFiZWxlY2ltZW50b3MgYXMgamVzdC5Nb2NrKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrRXN0YWJzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgSW5mb3JtYWNvZXNHZXJhaXNTZXJ2aWNlLmdldEluZm9ybWFjb2VzR2VyYWlzKCc3NTMwMTEwJyk7XG5cbiAgICAgIC8vIC0xIG7Do28gw6kgMCwgZW50w6NvIHN0YXR1c0luZGV4ID0gMlxuICAgICAgZXhwZWN0KHJlc3VsdC5pZGVudGlmaWNhY2FvSXRlbnNFc3RhYmVsZWNpbWVudG9zWzBdLnN0YXR1c0luZGV4KS50b0JlKDIpO1xuICAgIH0pO1xuXG4gIH0pO1xuXG59KTsiXSwidmVyc2lvbiI6M30=