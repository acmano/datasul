# .env.production.example
# Arquivo de exemplo para configuração de produção
# Copie para .env e preencha com os valores reais
# NUNCA commite o arquivo .env com valores reais!

# ============================================
# SERVIDOR
# ============================================
NODE_ENV=production
PORT=3001
HOST=0.0.0.0

# APP_HOST e APP_PORT são usados pelo app.config.ts
APP_HOST=0.0.0.0
APP_PORT=3001
API_PREFIX=/api

# URL da aplicação (usado para CORS e documentação)
APP_URL=http://lor0138.lorenzetti.ibe:3001

# ============================================
# BANCO DE DADOS
# ============================================
DB_CONNECTION_TYPE=sqlserver

# SQL Server
DB_SERVER=10.105.0.4\LOREN
DB_PORT=1433
DB_USER=dcloren
DB_PASSWORD=''  # ← Preencher com senha real
DB_DATABASE_EMP=
DB_DATABASE_MULT=

# Configurações de conexão
DB_ENCRYPT=false
DB_TRUST_SERVER_CERTIFICATE=true

# ============================================
# TIMEOUTS (em milissegundos)
# ============================================
# IMPORTANTE: Use valores em ms puros, NÃO use sufixo 's'
# Correto: 30000
# Errado: 30s

DB_CONNECTION_TIMEOUT=500000
DB_REQUEST_TIMEOUT=30000

HTTP_REQUEST_TIMEOUT=30000
HTTP_HEAVY_TIMEOUT=60000
HTTP_HEALTH_TIMEOUT=5000

# ============================================
# RETRY LOGIC
# ============================================
DB_RETRY_MAX_ATTEMPTS=3
DB_RETRY_INITIAL_DELAY=1000
DB_RETRY_MAX_DELAY=10000
DB_RETRY_BACKOFF_FACTOR=2

# ============================================
# CACHE
# ============================================
CACHE_ENABLED=true
CACHE_STRATEGY=layered

# Redis (recomendado para produção)
CACHE_REDIS_URL=redis://localhost:6379

# TTL padrão do cache (5 minutos)
CACHE_DEFAULT_TTL=300000

# ============================================
# CORS
# ============================================
# Lista de origens permitidas (separadas por vírgula)
CORS_ALLOWED_ORIGINS=http://lor0138.lorenzetti.ibe:3001,http://localhost:3001

# ============================================
# LOGS
# ============================================
LOG_LEVEL=info
LOG_FILE=/var/log/lor0138/app.log

# ============================================
# GRACEFUL SHUTDOWN
# ============================================
SHUTDOWN_TIMEOUT=10000

# ============================================
# MOCK DATA (NUNCA true em produção!)
# ============================================
USE_MOCK_DATA=false

# ============================================
# ODBC (se usar DB_CONNECTION_TYPE=odbc)
# ============================================
# ODBC_DSN_EMP=datasul_emp
# ODBC_DSN_MULT=datasul_mult
# ODBC_CONNECTION_TIMEOUT=15000

# ============================================
# OBSERVAÇÕES IMPORTANTES
# ============================================
#
# 1. Timeouts devem ser em milissegundos puros (30000, não '30s')
# 2. DB_DATABASE_EMP e DB_DATABASE_MULT vazios = usa default do SQL user
# 3. Senha com # precisa aspas simples: DB_PASSWORD='#senha#'
# 4. APP_HOST e APP_PORT são necessárias (app.config.ts as lê)
# 5. USE_MOCK_DATA SEMPRE false em produção
# 6. CACHE_STRATEGY recomendado: 'layered' (usa memory + Redis)
#
# Para mais detalhes, consulte ARCHITECTURE.md
