{"file":"/home/mano/projetos/datasul/lor0138/src/api/lor0138/item/dadosCadastrais/informacoesGerais/controller/informacoesGerais.controller.ts","mappings":";AAAA,oGAAoG;;;;AAGpG,oFAAgF;AAChF,8DAAiF;AACjF,yFAA2E;AAE3E,MAAa,2BAA2B;;AAAxC,kEAqCC;;AAnCC;;GAEG;AACI,gDAAoB,GAAG,IAAA,sCAAY,EACxC,KAAK,EAAE,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAE,EAAE;IACxD,MAAM,EAAE,UAAU,EAAE,GAAG,GAAG,CAAC,MAAM,CAAC;IAElC,YAAY;IACZ,IAAI,CAAC,UAAU,IAAI,UAAU,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,CAAC;QAC5C,MAAM,IAAI,8BAAe,CAAC,8BAA8B,EAAE;YACxD,UAAU,EAAE,wBAAwB;SACrC,CAAC,CAAC;IACL,CAAC;IAED,IAAI,UAAU,CAAC,MAAM,GAAG,EAAE,EAAE,CAAC;QAC3B,MAAM,IAAI,8BAAe,CAAC,yBAAyB,EAAE;YACnD,UAAU,EAAE,yBAAyB;SACtC,CAAC,CAAC;IACL,CAAC;IAED,eAAe;IACf,MAAM,MAAM,GAAG,MAAM,oDAAwB,CAAC,oBAAoB,CAAC,UAAU,CAAC,CAAC;IAE/E,2CAA2C;IAC3C,IAAI,CAAC,MAAM,EAAE,CAAC;QACZ,MAAM,IAAI,gCAAiB,CAAC,UAAU,CAAC,CAAC;IAC1C,CAAC;IAED,UAAU;IACV,GAAG,CAAC,IAAI,CAAC;QACP,OAAO,EAAE,IAAI;QACb,IAAI,EAAE,MAAM;KACb,CAAC,CAAC;AACL,CAAC,CACF,AA/B0B,CA+BzB;AAGJ,wDAAwD;AACxD,MAAa,8BAA8B;IAEzC,MAAM,CAAC,KAAK,CAAC,oBAAoB,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB;QAC/E,IAAI,CAAC;YACH,MAAM,EAAE,UAAU,EAAE,GAAG,GAAG,CAAC,MAAM,CAAC;YAElC,IAAI,CAAC,UAAU,IAAI,UAAU,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,CAAC;gBAC5C,MAAM,IAAI,8BAAe,CAAC,8BAA8B,CAAC,CAAC;YAC5D,CAAC;YAED,MAAM,MAAM,GAAG,MAAM,oDAAwB,CAAC,oBAAoB,CAAC,UAAU,CAAC,CAAC;YAE/E,IAAI,CAAC,MAAM,EAAE,CAAC;gBACZ,MAAM,IAAI,gCAAiB,CAAC,UAAU,CAAC,CAAC;YAC1C,CAAC;YAED,GAAG,CAAC,IAAI,CAAC;gBACP,OAAO,EAAE,IAAI;gBACb,IAAI,EAAE,MAAM;aACb,CAAC,CAAC;QACL,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,4CAA4C;QAC3D,CAAC;IACH,CAAC;CACF;AAxBD,wEAwBC","names":[],"sources":["/home/mano/projetos/datasul/lor0138/src/api/lor0138/item/dadosCadastrais/informacoesGerais/controller/informacoesGerais.controller.ts"],"sourcesContent":["// src/api/lor0138/item/dadosCadastrais/informacoesGerais/controller/informacoesGerais.controller.ts\r\n\r\nimport { Request, Response, NextFunction } from 'express';\r\nimport { InformacoesGeraisService } from '../service/informacoesGerais.service';\r\nimport { ItemNotFoundError, ValidationError } from '@shared/errors/CustomErrors';\r\nimport { asyncHandler } from '@shared/middlewares/errorHandler.middleware';\r\n\r\nexport class InformacoesGeraisController {\r\n  \r\n  /**\r\n   * GET /api/lor0138/item/dadosCadastrais/informacoesGerais/:itemCodigo\r\n   */\r\n  static getInformacoesGerais = asyncHandler(\r\n    async (req: Request, res: Response, next: NextFunction) => {\r\n      const { itemCodigo } = req.params;\r\n\r\n      // Validação\r\n      if (!itemCodigo || itemCodigo.trim() === '') {\r\n        throw new ValidationError('Código do item é obrigatório', {\r\n          itemCodigo: 'Campo vazio ou ausente'\r\n        });\r\n      }\r\n\r\n      if (itemCodigo.length > 16) {\r\n        throw new ValidationError('Código do item inválido', {\r\n          itemCodigo: 'Máximo de 16 caracteres'\r\n        });\r\n      }\r\n\r\n      // Buscar dados\r\n      const result = await InformacoesGeraisService.getInformacoesGerais(itemCodigo);\r\n\r\n      // Se não encontrou, lançar erro específico\r\n      if (!result) {\r\n        throw new ItemNotFoundError(itemCodigo);\r\n      }\r\n\r\n      // Sucesso\r\n      res.json({\r\n        success: true,\r\n        data: result,\r\n      });\r\n    }\r\n  );\r\n}\r\n\r\n// Exemplo de controller SEM asyncHandler (forma antiga)\r\nexport class InformacoesGeraisControllerOld {\r\n  \r\n  static async getInformacoesGerais(req: Request, res: Response, next: NextFunction) {\r\n    try {\r\n      const { itemCodigo } = req.params;\r\n\r\n      if (!itemCodigo || itemCodigo.trim() === '') {\r\n        throw new ValidationError('Código do item é obrigatório');\r\n      }\r\n\r\n      const result = await InformacoesGeraisService.getInformacoesGerais(itemCodigo);\r\n\r\n      if (!result) {\r\n        throw new ItemNotFoundError(itemCodigo);\r\n      }\r\n\r\n      res.json({\r\n        success: true,\r\n        data: result,\r\n      });\r\n    } catch (error) {\r\n      next(error); // Importante: passar erro para o middleware\r\n    }\r\n  }\r\n}"],"version":3}