{"file":"/home/mano/projetos/datasul/lor0138/.stryker-tmp/sandbox-EFF2bR/src/shared/utils/cache/QueryCacheService.ts","mappings":"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","names":[],"sources":["/home/mano/projetos/datasul/lor0138/.stryker-tmp/sandbox-EFF2bR/src/shared/utils/cache/QueryCacheService.ts"],"sourcesContent":["// @ts-nocheck\n// src/shared/utils/cache/QueryCacheService.ts\nfunction stryNS_9fa48() {\n  var g = typeof globalThis === 'object' && globalThis && globalThis.Math === Math && globalThis || new Function(\"return this\")();\n  var ns = g.__stryker__ || (g.__stryker__ = {});\n  if (ns.activeMutant === undefined && g.process && g.process.env && g.process.env.__STRYKER_ACTIVE_MUTANT__) {\n    ns.activeMutant = g.process.env.__STRYKER_ACTIVE_MUTANT__;\n  }\n  function retrieveNS() {\n    return ns;\n  }\n  stryNS_9fa48 = retrieveNS;\n  return retrieveNS();\n}\nstryNS_9fa48();\nfunction stryCov_9fa48() {\n  var ns = stryNS_9fa48();\n  var cov = ns.mutantCoverage || (ns.mutantCoverage = {\n    static: {},\n    perTest: {}\n  });\n  function cover() {\n    var c = cov.static;\n    if (ns.currentTestId) {\n      c = cov.perTest[ns.currentTestId] = cov.perTest[ns.currentTestId] || {};\n    }\n    var a = arguments;\n    for (var i = 0; i < a.length; i++) {\n      c[a[i]] = (c[a[i]] || 0) + 1;\n    }\n  }\n  stryCov_9fa48 = cover;\n  cover.apply(null, arguments);\n}\nfunction stryMutAct_9fa48(id) {\n  var ns = stryNS_9fa48();\n  function isActive(id) {\n    if (ns.activeMutant === id) {\n      if (ns.hitCount !== void 0 && ++ns.hitCount > ns.hitLimit) {\n        throw new Error('Stryker: Hit count limit reached (' + ns.hitCount + ')');\n      }\n      return true;\n    }\n    return false;\n  }\n  stryMutAct_9fa48 = isActive;\n  return isActive(id);\n}\nimport crypto from 'crypto';\nimport { CacheManager } from '../cacheManager';\nimport { log } from '../logger';\nexport interface QueryCacheOptions {\n  ttl?: number; // TTL específico em segundos\n  prefix?: string; // Prefixo da chave de cache\n  skipCache?: boolean; // Pular cache para esta query\n  invalidatePattern?: string; // Pattern para invalidar\n}\n\n/**\n * Serviço de cache para queries de banco de dados\n * Gera keys automáticas baseadas em hash(SQL + params)\n */\nexport class QueryCacheService {\n  private static readonly DEFAULT_TTL = 300; // 5 minutos\n  private static readonly DEFAULT_PREFIX = stryMutAct_9fa48(\"3600\") ? \"\" : (stryCov_9fa48(\"3600\"), 'query');\n\n  /**\n   * Executa query com cache\n   * \n   * @example\n   * ```typescript\n   * const result = await QueryCacheService.withCache(\n   *   'SELECT * FROM item WHERE codigo = @p1',\n   *   [{ name: 'p1', value: '7530110' }],\n   *   async () => DatabaseManager.queryEmpWithParams(sql, params),\n   *   { ttl: 600, prefix: 'item' }\n   * );\n   * ```\n   */\n  static async withCache<T>(sql: string, params: any[] = stryMutAct_9fa48(\"3601\") ? [\"Stryker was here\"] : (stryCov_9fa48(\"3601\"), []), queryFn: () => Promise<T>, options: QueryCacheOptions = {}): Promise<T> {\n    if (stryMutAct_9fa48(\"3602\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"3602\");\n      const {\n        ttl = this.DEFAULT_TTL,\n        prefix = this.DEFAULT_PREFIX,\n        skipCache = stryMutAct_9fa48(\"3603\") ? true : (stryCov_9fa48(\"3603\"), false)\n      } = options;\n\n      // Se skip explícito, executa direto\n      if (stryMutAct_9fa48(\"3605\") ? false : stryMutAct_9fa48(\"3604\") ? true : (stryCov_9fa48(\"3604\", \"3605\"), skipCache)) {\n        if (stryMutAct_9fa48(\"3606\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"3606\");\n          log.debug(stryMutAct_9fa48(\"3607\") ? \"\" : (stryCov_9fa48(\"3607\"), 'Query cache: SKIP'), stryMutAct_9fa48(\"3608\") ? {} : (stryCov_9fa48(\"3608\"), {\n            prefix\n          }));\n          return queryFn();\n        }\n      }\n\n      // Gerar chave de cache\n      const cacheKey = this.generateCacheKey(sql, params, prefix);\n\n      // Tentar buscar do cache\n      const cached = await CacheManager.get<T>(cacheKey);\n      if (stryMutAct_9fa48(\"3611\") ? cached === undefined : stryMutAct_9fa48(\"3610\") ? false : stryMutAct_9fa48(\"3609\") ? true : (stryCov_9fa48(\"3609\", \"3610\", \"3611\"), cached !== undefined)) {\n        if (stryMutAct_9fa48(\"3612\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"3612\");\n          log.debug(stryMutAct_9fa48(\"3613\") ? \"\" : (stryCov_9fa48(\"3613\"), 'Query cache: HIT'), stryMutAct_9fa48(\"3614\") ? {} : (stryCov_9fa48(\"3614\"), {\n            key: cacheKey,\n            prefix\n          }));\n          return cached;\n        }\n      }\n\n      // MISS: executar query\n      log.debug(stryMutAct_9fa48(\"3615\") ? \"\" : (stryCov_9fa48(\"3615\"), 'Query cache: MISS'), stryMutAct_9fa48(\"3616\") ? {} : (stryCov_9fa48(\"3616\"), {\n        key: cacheKey,\n        prefix\n      }));\n      const result = await queryFn();\n\n      // Armazenar no cache\n      await CacheManager.set(cacheKey, result, ttl);\n      return result;\n    }\n  }\n\n  /**\n   * Gera chave de cache determinística\n   * Hash MD5 de: prefix:sql:params_json\n   * \n   * ✅ CORRIGIDO: Serializa params corretamente (array ou objeto)\n   */\n  private static generateCacheKey(sql: string, params: any[], prefix: string): string {\n    if (stryMutAct_9fa48(\"3617\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"3617\");\n      // Normalizar SQL (remover espaços extras)\n      const normalizedSql = stryMutAct_9fa48(\"3618\") ? sql.replace(/\\s+/g, ' ') : (stryCov_9fa48(\"3618\"), sql.replace(stryMutAct_9fa48(\"3620\") ? /\\S+/g : stryMutAct_9fa48(\"3619\") ? /\\s/g : (stryCov_9fa48(\"3619\", \"3620\"), /\\s+/g), stryMutAct_9fa48(\"3621\") ? \"\" : (stryCov_9fa48(\"3621\"), ' ')).trim());\n\n      // ✅ CORREÇÃO: Serializar params de forma determinística\n      // Se for array, mapeia para extrair valores relevantes\n      let paramsStr: string;\n      if (stryMutAct_9fa48(\"3623\") ? false : stryMutAct_9fa48(\"3622\") ? true : (stryCov_9fa48(\"3622\", \"3623\"), Array.isArray(params))) {\n        if (stryMutAct_9fa48(\"3624\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"3624\");\n          // Para array de QueryParameter: [{name, type, value}, ...]\n          const sortedParams = stryMutAct_9fa48(\"3625\") ? params.map(p => {\n            if (typeof p === 'object' && p !== null) {\n              // Extrai apenas name e value, ordena as chaves\n              return {\n                name: p.name,\n                value: p.value\n              };\n            }\n            return p;\n          }) : (stryCov_9fa48(\"3625\"), params.map(p => {\n            if (stryMutAct_9fa48(\"3626\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"3626\");\n              if (stryMutAct_9fa48(\"3629\") ? typeof p === 'object' || p !== null : stryMutAct_9fa48(\"3628\") ? false : stryMutAct_9fa48(\"3627\") ? true : (stryCov_9fa48(\"3627\", \"3628\", \"3629\"), (stryMutAct_9fa48(\"3631\") ? typeof p !== 'object' : stryMutAct_9fa48(\"3630\") ? true : (stryCov_9fa48(\"3630\", \"3631\"), typeof p === (stryMutAct_9fa48(\"3632\") ? \"\" : (stryCov_9fa48(\"3632\"), 'object')))) && (stryMutAct_9fa48(\"3634\") ? p === null : stryMutAct_9fa48(\"3633\") ? true : (stryCov_9fa48(\"3633\", \"3634\"), p !== null)))) {\n                if (stryMutAct_9fa48(\"3635\")) {\n                  {}\n                } else {\n                  stryCov_9fa48(\"3635\");\n                  // Extrai apenas name e value, ordena as chaves\n                  return stryMutAct_9fa48(\"3636\") ? {} : (stryCov_9fa48(\"3636\"), {\n                    name: p.name,\n                    value: p.value\n                  });\n                }\n              }\n              return p;\n            }\n          }).sort((a, b) => {\n            if (stryMutAct_9fa48(\"3637\")) {\n              {}\n            } else {\n              stryCov_9fa48(\"3637\");\n              // Ordena por name se existir\n              const nameA = stryMutAct_9fa48(\"3640\") ? a?.name && '' : stryMutAct_9fa48(\"3639\") ? false : stryMutAct_9fa48(\"3638\") ? true : (stryCov_9fa48(\"3638\", \"3639\", \"3640\"), (stryMutAct_9fa48(\"3641\") ? a.name : (stryCov_9fa48(\"3641\"), a?.name)) || (stryMutAct_9fa48(\"3642\") ? \"Stryker was here!\" : (stryCov_9fa48(\"3642\"), '')));\n              const nameB = stryMutAct_9fa48(\"3645\") ? b?.name && '' : stryMutAct_9fa48(\"3644\") ? false : stryMutAct_9fa48(\"3643\") ? true : (stryCov_9fa48(\"3643\", \"3644\", \"3645\"), (stryMutAct_9fa48(\"3646\") ? b.name : (stryCov_9fa48(\"3646\"), b?.name)) || (stryMutAct_9fa48(\"3647\") ? \"Stryker was here!\" : (stryCov_9fa48(\"3647\"), '')));\n              return nameA.localeCompare(nameB);\n            }\n          }));\n          paramsStr = JSON.stringify(sortedParams);\n        }\n      } else {\n        if (stryMutAct_9fa48(\"3648\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"3648\");\n          // Para objeto simples\n          paramsStr = JSON.stringify(params, stryMutAct_9fa48(\"3649\") ? Object.keys(params) : (stryCov_9fa48(\"3649\"), Object.keys(params).sort()));\n        }\n      }\n\n      // Gerar hash\n      const hash = stryMutAct_9fa48(\"3650\") ? crypto.createHash('md5').update(`${normalizedSql}:${paramsStr}`).digest('hex') : (stryCov_9fa48(\"3650\"), crypto.createHash(stryMutAct_9fa48(\"3651\") ? \"\" : (stryCov_9fa48(\"3651\"), 'md5')).update(stryMutAct_9fa48(\"3652\") ? `` : (stryCov_9fa48(\"3652\"), `${normalizedSql}:${paramsStr}`)).digest(stryMutAct_9fa48(\"3653\") ? \"\" : (stryCov_9fa48(\"3653\"), 'hex')).substring(0, 16)); // 16 chars é suficiente\n\n      return stryMutAct_9fa48(\"3654\") ? `` : (stryCov_9fa48(\"3654\"), `${prefix}:${hash}`);\n    }\n  }\n\n  /**\n   * Invalida cache por pattern\n   * \n   * @example\n   * ```typescript\n   * // Invalidar todos os caches de item\n   * await QueryCacheService.invalidate('item:*');\n   * \n   * // Invalidar cache específico\n   * await QueryCacheService.invalidate('item:abc123def456');\n   * ```\n   */\n  static async invalidate(pattern: string): Promise<number> {\n    if (stryMutAct_9fa48(\"3655\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"3655\");\n      log.info(stryMutAct_9fa48(\"3656\") ? \"\" : (stryCov_9fa48(\"3656\"), 'Query cache: INVALIDATE'), stryMutAct_9fa48(\"3657\") ? {} : (stryCov_9fa48(\"3657\"), {\n        pattern\n      }));\n      return CacheManager.delete(pattern);\n    }\n  }\n\n  /**\n   * Invalida múltiplos patterns\n   */\n  static async invalidateMultiple(patterns: string[]): Promise<number> {\n    if (stryMutAct_9fa48(\"3658\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"3658\");\n      let total = 0;\n      for (const pattern of patterns) {\n        if (stryMutAct_9fa48(\"3659\")) {\n          {}\n        } else {\n          stryCov_9fa48(\"3659\");\n          stryMutAct_9fa48(\"3660\") ? total -= await this.invalidate(pattern) : (stryCov_9fa48(\"3660\"), total += await this.invalidate(pattern));\n        }\n      }\n      return total;\n    }\n  }\n\n  /**\n   * Wrapper para queries de itens\n   */\n  static async withItemCache<T>(sql: string, params: any[], queryFn: () => Promise<T>, ttl?: number): Promise<T> {\n    if (stryMutAct_9fa48(\"3661\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"3661\");\n      return this.withCache(sql, params, queryFn, stryMutAct_9fa48(\"3662\") ? {} : (stryCov_9fa48(\"3662\"), {\n        ttl: stryMutAct_9fa48(\"3665\") ? ttl && 600 : stryMutAct_9fa48(\"3664\") ? false : stryMutAct_9fa48(\"3663\") ? true : (stryCov_9fa48(\"3663\", \"3664\", \"3665\"), ttl || 600),\n        // 10 minutos para itens\n        prefix: stryMutAct_9fa48(\"3666\") ? \"\" : (stryCov_9fa48(\"3666\"), 'item')\n      }));\n    }\n  }\n\n  /**\n   * Wrapper para queries de estabelecimentos\n   */\n  static async withEstabelecimentoCache<T>(sql: string, params: any[], queryFn: () => Promise<T>, ttl?: number): Promise<T> {\n    if (stryMutAct_9fa48(\"3667\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"3667\");\n      return this.withCache(sql, params, queryFn, stryMutAct_9fa48(\"3668\") ? {} : (stryCov_9fa48(\"3668\"), {\n        ttl: stryMutAct_9fa48(\"3671\") ? ttl && 900 : stryMutAct_9fa48(\"3670\") ? false : stryMutAct_9fa48(\"3669\") ? true : (stryCov_9fa48(\"3669\", \"3670\", \"3671\"), ttl || 900),\n        // 15 minutos para estabelecimentos\n        prefix: stryMutAct_9fa48(\"3672\") ? \"\" : (stryCov_9fa48(\"3672\"), 'estabelecimento')\n      }));\n    }\n  }\n\n  /**\n   * Wrapper para queries de health check (TTL curto)\n   */\n  static async withHealthCache<T>(sql: string, params: any[], queryFn: () => Promise<T>): Promise<T> {\n    if (stryMutAct_9fa48(\"3673\")) {\n      {}\n    } else {\n      stryCov_9fa48(\"3673\");\n      return this.withCache(sql, params, queryFn, stryMutAct_9fa48(\"3674\") ? {} : (stryCov_9fa48(\"3674\"), {\n        ttl: 30,\n        // 30 segundos\n        prefix: stryMutAct_9fa48(\"3675\") ? \"\" : (stryCov_9fa48(\"3675\"), 'health')\n      }));\n    }\n  }\n}"],"version":3}