72d3da33f3c3c77aebb5cafe3614caf6
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.retryWithBackoff = retryWithBackoff;
exports.isRetryableError = isRetryableError;
exports.retryOnRetryableError = retryOnRetryableError;
// @ts-nocheck
// src/shared/utils/retry.ts
function stryNS_9fa48() {
    var g = typeof globalThis === 'object' && globalThis && globalThis.Math === Math && globalThis || new Function("return this")();
    var ns = g.__stryker__ || (g.__stryker__ = {});
    if (ns.activeMutant === undefined && g.process && g.process.env && g.process.env.__STRYKER_ACTIVE_MUTANT__) {
        ns.activeMutant = g.process.env.__STRYKER_ACTIVE_MUTANT__;
    }
    function retrieveNS() {
        return ns;
    }
    stryNS_9fa48 = retrieveNS;
    return retrieveNS();
}
stryNS_9fa48();
function stryCov_9fa48() {
    var ns = stryNS_9fa48();
    var cov = ns.mutantCoverage || (ns.mutantCoverage = {
        static: {},
        perTest: {}
    });
    function cover() {
        var c = cov.static;
        if (ns.currentTestId) {
            c = cov.perTest[ns.currentTestId] = cov.perTest[ns.currentTestId] || {};
        }
        var a = arguments;
        for (var i = 0; i < a.length; i++) {
            c[a[i]] = (c[a[i]] || 0) + 1;
        }
    }
    stryCov_9fa48 = cover;
    cover.apply(null, arguments);
}
function stryMutAct_9fa48(id) {
    var ns = stryNS_9fa48();
    function isActive(id) {
        if (ns.activeMutant === id) {
            if (ns.hitCount !== void 0 && ++ns.hitCount > ns.hitLimit) {
                throw new Error('Stryker: Hit count limit reached (' + ns.hitCount + ')');
            }
            return true;
        }
        return false;
    }
    stryMutAct_9fa48 = isActive;
    return isActive(id);
}
const logger_1 = require("./logger");
const DEFAULT_OPTIONS = stryMutAct_9fa48("4192") ? {} : (stryCov_9fa48("4192"), {
    maxAttempts: 3,
    initialDelay: 1000,
    maxDelay: 10000,
    backoffFactor: 2,
    jitter: stryMutAct_9fa48("4193") ? false : (stryCov_9fa48("4193"), true)
});
/**
 * Executa uma função com retry e exponential backoff
 *
 * @param fn Função async a ser executada
 * @param options Opções de retry
 * @param context Contexto para logs (ex: "SQL Server EMP")
 * @returns Resultado da função ou lança erro após todas as tentativas
 *
 * @example
 * ```typescript
 * const result = await retryWithBackoff(
 *   () => pool.connect(),
 *   { maxAttempts: 5, initialDelay: 1000 },
 *   'SQL Server Connection'
 * );
 * ```
 */
async function retryWithBackoff(fn, options = {}, context = stryMutAct_9fa48("4194") ? "" : (stryCov_9fa48("4194"), 'Operation')) {
    if (stryMutAct_9fa48("4195")) {
        { }
    }
    else {
        stryCov_9fa48("4195");
        const opts = stryMutAct_9fa48("4196") ? {} : (stryCov_9fa48("4196"), {
            ...DEFAULT_OPTIONS,
            ...options
        });
        let lastError = null;
        let delay = opts.initialDelay;
        for (let attempt = 1; stryMutAct_9fa48("4199") ? attempt > opts.maxAttempts : stryMutAct_9fa48("4198") ? attempt < opts.maxAttempts : stryMutAct_9fa48("4197") ? false : (stryCov_9fa48("4197", "4198", "4199"), attempt <= opts.maxAttempts); stryMutAct_9fa48("4200") ? attempt-- : (stryCov_9fa48("4200"), attempt++)) {
            if (stryMutAct_9fa48("4201")) {
                { }
            }
            else {
                stryCov_9fa48("4201");
                try {
                    if (stryMutAct_9fa48("4202")) {
                        { }
                    }
                    else {
                        stryCov_9fa48("4202");
                        logger_1.log.debug(stryMutAct_9fa48("4203") ? `` : (stryCov_9fa48("4203"), `${context}: Tentativa ${attempt}/${opts.maxAttempts}`), stryMutAct_9fa48("4204") ? {} : (stryCov_9fa48("4204"), {
                            attempt,
                            maxAttempts: opts.maxAttempts
                        }));
                        const result = await fn();
                        if (stryMutAct_9fa48("4208") ? attempt <= 1 : stryMutAct_9fa48("4207") ? attempt >= 1 : stryMutAct_9fa48("4206") ? false : stryMutAct_9fa48("4205") ? true : (stryCov_9fa48("4205", "4206", "4207", "4208"), attempt > 1)) {
                            if (stryMutAct_9fa48("4209")) {
                                { }
                            }
                            else {
                                stryCov_9fa48("4209");
                                logger_1.log.info(stryMutAct_9fa48("4210") ? `` : (stryCov_9fa48("4210"), `${context}: Sucesso na tentativa ${attempt}`), stryMutAct_9fa48("4211") ? {} : (stryCov_9fa48("4211"), {
                                    attempt
                                }));
                            }
                        }
                        return result;
                    }
                }
                catch (error) {
                    if (stryMutAct_9fa48("4212")) {
                        { }
                    }
                    else {
                        stryCov_9fa48("4212");
                        lastError = error;
                        if (stryMutAct_9fa48("4215") ? attempt !== opts.maxAttempts : stryMutAct_9fa48("4214") ? false : stryMutAct_9fa48("4213") ? true : (stryCov_9fa48("4213", "4214", "4215"), attempt === opts.maxAttempts)) {
                            if (stryMutAct_9fa48("4216")) {
                                { }
                            }
                            else {
                                stryCov_9fa48("4216");
                                logger_1.log.error(stryMutAct_9fa48("4217") ? `` : (stryCov_9fa48("4217"), `${context}: Falhou após ${opts.maxAttempts} tentativas`), stryMutAct_9fa48("4218") ? {} : (stryCov_9fa48("4218"), {
                                    error: lastError.message,
                                    attempts: opts.maxAttempts
                                }));
                                throw lastError;
                            }
                        }
                        // Calcular próximo delay com exponential backoff
                        const nextDelay = calculateDelay(delay, opts);
                        logger_1.log.warn(stryMutAct_9fa48("4219") ? `` : (stryCov_9fa48("4219"), `${context}: Tentativa ${attempt} falhou, retry em ${nextDelay}ms`), stryMutAct_9fa48("4220") ? {} : (stryCov_9fa48("4220"), {
                            attempt,
                            error: lastError.message,
                            nextDelay,
                            nextAttempt: stryMutAct_9fa48("4221") ? attempt - 1 : (stryCov_9fa48("4221"), attempt + 1)
                        }));
                        // Callback opcional
                        if (stryMutAct_9fa48("4223") ? false : stryMutAct_9fa48("4222") ? true : (stryCov_9fa48("4222", "4223"), opts.onRetry)) {
                            if (stryMutAct_9fa48("4224")) {
                                { }
                            }
                            else {
                                stryCov_9fa48("4224");
                                opts.onRetry(lastError, attempt, nextDelay);
                            }
                        }
                        // Aguardar antes do próximo retry
                        await sleep(nextDelay);
                        // Atualizar delay para próxima iteração
                        delay = stryMutAct_9fa48("4225") ? Math.max(delay * opts.backoffFactor, opts.maxDelay) : (stryCov_9fa48("4225"), Math.min(stryMutAct_9fa48("4226") ? delay / opts.backoffFactor : (stryCov_9fa48("4226"), delay * opts.backoffFactor), opts.maxDelay));
                    }
                }
            }
        }
        // Nunca deve chegar aqui, mas TypeScript precisa
        throw stryMutAct_9fa48("4229") ? lastError && new Error(`${context}: Retry failed`) : stryMutAct_9fa48("4228") ? false : stryMutAct_9fa48("4227") ? true : (stryCov_9fa48("4227", "4228", "4229"), lastError || new Error(stryMutAct_9fa48("4230") ? `` : (stryCov_9fa48("4230"), `${context}: Retry failed`)));
    }
}
/**
 * Calcula delay com exponential backoff e jitter opcional
 */
function calculateDelay(currentDelay, options) {
    if (stryMutAct_9fa48("4231")) {
        { }
    }
    else {
        stryCov_9fa48("4231");
        let nextDelay = currentDelay;
        // Adicionar jitter (aleatoriedade) se habilitado
        if (stryMutAct_9fa48("4233") ? false : stryMutAct_9fa48("4232") ? true : (stryCov_9fa48("4232", "4233"), options.jitter)) {
            if (stryMutAct_9fa48("4234")) {
                { }
            }
            else {
                stryCov_9fa48("4234");
                // Jitter entre 50% e 150% do delay
                const jitterFactor = stryMutAct_9fa48("4235") ? 0.5 - Math.random() : (stryCov_9fa48("4235"), 0.5 + Math.random());
                nextDelay = Math.floor(stryMutAct_9fa48("4236") ? currentDelay / jitterFactor : (stryCov_9fa48("4236"), currentDelay * jitterFactor));
            }
        }
        // Garantir que não excede maxDelay
        return stryMutAct_9fa48("4237") ? Math.max(nextDelay, options.maxDelay) : (stryCov_9fa48("4237"), Math.min(nextDelay, options.maxDelay));
    }
}
/**
 * Helper para aguardar um tempo
 */
function sleep(ms) {
    if (stryMutAct_9fa48("4238")) {
        { }
    }
    else {
        stryCov_9fa48("4238");
        return new Promise(stryMutAct_9fa48("4239") ? () => undefined : (stryCov_9fa48("4239"), resolve => setTimeout(resolve, ms)));
    }
}
/**
 * Verifica se um erro é retryable (temporário)
 */
function isRetryableError(error) {
    if (stryMutAct_9fa48("4240")) {
        { }
    }
    else {
        stryCov_9fa48("4240");
        const retryablePatterns = stryMutAct_9fa48("4241") ? [] : (stryCov_9fa48("4241"), [/ECONNREFUSED/i, /ETIMEDOUT/i, /ENOTFOUND/i, /EHOSTUNREACH/i, /ENETUNREACH/i, /timeout/i, stryMutAct_9fa48("4242") ? /connection.closed/i : (stryCov_9fa48("4242"), /connection.*closed/i), stryMutAct_9fa48("4243") ? /connection.reset/i : (stryCov_9fa48("4243"), /connection.*reset/i), /socket hang up/i]);
        const errorMessage = stryMutAct_9fa48("4246") ? error.message && '' : stryMutAct_9fa48("4245") ? false : stryMutAct_9fa48("4244") ? true : (stryCov_9fa48("4244", "4245", "4246"), error.message || (stryMutAct_9fa48("4247") ? "Stryker was here!" : (stryCov_9fa48("4247"), '')));
        return stryMutAct_9fa48("4248") ? retryablePatterns.every(pattern => pattern.test(errorMessage)) : (stryCov_9fa48("4248"), retryablePatterns.some(stryMutAct_9fa48("4249") ? () => undefined : (stryCov_9fa48("4249"), pattern => pattern.test(errorMessage))));
    }
}
/**
 * Retry apenas para erros retryable
 */
async function retryOnRetryableError(fn, options = {}, context = stryMutAct_9fa48("4250") ? "" : (stryCov_9fa48("4250"), 'Operation')) {
    if (stryMutAct_9fa48("4251")) {
        { }
    }
    else {
        stryCov_9fa48("4251");
        return retryWithBackoff(fn, stryMutAct_9fa48("4252") ? {} : (stryCov_9fa48("4252"), {
            ...options,
            onRetry: (error, attempt, delay) => {
                if (stryMutAct_9fa48("4253")) {
                    { }
                }
                else {
                    stryCov_9fa48("4253");
                    // Só retry se for erro retryable
                    if (stryMutAct_9fa48("4256") ? false : stryMutAct_9fa48("4255") ? true : stryMutAct_9fa48("4254") ? isRetryableError(error) : (stryCov_9fa48("4254", "4255", "4256"), !isRetryableError(error))) {
                        if (stryMutAct_9fa48("4257")) {
                            { }
                        }
                        else {
                            stryCov_9fa48("4257");
                            throw error; // Lança imediatamente se não for retryable
                        }
                    }
                    stryMutAct_9fa48("4258") ? options.onRetry(error, attempt, delay) : (stryCov_9fa48("4258"), options.onRetry?.(error, attempt, delay));
                }
            }
        }), context);
    }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvbWFuby9wcm9qZXRvcy9kYXRhc3VsL2xvcjAxMzgvLnN0cnlrZXItdG1wL3NhbmRib3gtRUZGMmJSL3NyYy9zaGFyZWQvdXRpbHMvcmV0cnkudHMiLCJtYXBwaW5ncyI6Ijs7QUFrRkEsNENBeUZDO0FBNENELDRDQVNDO0FBS0Qsc0RBMEJDO0FBL1BELGNBQWM7QUFDZCw0QkFBNEI7QUFDNUIsU0FBUyxZQUFZO0lBQ25CLElBQUksQ0FBQyxHQUFHLE9BQU8sVUFBVSxLQUFLLFFBQVEsSUFBSSxVQUFVLElBQUksVUFBVSxDQUFDLElBQUksS0FBSyxJQUFJLElBQUksVUFBVSxJQUFJLElBQUksUUFBUSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUM7SUFDaEksSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLFdBQVcsSUFBSSxDQUFDLENBQUMsQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDL0MsSUFBSSxFQUFFLENBQUMsWUFBWSxLQUFLLFNBQVMsSUFBSSxDQUFDLENBQUMsT0FBTyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLHlCQUF5QixFQUFFLENBQUM7UUFDM0csRUFBRSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyx5QkFBeUIsQ0FBQztJQUM1RCxDQUFDO0lBQ0QsU0FBUyxVQUFVO1FBQ2pCLE9BQU8sRUFBRSxDQUFDO0lBQ1osQ0FBQztJQUNELFlBQVksR0FBRyxVQUFVLENBQUM7SUFDMUIsT0FBTyxVQUFVLEVBQUUsQ0FBQztBQUN0QixDQUFDO0FBQ0QsWUFBWSxFQUFFLENBQUM7QUFDZixTQUFTLGFBQWE7SUFDcEIsSUFBSSxFQUFFLEdBQUcsWUFBWSxFQUFFLENBQUM7SUFDeEIsSUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDLGNBQWMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxjQUFjLEdBQUc7UUFDbEQsTUFBTSxFQUFFLEVBQUU7UUFDVixPQUFPLEVBQUUs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by9wcm9qZXRvcy9kYXRhc3VsL2xvcjAxMzgvLnN0cnlrZXItdG1wL3NhbmRib3gtRUZGMmJSL3NyYy9zaGFyZWQvdXRpbHMvcmV0cnkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLW5vY2hlY2tcbi8vIHNyYy9zaGFyZWQvdXRpbHMvcmV0cnkudHNcbmZ1bmN0aW9uIHN0cnlOU185ZmE0OCgpIHtcbiAgdmFyIGcgPSB0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcgJiYgZ2xvYmFsVGhpcyAmJiBnbG9iYWxUaGlzLk1hdGggPT09IE1hdGggJiYgZ2xvYmFsVGhpcyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xuICB2YXIgbnMgPSBnLl9fc3RyeWtlcl9fIHx8IChnLl9fc3RyeWtlcl9fID0ge30pO1xuICBpZiAobnMuYWN0aXZlTXV0YW50ID09PSB1bmRlZmluZWQgJiYgZy5wcm9jZXNzICYmIGcucHJvY2Vzcy5lbnYgJiYgZy5wcm9jZXNzLmVudi5fX1NUUllLRVJfQUNUSVZFX01VVEFOVF9fKSB7XG4gICAgbnMuYWN0aXZlTXV0YW50ID0gZy5wcm9jZXNzLmVudi5fX1NUUllLRVJfQUNUSVZFX01VVEFOVF9fO1xuICB9XG4gIGZ1bmN0aW9uIHJldHJpZXZlTlMoKSB7XG4gICAgcmV0dXJuIG5zO1xuICB9XG4gIHN0cnlOU185ZmE0OCA9IHJldHJpZXZlTlM7XG4gIHJldHVybiByZXRyaWV2ZU5TKCk7XG59XG5zdHJ5TlNfOWZhNDgoKTtcbmZ1bmN0aW9uIHN0cnlDb3ZfOWZhNDgoKSB7XG4gIHZhciBucyA9IHN0cnlOU185ZmE0OCgpO1xuICB2YXIgY292ID0gbnMubXV0YW50Q292ZXJhZ2UgfHwgKG5zLm11dGFudENvdmVyYWdlID0ge1xuICAgIHN0YXRpYzoge30sXG4gICAgcGVyVGVzdDoge31cbiAgfSk7XG4gIGZ1bmN0aW9uIGNvdmVyKCkge1xuICAgIHZhciBjID0gY292LnN0YXRpYztcbiAgICBpZiAobnMuY3VycmVudFRlc3RJZCkge1xuICAgICAgYyA9IGNvdi5wZXJUZXN0W25zLmN1cnJlbnRUZXN0SWRdID0gY292LnBlclRlc3RbbnMuY3VycmVudFRlc3RJZF0gfHwge307XG4gICAgfVxuICAgIHZhciBhID0gYXJndW1lbnRzO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgY1thW2ldXSA9IChjW2FbaV1dIHx8IDApICsgMTtcbiAgICB9XG4gIH1cbiAgc3RyeUNvdl85ZmE0OCA9IGNvdmVyO1xuICBjb3Zlci5hcHBseShudWxsLCBhcmd1bWVudHMpO1xufVxuZnVuY3Rpb24gc3RyeU11dEFjdF85ZmE0OChpZCkge1xuICB2YXIgbnMgPSBzdHJ5TlNfOWZhNDgoKTtcbiAgZnVuY3Rpb24gaXNBY3RpdmUoaWQpIHtcbiAgICBpZiAobnMuYWN0aXZlTXV0YW50ID09PSBpZCkge1xuICAgICAgaWYgKG5zLmhpdENvdW50ICE9PSB2b2lkIDAgJiYgKytucy5oaXRDb3VudCA+IG5zLmhpdExpbWl0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU3RyeWtlcjogSGl0IGNvdW50IGxpbWl0IHJlYWNoZWQgKCcgKyBucy5oaXRDb3VudCArICcpJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHN0cnlNdXRBY3RfOWZhNDggPSBpc0FjdGl2ZTtcbiAgcmV0dXJuIGlzQWN0aXZlKGlkKTtcbn1cbmltcG9ydCB7IGxvZyB9IGZyb20gJy4vbG9nZ2VyJztcbmV4cG9ydCBpbnRlcmZhY2UgUmV0cnlPcHRpb25zIHtcbiAgbWF4QXR0ZW1wdHM6IG51bWJlcjtcbiAgaW5pdGlhbERlbGF5OiBudW1iZXI7IC8vIG1zXG4gIG1heERlbGF5OiBudW1iZXI7IC8vIG1zXG4gIGJhY2tvZmZGYWN0b3I6IG51bWJlcjsgLy8gbXVsdGlwbGljYWRvciBwYXJhIGV4cG9uZW50aWFsIGJhY2tvZmZcbiAgaml0dGVyOiBib29sZWFuOyAvLyBhZGljaW9uYSBhbGVhdG9yaWVkYWRlIHBhcmEgZXZpdGFyIHRodW5kZXJpbmcgaGVyZFxuICBvblJldHJ5PzogKGVycm9yOiBFcnJvciwgYXR0ZW1wdDogbnVtYmVyLCBuZXh0RGVsYXk6IG51bWJlcikgPT4gdm9pZDtcbn1cbmNvbnN0IERFRkFVTFRfT1BUSU9OUzogUmV0cnlPcHRpb25zID0gc3RyeU11dEFjdF85ZmE0OChcIjQxOTJcIikgPyB7fSA6IChzdHJ5Q292XzlmYTQ4KFwiNDE5MlwiKSwge1xuICBtYXhBdHRlbXB0czogMyxcbiAgaW5pdGlhbERlbGF5OiAxMDAwLFxuICBtYXhEZWxheTogMTAwMDAsXG4gIGJhY2tvZmZGYWN0b3I6IDIsXG4gIGppdHRlcjogc3RyeU11dEFjdF85ZmE0OChcIjQxOTNcIikgPyBmYWxzZSA6IChzdHJ5Q292XzlmYTQ4KFwiNDE5M1wiKSwgdHJ1ZSlcbn0pO1xuXG4vKipcbiAqIEV4ZWN1dGEgdW1hIGZ1bsOnw6NvIGNvbSByZXRyeSBlIGV4cG9uZW50aWFsIGJhY2tvZmZcbiAqIFxuICogQHBhcmFtIGZuIEZ1bsOnw6NvIGFzeW5jIGEgc2VyIGV4ZWN1dGFkYVxuICogQHBhcmFtIG9wdGlvbnMgT3DDp8O1ZXMgZGUgcmV0cnlcbiAqIEBwYXJhbSBjb250ZXh0IENvbnRleHRvIHBhcmEgbG9ncyAoZXg6IFwiU1FMIFNlcnZlciBFTVBcIilcbiAqIEByZXR1cm5zIFJlc3VsdGFkbyBkYSBmdW7Dp8OjbyBvdSBsYW7Dp2EgZXJybyBhcMOzcyB0b2RhcyBhcyB0ZW50YXRpdmFzXG4gKiBcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCByZXRyeVdpdGhCYWNrb2ZmKFxuICogICAoKSA9PiBwb29sLmNvbm5lY3QoKSxcbiAqICAgeyBtYXhBdHRlbXB0czogNSwgaW5pdGlhbERlbGF5OiAxMDAwIH0sXG4gKiAgICdTUUwgU2VydmVyIENvbm5lY3Rpb24nXG4gKiApO1xuICogYGBgXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXRyeVdpdGhCYWNrb2ZmPFQ+KGZuOiAoKSA9PiBQcm9taXNlPFQ+LCBvcHRpb25zOiBQYXJ0aWFsPFJldHJ5T3B0aW9ucz4gPSB7fSwgY29udGV4dDogc3RyaW5nID0gc3RyeU11dEFjdF85ZmE0OChcIjQxOTRcIikgPyBcIlwiIDogKHN0cnlDb3ZfOWZhNDgoXCI0MTk0XCIpLCAnT3BlcmF0aW9uJykpOiBQcm9taXNlPFQ+IHtcbiAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCI0MTk1XCIpKSB7XG4gICAge31cbiAgfSBlbHNlIHtcbiAgICBzdHJ5Q292XzlmYTQ4KFwiNDE5NVwiKTtcbiAgICBjb25zdCBvcHRzID0gc3RyeU11dEFjdF85ZmE0OChcIjQxOTZcIikgPyB7fSA6IChzdHJ5Q292XzlmYTQ4KFwiNDE5NlwiKSwge1xuICAgICAgLi4uREVGQVVMVF9PUFRJT05TLFxuICAgICAgLi4ub3B0aW9uc1xuICAgIH0pO1xuICAgIGxldCBsYXN0RXJyb3I6IEVycm9yIHwgbnVsbCA9IG51bGw7XG4gICAgbGV0IGRlbGF5ID0gb3B0cy5pbml0aWFsRGVsYXk7XG4gICAgZm9yIChsZXQgYXR0ZW1wdCA9IDE7IHN0cnlNdXRBY3RfOWZhNDgoXCI0MTk5XCIpID8gYXR0ZW1wdCA+IG9wdHMubWF4QXR0ZW1wdHMgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiNDE5OFwiKSA/IGF0dGVtcHQgPCBvcHRzLm1heEF0dGVtcHRzIDogc3RyeU11dEFjdF85ZmE0OChcIjQxOTdcIikgPyBmYWxzZSA6IChzdHJ5Q292XzlmYTQ4KFwiNDE5N1wiLCBcIjQxOThcIiwgXCI0MTk5XCIpLCBhdHRlbXB0IDw9IG9wdHMubWF4QXR0ZW1wdHMpOyBzdHJ5TXV0QWN0XzlmYTQ4KFwiNDIwMFwiKSA/IGF0dGVtcHQtLSA6IChzdHJ5Q292XzlmYTQ4KFwiNDIwMFwiKSwgYXR0ZW1wdCsrKSkge1xuICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCI0MjAxXCIpKSB7XG4gICAgICAgIHt9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdHJ5Q292XzlmYTQ4KFwiNDIwMVwiKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjQyMDJcIikpIHtcbiAgICAgICAgICAgIHt9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0cnlDb3ZfOWZhNDgoXCI0MjAyXCIpO1xuICAgICAgICAgICAgbG9nLmRlYnVnKHN0cnlNdXRBY3RfOWZhNDgoXCI0MjAzXCIpID8gYGAgOiAoc3RyeUNvdl85ZmE0OChcIjQyMDNcIiksIGAke2NvbnRleHR9OiBUZW50YXRpdmEgJHthdHRlbXB0fS8ke29wdHMubWF4QXR0ZW1wdHN9YCksIHN0cnlNdXRBY3RfOWZhNDgoXCI0MjA0XCIpID8ge30gOiAoc3RyeUNvdl85ZmE0OChcIjQyMDRcIiksIHtcbiAgICAgICAgICAgICAgYXR0ZW1wdCxcbiAgICAgICAgICAgICAgbWF4QXR0ZW1wdHM6IG9wdHMubWF4QXR0ZW1wdHNcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKCk7XG4gICAgICAgICAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjQyMDhcIikgPyBhdHRlbXB0IDw9IDEgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiNDIwN1wiKSA/IGF0dGVtcHQgPj0gMSA6IHN0cnlNdXRBY3RfOWZhNDgoXCI0MjA2XCIpID8gZmFsc2UgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiNDIwNVwiKSA/IHRydWUgOiAoc3RyeUNvdl85ZmE0OChcIjQyMDVcIiwgXCI0MjA2XCIsIFwiNDIwN1wiLCBcIjQyMDhcIiksIGF0dGVtcHQgPiAxKSkge1xuICAgICAgICAgICAgICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjQyMDlcIikpIHtcbiAgICAgICAgICAgICAgICB7fVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0cnlDb3ZfOWZhNDgoXCI0MjA5XCIpO1xuICAgICAgICAgICAgICAgIGxvZy5pbmZvKHN0cnlNdXRBY3RfOWZhNDgoXCI0MjEwXCIpID8gYGAgOiAoc3RyeUNvdl85ZmE0OChcIjQyMTBcIiksIGAke2NvbnRleHR9OiBTdWNlc3NvIG5hIHRlbnRhdGl2YSAke2F0dGVtcHR9YCksIHN0cnlNdXRBY3RfOWZhNDgoXCI0MjExXCIpID8ge30gOiAoc3RyeUNvdl85ZmE0OChcIjQyMTFcIiksIHtcbiAgICAgICAgICAgICAgICAgIGF0dGVtcHRcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiNDIxMlwiKSkge1xuICAgICAgICAgICAge31cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyeUNvdl85ZmE0OChcIjQyMTJcIik7XG4gICAgICAgICAgICBsYXN0RXJyb3IgPSBlcnJvciBhcyBFcnJvcjtcbiAgICAgICAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiNDIxNVwiKSA/IGF0dGVtcHQgIT09IG9wdHMubWF4QXR0ZW1wdHMgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiNDIxNFwiKSA/IGZhbHNlIDogc3RyeU11dEFjdF85ZmE0OChcIjQyMTNcIikgPyB0cnVlIDogKHN0cnlDb3ZfOWZhNDgoXCI0MjEzXCIsIFwiNDIxNFwiLCBcIjQyMTVcIiksIGF0dGVtcHQgPT09IG9wdHMubWF4QXR0ZW1wdHMpKSB7XG4gICAgICAgICAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiNDIxNlwiKSkge1xuICAgICAgICAgICAgICAgIHt9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RyeUNvdl85ZmE0OChcIjQyMTZcIik7XG4gICAgICAgICAgICAgICAgbG9nLmVycm9yKHN0cnlNdXRBY3RfOWZhNDgoXCI0MjE3XCIpID8gYGAgOiAoc3RyeUNvdl85ZmE0OChcIjQyMTdcIiksIGAke2NvbnRleHR9OiBGYWxob3UgYXDDs3MgJHtvcHRzLm1heEF0dGVtcHRzfSB0ZW50YXRpdmFzYCksIHN0cnlNdXRBY3RfOWZhNDgoXCI0MjE4XCIpID8ge30gOiAoc3RyeUNvdl85ZmE0OChcIjQyMThcIiksIHtcbiAgICAgICAgICAgICAgICAgIGVycm9yOiBsYXN0RXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgIGF0dGVtcHRzOiBvcHRzLm1heEF0dGVtcHRzXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHRocm93IGxhc3RFcnJvcjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDYWxjdWxhciBwcsOzeGltbyBkZWxheSBjb20gZXhwb25lbnRpYWwgYmFja29mZlxuICAgICAgICAgICAgY29uc3QgbmV4dERlbGF5ID0gY2FsY3VsYXRlRGVsYXkoZGVsYXksIG9wdHMpO1xuICAgICAgICAgICAgbG9nLndhcm4oc3RyeU11dEFjdF85ZmE0OChcIjQyMTlcIikgPyBgYCA6IChzdHJ5Q292XzlmYTQ4KFwiNDIxOVwiKSwgYCR7Y29udGV4dH06IFRlbnRhdGl2YSAke2F0dGVtcHR9IGZhbGhvdSwgcmV0cnkgZW0gJHtuZXh0RGVsYXl9bXNgKSwgc3RyeU11dEFjdF85ZmE0OChcIjQyMjBcIikgPyB7fSA6IChzdHJ5Q292XzlmYTQ4KFwiNDIyMFwiKSwge1xuICAgICAgICAgICAgICBhdHRlbXB0LFxuICAgICAgICAgICAgICBlcnJvcjogbGFzdEVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICAgIG5leHREZWxheSxcbiAgICAgICAgICAgICAgbmV4dEF0dGVtcHQ6IHN0cnlNdXRBY3RfOWZhNDgoXCI0MjIxXCIpID8gYXR0ZW1wdCAtIDEgOiAoc3RyeUNvdl85ZmE0OChcIjQyMjFcIiksIGF0dGVtcHQgKyAxKVxuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAvLyBDYWxsYmFjayBvcGNpb25hbFxuICAgICAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCI0MjIzXCIpID8gZmFsc2UgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiNDIyMlwiKSA/IHRydWUgOiAoc3RyeUNvdl85ZmE0OChcIjQyMjJcIiwgXCI0MjIzXCIpLCBvcHRzLm9uUmV0cnkpKSB7XG4gICAgICAgICAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiNDIyNFwiKSkge1xuICAgICAgICAgICAgICAgIHt9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RyeUNvdl85ZmE0OChcIjQyMjRcIik7XG4gICAgICAgICAgICAgICAgb3B0cy5vblJldHJ5KGxhc3RFcnJvciwgYXR0ZW1wdCwgbmV4dERlbGF5KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZ3VhcmRhciBhbnRlcyBkbyBwcsOzeGltbyByZXRyeVxuICAgICAgICAgICAgYXdhaXQgc2xlZXAobmV4dERlbGF5KTtcblxuICAgICAgICAgICAgLy8gQXR1YWxpemFyIGRlbGF5IHBhcmEgcHLDs3hpbWEgaXRlcmHDp8Ojb1xuICAgICAgICAgICAgZGVsYXkgPSBzdHJ5TXV0QWN0XzlmYTQ4KFwiNDIyNVwiKSA/IE1hdGgubWF4KGRlbGF5ICogb3B0cy5iYWNrb2ZmRmFjdG9yLCBvcHRzLm1heERlbGF5KSA6IChzdHJ5Q292XzlmYTQ4KFwiNDIyNVwiKSwgTWF0aC5taW4oc3RyeU11dEFjdF85ZmE0OChcIjQyMjZcIikgPyBkZWxheSAvIG9wdHMuYmFja29mZkZhY3RvciA6IChzdHJ5Q292XzlmYTQ4KFwiNDIyNlwiKSwgZGVsYXkgKiBvcHRzLmJhY2tvZmZGYWN0b3IpLCBvcHRzLm1heERlbGF5KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTnVuY2EgZGV2ZSBjaGVnYXIgYXF1aSwgbWFzIFR5cGVTY3JpcHQgcHJlY2lzYVxuICAgIHRocm93IHN0cnlNdXRBY3RfOWZhNDgoXCI0MjI5XCIpID8gbGFzdEVycm9yICYmIG5ldyBFcnJvcihgJHtjb250ZXh0fTogUmV0cnkgZmFpbGVkYCkgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiNDIyOFwiKSA/IGZhbHNlIDogc3RyeU11dEFjdF85ZmE0OChcIjQyMjdcIikgPyB0cnVlIDogKHN0cnlDb3ZfOWZhNDgoXCI0MjI3XCIsIFwiNDIyOFwiLCBcIjQyMjlcIiksIGxhc3RFcnJvciB8fCBuZXcgRXJyb3Ioc3RyeU11dEFjdF85ZmE0OChcIjQyMzBcIikgPyBgYCA6IChzdHJ5Q292XzlmYTQ4KFwiNDIzMFwiKSwgYCR7Y29udGV4dH06IFJldHJ5IGZhaWxlZGApKSk7XG4gIH1cbn1cblxuLyoqXG4gKiBDYWxjdWxhIGRlbGF5IGNvbSBleHBvbmVudGlhbCBiYWNrb2ZmIGUgaml0dGVyIG9wY2lvbmFsXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZURlbGF5KGN1cnJlbnREZWxheTogbnVtYmVyLCBvcHRpb25zOiBSZXRyeU9wdGlvbnMpOiBudW1iZXIge1xuICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjQyMzFcIikpIHtcbiAgICB7fVxuICB9IGVsc2Uge1xuICAgIHN0cnlDb3ZfOWZhNDgoXCI0MjMxXCIpO1xuICAgIGxldCBuZXh0RGVsYXkgPSBjdXJyZW50RGVsYXk7XG5cbiAgICAvLyBBZGljaW9uYXIgaml0dGVyIChhbGVhdG9yaWVkYWRlKSBzZSBoYWJpbGl0YWRvXG4gICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCI0MjMzXCIpID8gZmFsc2UgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiNDIzMlwiKSA/IHRydWUgOiAoc3RyeUNvdl85ZmE0OChcIjQyMzJcIiwgXCI0MjMzXCIpLCBvcHRpb25zLmppdHRlcikpIHtcbiAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiNDIzNFwiKSkge1xuICAgICAgICB7fVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RyeUNvdl85ZmE0OChcIjQyMzRcIik7XG4gICAgICAgIC8vIEppdHRlciBlbnRyZSA1MCUgZSAxNTAlIGRvIGRlbGF5XG4gICAgICAgIGNvbnN0IGppdHRlckZhY3RvciA9IHN0cnlNdXRBY3RfOWZhNDgoXCI0MjM1XCIpID8gMC41IC0gTWF0aC5yYW5kb20oKSA6IChzdHJ5Q292XzlmYTQ4KFwiNDIzNVwiKSwgMC41ICsgTWF0aC5yYW5kb20oKSk7XG4gICAgICAgIG5leHREZWxheSA9IE1hdGguZmxvb3Ioc3RyeU11dEFjdF85ZmE0OChcIjQyMzZcIikgPyBjdXJyZW50RGVsYXkgLyBqaXR0ZXJGYWN0b3IgOiAoc3RyeUNvdl85ZmE0OChcIjQyMzZcIiksIGN1cnJlbnREZWxheSAqIGppdHRlckZhY3RvcikpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdhcmFudGlyIHF1ZSBuw6NvIGV4Y2VkZSBtYXhEZWxheVxuICAgIHJldHVybiBzdHJ5TXV0QWN0XzlmYTQ4KFwiNDIzN1wiKSA/IE1hdGgubWF4KG5leHREZWxheSwgb3B0aW9ucy5tYXhEZWxheSkgOiAoc3RyeUNvdl85ZmE0OChcIjQyMzdcIiksIE1hdGgubWluKG5leHREZWxheSwgb3B0aW9ucy5tYXhEZWxheSkpO1xuICB9XG59XG5cbi8qKlxuICogSGVscGVyIHBhcmEgYWd1YXJkYXIgdW0gdGVtcG9cbiAqL1xuZnVuY3Rpb24gc2xlZXAobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICBpZiAoc3RyeU11dEFjdF85ZmE0OChcIjQyMzhcIikpIHtcbiAgICB7fVxuICB9IGVsc2Uge1xuICAgIHN0cnlDb3ZfOWZhNDgoXCI0MjM4XCIpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShzdHJ5TXV0QWN0XzlmYTQ4KFwiNDIzOVwiKSA/ICgpID0+IHVuZGVmaW5lZCA6IChzdHJ5Q292XzlmYTQ4KFwiNDIzOVwiKSwgcmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSkpO1xuICB9XG59XG5cbi8qKlxuICogVmVyaWZpY2Egc2UgdW0gZXJybyDDqSByZXRyeWFibGUgKHRlbXBvcsOhcmlvKVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNSZXRyeWFibGVFcnJvcihlcnJvcjogRXJyb3IpOiBib29sZWFuIHtcbiAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCI0MjQwXCIpKSB7XG4gICAge31cbiAgfSBlbHNlIHtcbiAgICBzdHJ5Q292XzlmYTQ4KFwiNDI0MFwiKTtcbiAgICBjb25zdCByZXRyeWFibGVQYXR0ZXJucyA9IHN0cnlNdXRBY3RfOWZhNDgoXCI0MjQxXCIpID8gW10gOiAoc3RyeUNvdl85ZmE0OChcIjQyNDFcIiksIFsvRUNPTk5SRUZVU0VEL2ksIC9FVElNRURPVVQvaSwgL0VOT1RGT1VORC9pLCAvRUhPU1RVTlJFQUNIL2ksIC9FTkVUVU5SRUFDSC9pLCAvdGltZW91dC9pLCBzdHJ5TXV0QWN0XzlmYTQ4KFwiNDI0MlwiKSA/IC9jb25uZWN0aW9uLmNsb3NlZC9pIDogKHN0cnlDb3ZfOWZhNDgoXCI0MjQyXCIpLCAvY29ubmVjdGlvbi4qY2xvc2VkL2kpLCBzdHJ5TXV0QWN0XzlmYTQ4KFwiNDI0M1wiKSA/IC9jb25uZWN0aW9uLnJlc2V0L2kgOiAoc3RyeUNvdl85ZmE0OChcIjQyNDNcIiksIC9jb25uZWN0aW9uLipyZXNldC9pKSwgL3NvY2tldCBoYW5nIHVwL2ldKTtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBzdHJ5TXV0QWN0XzlmYTQ4KFwiNDI0NlwiKSA/IGVycm9yLm1lc3NhZ2UgJiYgJycgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiNDI0NVwiKSA/IGZhbHNlIDogc3RyeU11dEFjdF85ZmE0OChcIjQyNDRcIikgPyB0cnVlIDogKHN0cnlDb3ZfOWZhNDgoXCI0MjQ0XCIsIFwiNDI0NVwiLCBcIjQyNDZcIiksIGVycm9yLm1lc3NhZ2UgfHwgKHN0cnlNdXRBY3RfOWZhNDgoXCI0MjQ3XCIpID8gXCJTdHJ5a2VyIHdhcyBoZXJlIVwiIDogKHN0cnlDb3ZfOWZhNDgoXCI0MjQ3XCIpLCAnJykpKTtcbiAgICByZXR1cm4gc3RyeU11dEFjdF85ZmE0OChcIjQyNDhcIikgPyByZXRyeWFibGVQYXR0ZXJucy5ldmVyeShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChlcnJvck1lc3NhZ2UpKSA6IChzdHJ5Q292XzlmYTQ4KFwiNDI0OFwiKSwgcmV0cnlhYmxlUGF0dGVybnMuc29tZShzdHJ5TXV0QWN0XzlmYTQ4KFwiNDI0OVwiKSA/ICgpID0+IHVuZGVmaW5lZCA6IChzdHJ5Q292XzlmYTQ4KFwiNDI0OVwiKSwgcGF0dGVybiA9PiBwYXR0ZXJuLnRlc3QoZXJyb3JNZXNzYWdlKSkpKTtcbiAgfVxufVxuXG4vKipcbiAqIFJldHJ5IGFwZW5hcyBwYXJhIGVycm9zIHJldHJ5YWJsZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmV0cnlPblJldHJ5YWJsZUVycm9yPFQ+KGZuOiAoKSA9PiBQcm9taXNlPFQ+LCBvcHRpb25zOiBQYXJ0aWFsPFJldHJ5T3B0aW9ucz4gPSB7fSwgY29udGV4dDogc3RyaW5nID0gc3RyeU11dEFjdF85ZmE0OChcIjQyNTBcIikgPyBcIlwiIDogKHN0cnlDb3ZfOWZhNDgoXCI0MjUwXCIpLCAnT3BlcmF0aW9uJykpOiBQcm9taXNlPFQ+IHtcbiAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCI0MjUxXCIpKSB7XG4gICAge31cbiAgfSBlbHNlIHtcbiAgICBzdHJ5Q292XzlmYTQ4KFwiNDI1MVwiKTtcbiAgICByZXR1cm4gcmV0cnlXaXRoQmFja29mZihmbiwgc3RyeU11dEFjdF85ZmE0OChcIjQyNTJcIikgPyB7fSA6IChzdHJ5Q292XzlmYTQ4KFwiNDI1MlwiKSwge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIG9uUmV0cnk6IChlcnJvciwgYXR0ZW1wdCwgZGVsYXkpID0+IHtcbiAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCI0MjUzXCIpKSB7XG4gICAgICAgICAge31cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHJ5Q292XzlmYTQ4KFwiNDI1M1wiKTtcbiAgICAgICAgICAvLyBTw7MgcmV0cnkgc2UgZm9yIGVycm8gcmV0cnlhYmxlXG4gICAgICAgICAgaWYgKHN0cnlNdXRBY3RfOWZhNDgoXCI0MjU2XCIpID8gZmFsc2UgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiNDI1NVwiKSA/IHRydWUgOiBzdHJ5TXV0QWN0XzlmYTQ4KFwiNDI1NFwiKSA/IGlzUmV0cnlhYmxlRXJyb3IoZXJyb3IpIDogKHN0cnlDb3ZfOWZhNDgoXCI0MjU0XCIsIFwiNDI1NVwiLCBcIjQyNTZcIiksICFpc1JldHJ5YWJsZUVycm9yKGVycm9yKSkpIHtcbiAgICAgICAgICAgIGlmIChzdHJ5TXV0QWN0XzlmYTQ4KFwiNDI1N1wiKSkge1xuICAgICAgICAgICAgICB7fVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc3RyeUNvdl85ZmE0OChcIjQyNTdcIik7XG4gICAgICAgICAgICAgIHRocm93IGVycm9yOyAvLyBMYW7Dp2EgaW1lZGlhdGFtZW50ZSBzZSBuw6NvIGZvciByZXRyeWFibGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgc3RyeU11dEFjdF85ZmE0OChcIjQyNThcIikgPyBvcHRpb25zLm9uUmV0cnkoZXJyb3IsIGF0dGVtcHQsIGRlbGF5KSA6IChzdHJ5Q292XzlmYTQ4KFwiNDI1OFwiKSwgb3B0aW9ucy5vblJldHJ5Py4oZXJyb3IsIGF0dGVtcHQsIGRlbGF5KSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSwgY29udGV4dCk7XG4gIH1cbn0iXSwidmVyc2lvbiI6M30=