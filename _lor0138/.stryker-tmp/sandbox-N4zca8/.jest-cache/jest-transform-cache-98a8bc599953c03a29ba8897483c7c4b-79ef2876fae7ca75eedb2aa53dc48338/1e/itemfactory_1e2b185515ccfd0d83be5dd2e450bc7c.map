{"file":"/home/mano/projetos/datasul/lor0138/tests/factories/item.factory.ts","mappings":"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","names":[],"sources":["/home/mano/projetos/datasul/lor0138/tests/factories/item.factory.ts"],"sourcesContent":["// tests/factories/item.factory.ts\n\nimport {\n  ItemMasterQueryResult,\n  ItemEstabQueryResult,\n  ItemInformacoesGerais,\n  ItemInformacoesGeraisEstabelecimento,\n} from '@api/lor0138/item/dadosCadastrais/informacoesGerais/types/informacoesGerais.types';\n\n/**\n * Factory para criar dados de teste do Item\n */\n\n// ========================================\n// ITEM MASTER (Resultado da Query)\n// ========================================\nexport function createItemMasterQueryResult(\n  overrides?: Partial<ItemMasterQueryResult>\n): ItemMasterQueryResult {\n  return {\n    itemCodigo: '7530110',\n    itemDescricao: 'VALVULA DE ESFERA 1/2\" BRONZE',\n    itemUnidade: 'UN',\n    ...overrides,\n  };\n}\n\n// ========================================\n// ESTABELECIMENTO (Resultado da Query)\n// ========================================\nexport function createItemEstabQueryResult(\n  overrides?: Partial<ItemEstabQueryResult>\n): ItemEstabQueryResult {\n  return {\n    itemCodigo: '7530110',\n    estabCodigo: '01.01',\n    estabNome: 'CD São Paulo',\n    codObsoleto: 0,\n    ...overrides,\n  };\n}\n\n// ========================================\n// ESTABELECIMENTO (Response DTO)\n// ========================================\nexport function createItemEstabelecimento(\n  overrides?: Partial<ItemInformacoesGeraisEstabelecimento>\n): ItemInformacoesGeraisEstabelecimento {\n  return {\n    itemCodigo: '7530110',\n    estabCodigo: '01.01',\n    estabNome: 'CD São Paulo',\n    statusIndex: 1, // 0 = ativo (1), outros = inativo (2)\n    ...overrides,\n  };\n}\n\n// ========================================\n// INFORMAÇÕES GERAIS (Response DTO Completo)\n// ========================================\nexport function createInformacoesGerais(\n  overrides?: Partial<ItemInformacoesGerais>\n): ItemInformacoesGerais {\n  return {\n    identificacaoItemCodigo: '7530110',\n    identificacaoItemDescricao: 'VALVULA DE ESFERA 1/2\" BRONZE',\n    identificacaoItemUnidade: 'UN',\n    identificacaoItensEstabelecimentos: [\n      createItemEstabelecimento(),\n      createItemEstabelecimento({\n        estabCodigo: '02.01',\n        estabNome: 'Fábrica Joinville',\n        statusIndex: 2,\n      }),\n    ],\n    ...overrides,\n  };\n}\n\n// ========================================\n// ARRAYS DE TESTE (múltiplos itens)\n// ========================================\nexport function createMultipleEstabelecimentos(\n  count: number,\n  baseOverrides?: Partial<ItemInformacoesGeraisEstabelecimento>\n): ItemInformacoesGeraisEstabelecimento[] {\n  return Array.from({ length: count }, (_, i) =>\n    createItemEstabelecimento({\n      estabCodigo: `0${i + 1}.01`,\n      estabNome: `Estabelecimento ${i + 1}`,\n      statusIndex: i % 2 === 0 ? 1 : 2, // Alterna entre ativo/inativo\n      ...baseOverrides,\n    })\n  );\n}\n\n// ========================================\n// CASOS ESPECIAIS\n// ========================================\n\n/**\n * Item sem estabelecimentos\n */\nexport function createItemSemEstabelecimentos(): ItemInformacoesGerais {\n  return createInformacoesGerais({\n    identificacaoItensEstabelecimentos: [],\n  });\n}\n\n/**\n * Item com estabelecimento obsoleto\n */\nexport function createItemComEstabObsoleto(): ItemInformacoesGerais {\n  return createInformacoesGerais({\n    identificacaoItensEstabelecimentos: [\n      createItemEstabelecimento({\n        statusIndex: 2, // Obsoleto\n      }),\n    ],\n  });\n}\n\n/**\n * Item com múltiplos estabelecimentos (10)\n */\nexport function createItemComMuitosEstabs(): ItemInformacoesGerais {\n  return createInformacoesGerais({\n    identificacaoItensEstabelecimentos: createMultipleEstabelecimentos(10),\n  });\n}\n\n/**\n * Códigos de item para testes de validação\n */\nexport const testItemCodigos = {\n  valid: [\n    '7530110',\n    'ABC123',\n    'ITEM001',\n    '1',\n    'A',\n    '1234567890123456', // 16 caracteres (máximo)\n  ],\n  \n  invalid: [\n    '', // Vazio\n    '   ', // Só espaços\n    '12345678901234567', // 17 caracteres (excede máximo)\n    'SELECT * FROM item', // SQL Injection\n    '../../../etc/passwd', // Path Traversal\n    '<script>alert(1)</script>', // XSS\n    'item; DROP TABLE item;--', // SQL Injection com ;\n    'item\\'--', // SQL Injection com '\n    'item|ls', // Command Injection\n    'item&&whoami', // Command Injection\n    'item$USER', // Variable Injection\n  ],\n\n  sanitized: [\n    { input: '  7530110  ', expected: '7530110' }, // Remove espaços\n    { input: 'ABC-123', expected: 'ABC123' }, // Remove hífen\n    { input: 'item\"test', expected: 'itemtest' }, // Remove aspas\n    { input: 'item;test', expected: 'itemtest' }, // Remove ponto e vírgula\n  ],\n};\n\n/**\n * Mensagens de erro esperadas\n */\nexport const expectedErrors = {\n  itemNotFound: (codigo: string) => `Item ${codigo} não encontrado`,\n  validationError: 'Código do item é obrigatório',\n  invalidFormat: 'Código do item contém caracteres inválidos. Use apenas letras, números e caracteres básicos',\n  maxLength: 'Código do item não pode ter mais de 16 caracteres',\n  sqlInjection: 'Código do item contém padrões não permitidos',\n  commandInjection: 'Código do item contém caracteres não permitidos',\n};"],"version":3}