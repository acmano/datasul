2ee41f3bb1a2d9cb869bddfb55a1920f
"use strict";
// tests/integration/api/informacoesGerais.integration.test.ts
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const supertest_1 = __importDefault(require("supertest"));
const database_helper_1 = require("../../helpers/database.helper");
const app_1 = __importDefault(require("../../../src/app"));
/**
 * TESTES DE INTEGRA√á√ÉO COM BANCO REAL
 *
 * Estes testes conectam no banco de produ√ß√£o (somente leitura)
 * Se o banco n√£o estiver dispon√≠vel, usam MOCK automaticamente
 */
describe('INTEGRA√á√ÉO - API InformacoesGerais (Banco Real)', () => {
    let usingRealDatabase = false;
    let testItemCode;
    // ========================================
    // SETUP
    // ========================================
    beforeAll(async () => {
        await database_helper_1.DatabaseTestHelper.initialize();
        usingRealDatabase = database_helper_1.DatabaseTestHelper.isUsingRealDatabase();
        // Buscar c√≥digo de item real para testes
        testItemCode = await database_helper_1.DatabaseTestHelper.getTestItemCode();
        console.log(`üîó Banco: ${usingRealDatabase ? 'REAL' : 'MOCK'}`);
        console.log(`üì¶ Item de teste: ${testItemCode}`);
    });
    afterAll(async () => {
        await database_helper_1.DatabaseTestHelper.cleanup();
    });
    // ========================================
    // TESTE 1: CONEX√ÉO COM BANCO
    // ========================================
    describe('Conex√£o com Banco de Dados', () => {
        it('deve conectar com banco ou usar mock', async () => {
            const isReady = await database_helper_1.DatabaseTestHelper.waitUntilReady(5000);
            expect(isReady).toBe(true);
        });
        it('deve reportar status correto no health check', async () => {
            const response = await (0, supertest_1.default)(app_1.default)
                .get('/health')
                .expect((res) => {
                expect([200, 503]).toContain(res.status);
            });
            expect(response.body).toHaveProperty('database');
            expect(response.body.database).toHaveProperty('connected');
            if (usingRealDatabase) {
                expect(response.body.database.connected).toBe(true);
                expect(response.body.database.type).toBe('sqlserver');
            }
        });
    });
    // ========================================
    // TESTE 2: BUSCAR ITEM REAL
    // ========================================
    describe('Buscar Informa√ß√µes Gerais (Dados Reais)', () => {
        it('deve buscar item existente com sucesso', async () => {
            const startTime = Date.now();
            const response = await (0, supertest_1.default)(app_1.default)
                .get(`/api/lor0138/item/dadosCadastrais/informacoesGerais/${testItemCode}`)
                .expect(200);
            const duration = Date.now() - startTime;
            // Valida√ß√µes b√°sicas
            expect(response.body).toHaveProperty('success', true);
            expect(response.body).toHaveProperty('data');
            // Se banco real, validar dados
            if (usingRealDatabase) {
                expect(response.body.data).toHaveProperty('item');
                expect(response.body.data.item).toHaveProperty('codigo', testItemCode);
                expect(response.body.data.item).toHaveProperty('descricao');
                expect(response.body.data.item).toHaveProperty('unidade');
                // Validar performance (banco real deve responder r√°pido)
                expect(duration).toRespondWithin(5000); // max 5s
            }
        });
        it('deve retornar 404 para item inexistente', async () => {
            const invalidCode = 'INVALID999';
            const response = await (0, supertest_1.default)(app_1.default)
                .get(`/api/lor0138/item/dadosCadastrais/informacoesGerais/${invalidCode}`)
                .expect(404);
            expect(response.body).toHaveProperty('error');
            expect(response.body.message).toMatch(/n√£o encontrado/i);
        });
    });
    // ========================================
    // TESTE 3: VALIDA√á√ÉO COM DADOS REAIS
    // ========================================
    describe('Valida√ß√£o de Dados do Banco', () => {
        it('deve retornar estrutura de dados correta', async () => {
            const response = await (0, supertest_1.default)(app_1.default)
                .get(`/api/lor0138/item/dadosCadastrais/informacoesGerais/${testItemCode}`)
                .expect(200);
            const { data } = response.body;
            // Estrutura esperada
            expect(data).toHaveProperty('item');
            expect(data).toHaveProperty('estabelecimentos');
            // Item deve ter campos obrigat√≥rios
            expect(data.item).toMatchObject({
                codigo: expect.any(String),
                descricao: expect.any(String),
                unidade: expect.any(String),
            });
            // Estabelecimentos deve ser array
            expect(Array.isArray(data.estabelecimentos)).toBe(true);
        });
        it('campos do item devem ter tipos corretos', async () => {
            const response = await (0, supertest_1.default)(app_1.default)
                .get(`/api/lor0138/item/dadosCadastrais/informacoesGerais/${testItemCode}`)
                .expect(200);
            const { item } = response.body.data;
            expect(typeof item.codigo).toBe('string');
            expect(typeof item.descricao).toBe('string');
            expect(typeof item.unidade).toBe('string');
            // Se tiver campos opcionais
            if (item.tipo) {
                expect(typeof item.tipo).toBe('string');
            }
        });
    });
    // ========================================
    // TESTE 4: PERFORMANCE COM BANCO REAL
    // ========================================
    describe('Performance (Banco Real)', () => {
        it('deve responder em menos de 3 segundos', async function () {
            // Pular se n√£o for banco real
            if (!usingRealDatabase) {
                console.log('‚è≠Ô∏è  Teste de performance pulado - usando mock');
                return;
            }
            const startTime = Date.now();
            await (0, supertest_1.default)(app_1.default)
                .get(`/api/lor0138/item/dadosCadastrais/informacoesGerais/${testItemCode}`)
                .expect(200);
            const duration = Date.now() - startTime;
            expect(duration).toBeLessThan(3000);
        });
        it('deve manter performance consistente em m√∫ltiplas requisi√ß√µes', async function () {
            if (!usingRealDatabase) {
                console.log('‚è≠Ô∏è  Teste de performance pulado - usando mock');
                return;
            }
            const durations = [];
            const iterations = 5;
            for (let i = 0; i < iterations; i++) {
                const start = Date.now();
                await (0, supertest_1.default)(app_1.default)
                    .get(`/api/lor0138/item/dadosCadastrais/informacoesGerais/${testItemCode}`)
                    .expect(200);
                durations.push(Date.now() - start);
            }
            const avgDuration = durations.reduce((a, b) => a + b, 0) / durations.length;
            console.log(`üìä M√©dia de ${iterations} requisi√ß√µes: ${avgDuration.toFixed(0)}ms`);
            expect(avgDuration).toBeLessThan(3000);
        });
    });
    // ========================================
    // TESTE 5: EDGE CASES COM BANCO REAL
    // ========================================
    describe('Edge Cases (Banco Real)', () => {
        it('deve buscar item com c√≥digo alfanum√©rico', async () => {
            // Usar c√≥digo conhecido ou pular se n√£o houver
            const codes = database_helper_1.DatabaseTestHelper.getKnownTestCodes();
            const response = await (0, supertest_1.default)(app_1.default)
                .get(`/api/lor0138/item/dadosCadastrais/informacoesGerais/${codes.validItem}`)
                .expect((res) => {
                // Aceita 200 (encontrado) ou 404 (n√£o encontrado, mas validou)
                expect([200, 404]).toContain(res.status);
            });
            if (response.status === 200) {
                expect(response.body.success).toBe(true);
            }
        });
        it('deve validar c√≥digo com 16 caracteres (m√°ximo)', async () => {
            const maxCode = '1234567890123456';
            const response = await (0, supertest_1.default)(app_1.default)
                .get(`/api/lor0138/item/dadosCadastrais/informacoesGerais/${maxCode}`)
                .expect((res) => {
                expect([200, 404]).toContain(res.status);
            });
            // N√£o deve dar erro de valida√ß√£o (400)
            expect(response.status).not.toBe(400);
        });
        it('deve rejeitar c√≥digo com 17 caracteres', async () => {
            const tooLongCode = '12345678901234567'; // 17 chars
            const response = await (0, supertest_1.default)(app_1.default)
                .get(`/api/lor0138/item/dadosCadastrais/informacoesGerais/${tooLongCode}`)
                .expect(400);
            expect(response.body).toHaveProperty('error');
        });
    });
    // ========================================
    // TESTE 6: ESTABELECIMENTOS (se dispon√≠vel)
    // ========================================
    describe('Estabelecimentos do Item', () => {
        it('deve retornar estabelecimentos se existirem', async () => {
            const response = await (0, supertest_1.default)(app_1.default)
                .get(`/api/lor0138/item/dadosCadastrais/informacoesGerais/${testItemCode}`)
                .expect(200);
            const { estabelecimentos } = response.body.data;
            expect(Array.isArray(estabelecimentos)).toBe(true);
            // Se houver estabelecimentos, validar estrutura
            if (estabelecimentos.length > 0) {
                const estab = estabelecimentos[0];
                expect(estab).toHaveProperty('codigo');
                expect(estab).toHaveProperty('nome');
                expect(typeof estab.codigo).toBe('string');
                expect(typeof estab.nome).toBe('string');
            }
        });
    });
    // ========================================
    // TESTE 7: CORRELATION ID E HEADERS
    // ========================================
    describe('Headers e Correlation ID', () => {
        it('deve incluir Correlation ID na resposta', async () => {
            const response = await (0, supertest_1.default)(app_1.default)
                .get(`/api/lor0138/item/dadosCadastrais/informacoesGerais/${testItemCode}`);
            expect(response.headers['x-correlation-id']).toBeDefined();
        });
        it('deve aceitar Correlation ID customizado', async () => {
            const customId = 'integration-test-123';
            const response = await (0, supertest_1.default)(app_1.default)
                .get(`/api/lor0138/item/dadosCadastrais/informacoesGerais/${testItemCode}`)
                .set('X-Correlation-ID', customId);
            expect(response.headers['x-correlation-id']).toBe(customId);
        });
    });
    // ========================================
    // TESTE 8: TIMEOUT E RESIL√äNCIA
    // ========================================
    describe('Timeout e Resil√™ncia', () => {
        it('n√£o deve travar em requisi√ß√£o inv√°lida', async () => {
            const response = await (0, supertest_1.default)(app_1.default)
                .get('/api/lor0138/item/dadosCadastrais/informacoesGerais/INVALID')
                .timeout(5000); // 5s max
            expect(response.status).toBeDefined();
            expect([200, 404, 400]).toContain(response.status);
        });
    });
    // ========================================
    // TESTE 9: COMPARA√á√ÉO MOCK vs REAL
    // ========================================
    describe('Compara√ß√£o Mock vs Real', () => {
        it('deve informar qual fonte de dados est√° sendo usada', () => {
            console.log(`
        üìä RESULTADO DOS TESTES:
        - Fonte de dados: ${usingRealDatabase ? 'BANCO REAL' : 'MOCK'}
        - C√≥digo testado: ${testItemCode}
        - Ambiente: ${process.env.NODE_ENV}
      `);
            expect(usingRealDatabase).toBeDefined();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvbWFuby9wcm9qZXRvcy9kYXRhc3VsL2xvcjAxMzgvdGVzdHMvaW50ZWdyYXRpb24vYXBpL2luZm9ybWFjb2VzR2VyYWlzLmludGVncmF0aW9uLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBLDhEQUE4RDs7Ozs7QUFFOUQsMERBQWdDO0FBQ2hDLG1FQUFtRTtBQUNuRSwyREFBbUM7QUFFbkM7Ozs7O0dBS0c7QUFFSCxRQUFRLENBQUMsaURBQWlELEVBQUUsR0FBRyxFQUFFO0lBRS9ELElBQUksaUJBQWlCLEdBQUcsS0FBSyxDQUFDO0lBQzlCLElBQUksWUFBb0IsQ0FBQztJQUV6QiwyQ0FBMkM7SUFDM0MsUUFBUTtJQUNSLDJDQUEyQztJQUMzQyxTQUFTLENBQUMsS0FBSyxJQUFJLEVBQUU7UUFDbkIsTUFBTSxvQ0FBa0IsQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUN0QyxpQkFBaUIsR0FBRyxvQ0FBa0IsQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1FBRTdELHlDQUF5QztRQUN6QyxZQUFZLEdBQUcsTUFBTSxvQ0FBa0IsQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUUxRCxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUNoRSxPQUFPLENBQUMsR0FBRyxDQUFDLHFCQUFxQixZQUFZLEVBQUUsQ0FBQyxDQUFDO0lBQ25ELENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLEtBQUssSUFBSSxFQUFFO1FBQ2xCLE1BQU0sb0NBQWtCLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDckMsQ0FBQyxDQUFDLENBQUM7SUFFSCwyQ0FBMkM7SUFDM0MsNkJBQTZCO0lBQzdCLDJDQUEyQztJQUMzQyxRQUFRLENBQUMsNEJBQTRCLEVBQUUsR0FBRyxFQUFFO1FBRTFDLEVBQUUsQ0FBQyxzQ0FBc0MsRUFBRSxLQUFLLElBQUksRUFBRTtZQUNwRCxNQUFNLE9BQU8sR0FBRyxNQUFNLG9DQUFr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LENBQUMseUJBQXlCLEVBQUUsR0FBRyxFQUFFO1FBRXZDLEVBQUUsQ0FBQyxvREFBb0QsRUFBRSxHQUFHLEVBQUU7WUFDNUQsT0FBTyxDQUFDLEdBQUcsQ0FBQzs7NEJBRVUsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsTUFBTTs0QkFDekMsWUFBWTtzQkFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRO09BQ25DLENBQUMsQ0FBQztZQUVILE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQzFDLENBQUMsQ0FBQyxDQUFDO0lBRUwsQ0FBQyxDQUFDLENBQUM7QUFFTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9tYW5vL3Byb2pldG9zL2RhdGFzdWwvbG9yMDEzOC90ZXN0cy9pbnRlZ3JhdGlvbi9hcGkvaW5mb3JtYWNvZXNHZXJhaXMuaW50ZWdyYXRpb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyB0ZXN0cy9pbnRlZ3JhdGlvbi9hcGkvaW5mb3JtYWNvZXNHZXJhaXMuaW50ZWdyYXRpb24udGVzdC50c1xuXG5pbXBvcnQgcmVxdWVzdCBmcm9tICdzdXBlcnRlc3QnO1xuaW1wb3J0IHsgRGF0YWJhc2VUZXN0SGVscGVyIH0gZnJvbSAnLi4vLi4vaGVscGVycy9kYXRhYmFzZS5oZWxwZXInO1xuaW1wb3J0IGFwcCBmcm9tICcuLi8uLi8uLi9zcmMvYXBwJztcblxuLyoqXG4gKiBURVNURVMgREUgSU5URUdSQcOHw4NPIENPTSBCQU5DTyBSRUFMXG4gKiBcbiAqIEVzdGVzIHRlc3RlcyBjb25lY3RhbSBubyBiYW5jbyBkZSBwcm9kdcOnw6NvIChzb21lbnRlIGxlaXR1cmEpXG4gKiBTZSBvIGJhbmNvIG7Do28gZXN0aXZlciBkaXNwb27DrXZlbCwgdXNhbSBNT0NLIGF1dG9tYXRpY2FtZW50ZVxuICovXG5cbmRlc2NyaWJlKCdJTlRFR1JBw4fDg08gLSBBUEkgSW5mb3JtYWNvZXNHZXJhaXMgKEJhbmNvIFJlYWwpJywgKCkgPT4ge1xuICBcbiAgbGV0IHVzaW5nUmVhbERhdGFiYXNlID0gZmFsc2U7XG4gIGxldCB0ZXN0SXRlbUNvZGU6IHN0cmluZztcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFNFVFVQXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgYmVmb3JlQWxsKGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBEYXRhYmFzZVRlc3RIZWxwZXIuaW5pdGlhbGl6ZSgpO1xuICAgIHVzaW5nUmVhbERhdGFiYXNlID0gRGF0YWJhc2VUZXN0SGVscGVyLmlzVXNpbmdSZWFsRGF0YWJhc2UoKTtcbiAgICBcbiAgICAvLyBCdXNjYXIgY8OzZGlnbyBkZSBpdGVtIHJlYWwgcGFyYSB0ZXN0ZXNcbiAgICB0ZXN0SXRlbUNvZGUgPSBhd2FpdCBEYXRhYmFzZVRlc3RIZWxwZXIuZ2V0VGVzdEl0ZW1Db2RlKCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coYPCflJcgQmFuY286ICR7dXNpbmdSZWFsRGF0YWJhc2UgPyAnUkVBTCcgOiAnTU9DSyd9YCk7XG4gICAgY29uc29sZS5sb2coYPCfk6YgSXRlbSBkZSB0ZXN0ZTogJHt0ZXN0SXRlbUNvZGV9YCk7XG4gIH0pO1xuXG4gIGFmdGVyQWxsKGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBEYXRhYmFzZVRlc3RIZWxwZXIuY2xlYW51cCgpO1xuICB9KTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFRFU1RFIDE6IENPTkVYw4NPIENPTSBCQU5DT1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGRlc2NyaWJlKCdDb25leMOjbyBjb20gQmFuY28gZGUgRGFkb3MnLCAoKSA9PiB7XG4gICAgXG4gICAgaXQoJ2RldmUgY29uZWN0YXIgY29tIGJhbmNvIG91IHVzYXIgbW9jaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGlzUmVhZHkgPSBhd2FpdCBEYXRhYmFzZVRlc3RIZWxwZXIud2FpdFVudGlsUmVhZHkoNTAwMCk7XG4gICAgICBleHBlY3QoaXNSZWFkeSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHJlcG9ydGFyIHN0YXR1cyBjb3JyZXRvIG5vIGhlYWx0aCBjaGVjaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoJy9oZWFsdGgnKVxuICAgICAgICAuZXhwZWN0KChyZXMpID0+IHtcbiAgICAgICAgICBleHBlY3QoWzIwMCwgNTAzXSkudG9Db250YWluKHJlcy5zdGF0dXMpO1xuICAgICAgICB9KTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkpLnRvSGF2ZVByb3BlcnR5KCdkYXRhYmFzZScpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YWJhc2UpLnRvSGF2ZVByb3BlcnR5KCdjb25uZWN0ZWQnKTtcbiAgICAgIFxuICAgICAgaWYgKHVzaW5nUmVhbERhdGFiYXNlKSB7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGFiYXNlLmNvbm5lY3RlZCkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YWJhc2UudHlwZSkudG9CZSgnc3Fsc2VydmVyJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgfSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBURVNURSAyOiBCVVNDQVIgSVRFTSBSRUFMXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgZGVzY3JpYmUoJ0J1c2NhciBJbmZvcm1hw6fDtWVzIEdlcmFpcyAoRGFkb3MgUmVhaXMpJywgKCkgPT4ge1xuICAgIFxuICAgIGl0KCdkZXZlIGJ1c2NhciBpdGVtIGV4aXN0ZW50ZSBjb20gc3VjZXNzbycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoYC9hcGkvbG9yMDEzOC9pdGVtL2RhZG9zQ2FkYXN0cmFpcy9pbmZvcm1hY29lc0dlcmFpcy8ke3Rlc3RJdGVtQ29kZX1gKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZTtcblxuICAgICAgLy8gVmFsaWRhw6fDtWVzIGLDoXNpY2FzXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ3N1Y2Nlc3MnLCB0cnVlKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgnZGF0YScpO1xuICAgICAgXG4gICAgICAvLyBTZSBiYW5jbyByZWFsLCB2YWxpZGFyIGRhZG9zXG4gICAgICBpZiAodXNpbmdSZWFsRGF0YWJhc2UpIHtcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YSkudG9IYXZlUHJvcGVydHkoJ2l0ZW0nKTtcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5pdGVtKS50b0hhdmVQcm9wZXJ0eSgnY29kaWdvJywgdGVzdEl0ZW1Db2RlKTtcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZGF0YS5pdGVtKS50b0hhdmVQcm9wZXJ0eSgnZGVzY3JpY2FvJyk7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmRhdGEuaXRlbSkudG9IYXZlUHJvcGVydHkoJ3VuaWRhZGUnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFZhbGlkYXIgcGVyZm9ybWFuY2UgKGJhbmNvIHJlYWwgZGV2ZSByZXNwb25kZXIgcsOhcGlkbylcbiAgICAgICAgZXhwZWN0KGR1cmF0aW9uKS50b1Jlc3BvbmRXaXRoaW4oNTAwMCk7IC8vIG1heCA1c1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgNDA0IHBhcmEgaXRlbSBpbmV4aXN0ZW50ZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGludmFsaWRDb2RlID0gJ0lOVkFMSUQ5OTknO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KGAvYXBpL2xvcjAxMzgvaXRlbS9kYWRvc0NhZGFzdHJhaXMvaW5mb3JtYWNvZXNHZXJhaXMvJHtpbnZhbGlkQ29kZX1gKVxuICAgICAgICAuZXhwZWN0KDQwNCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgnZXJyb3InKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5Lm1lc3NhZ2UpLnRvTWF0Y2goL27Do28gZW5jb250cmFkby9pKTtcbiAgICB9KTtcblxuICB9KTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFRFU1RFIDM6IFZBTElEQcOHw4NPIENPTSBEQURPUyBSRUFJU1xuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGRlc2NyaWJlKCdWYWxpZGHDp8OjbyBkZSBEYWRvcyBkbyBCYW5jbycsICgpID0+IHtcbiAgICBcbiAgICBpdCgnZGV2ZSByZXRvcm5hciBlc3RydXR1cmEgZGUgZGFkb3MgY29ycmV0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdChhcHApXG4gICAgICAgIC5nZXQoYC9hcGkvbG9yMDEzOC9pdGVtL2RhZG9zQ2FkYXN0cmFpcy9pbmZvcm1hY29lc0dlcmFpcy8ke3Rlc3RJdGVtQ29kZX1gKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gcmVzcG9uc2UuYm9keTtcblxuICAgICAgLy8gRXN0cnV0dXJhIGVzcGVyYWRhXG4gICAgICBleHBlY3QoZGF0YSkudG9IYXZlUHJvcGVydHkoJ2l0ZW0nKTtcbiAgICAgIGV4cGVjdChkYXRhKS50b0hhdmVQcm9wZXJ0eSgnZXN0YWJlbGVjaW1lbnRvcycpO1xuXG4gICAgICAvLyBJdGVtIGRldmUgdGVyIGNhbXBvcyBvYnJpZ2F0w7NyaW9zXG4gICAgICBleHBlY3QoZGF0YS5pdGVtKS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgY29kaWdvOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICAgIGRlc2NyaWNhbzogZXhwZWN0LmFueShTdHJpbmcpLFxuICAgICAgICB1bmlkYWRlOiBleHBlY3QuYW55KFN0cmluZyksXG4gICAgICB9KTtcblxuICAgICAgLy8gRXN0YWJlbGVjaW1lbnRvcyBkZXZlIHNlciBhcnJheVxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoZGF0YS5lc3RhYmVsZWNpbWVudG9zKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdjYW1wb3MgZG8gaXRlbSBkZXZlbSB0ZXIgdGlwb3MgY29ycmV0b3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KGAvYXBpL2xvcjAxMzgvaXRlbS9kYWRvc0NhZGFzdHJhaXMvaW5mb3JtYWNvZXNHZXJhaXMvJHt0ZXN0SXRlbUNvZGV9YClcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBjb25zdCB7IGl0ZW0gfSA9IHJlc3BvbnNlLmJvZHkuZGF0YTtcblxuICAgICAgZXhwZWN0KHR5cGVvZiBpdGVtLmNvZGlnbykudG9CZSgnc3RyaW5nJyk7XG4gICAgICBleHBlY3QodHlwZW9mIGl0ZW0uZGVzY3JpY2FvKS50b0JlKCdzdHJpbmcnKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgaXRlbS51bmlkYWRlKS50b0JlKCdzdHJpbmcnKTtcbiAgICAgIFxuICAgICAgLy8gU2UgdGl2ZXIgY2FtcG9zIG9wY2lvbmFpc1xuICAgICAgaWYgKGl0ZW0udGlwbykge1xuICAgICAgICBleHBlY3QodHlwZW9mIGl0ZW0udGlwbykudG9CZSgnc3RyaW5nJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgfSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBURVNURSA0OiBQRVJGT1JNQU5DRSBDT00gQkFOQ08gUkVBTFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGRlc2NyaWJlKCdQZXJmb3JtYW5jZSAoQmFuY28gUmVhbCknLCAoKSA9PiB7XG4gICAgXG4gICAgaXQoJ2RldmUgcmVzcG9uZGVyIGVtIG1lbm9zIGRlIDMgc2VndW5kb3MnLCBhc3luYyBmdW5jdGlvbigpIHtcbiAgICAgIC8vIFB1bGFyIHNlIG7Do28gZm9yIGJhbmNvIHJlYWxcbiAgICAgIGlmICghdXNpbmdSZWFsRGF0YWJhc2UpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KPre+4jyAgVGVzdGUgZGUgcGVyZm9ybWFuY2UgcHVsYWRvIC0gdXNhbmRvIG1vY2snKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgXG4gICAgICBhd2FpdCByZXF1ZXN0KGFwcClcbiAgICAgICAgLmdldChgL2FwaS9sb3IwMTM4L2l0ZW0vZGFkb3NDYWRhc3RyYWlzL2luZm9ybWFjb2VzR2VyYWlzLyR7dGVzdEl0ZW1Db2RlfWApXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oMzAwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBtYW50ZXIgcGVyZm9ybWFuY2UgY29uc2lzdGVudGUgZW0gbcO6bHRpcGxhcyByZXF1aXNpw6fDtWVzJywgYXN5bmMgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXVzaW5nUmVhbERhdGFiYXNlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfij63vuI8gIFRlc3RlIGRlIHBlcmZvcm1hbmNlIHB1bGFkbyAtIHVzYW5kbyBtb2NrJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZHVyYXRpb25zOiBudW1iZXJbXSA9IFtdO1xuICAgICAgY29uc3QgaXRlcmF0aW9ucyA9IDU7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlcmF0aW9uczsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgXG4gICAgICAgIGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAgIC5nZXQoYC9hcGkvbG9yMDEzOC9pdGVtL2RhZG9zQ2FkYXN0cmFpcy9pbmZvcm1hY29lc0dlcmFpcy8ke3Rlc3RJdGVtQ29kZX1gKVxuICAgICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgICBkdXJhdGlvbnMucHVzaChEYXRlLm5vdygpIC0gc3RhcnQpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhdmdEdXJhdGlvbiA9IGR1cmF0aW9ucy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKSAvIGR1cmF0aW9ucy5sZW5ndGg7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGDwn5OKIE3DqWRpYSBkZSAke2l0ZXJhdGlvbnN9IHJlcXVpc2nDp8O1ZXM6ICR7YXZnRHVyYXRpb24udG9GaXhlZCgwKX1tc2ApO1xuICAgICAgZXhwZWN0KGF2Z0R1cmF0aW9uKS50b0JlTGVzc1RoYW4oMzAwMCk7XG4gICAgfSk7XG5cbiAgfSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBURVNURSA1OiBFREdFIENBU0VTIENPTSBCQU5DTyBSRUFMXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgZGVzY3JpYmUoJ0VkZ2UgQ2FzZXMgKEJhbmNvIFJlYWwpJywgKCkgPT4ge1xuICAgIFxuICAgIGl0KCdkZXZlIGJ1c2NhciBpdGVtIGNvbSBjw7NkaWdvIGFsZmFudW3DqXJpY28nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBVc2FyIGPDs2RpZ28gY29uaGVjaWRvIG91IHB1bGFyIHNlIG7Do28gaG91dmVyXG4gICAgICBjb25zdCBjb2RlcyA9IERhdGFiYXNlVGVzdEhlbHBlci5nZXRLbm93blRlc3RDb2RlcygpO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KGAvYXBpL2xvcjAxMzgvaXRlbS9kYWRvc0NhZGFzdHJhaXMvaW5mb3JtYWNvZXNHZXJhaXMvJHtjb2Rlcy52YWxpZEl0ZW19YClcbiAgICAgICAgLmV4cGVjdCgocmVzKSA9PiB7XG4gICAgICAgICAgLy8gQWNlaXRhIDIwMCAoZW5jb250cmFkbykgb3UgNDA0IChuw6NvIGVuY29udHJhZG8sIG1hcyB2YWxpZG91KVxuICAgICAgICAgIGV4cGVjdChbMjAwLCA0MDRdKS50b0NvbnRhaW4ocmVzLnN0YXR1cyk7XG4gICAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGl0KCdkZXZlIHZhbGlkYXIgY8OzZGlnbyBjb20gMTYgY2FyYWN0ZXJlcyAobcOheGltbyknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtYXhDb2RlID0gJzEyMzQ1Njc4OTAxMjM0NTYnO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KGAvYXBpL2xvcjAxMzgvaXRlbS9kYWRvc0NhZGFzdHJhaXMvaW5mb3JtYWNvZXNHZXJhaXMvJHttYXhDb2RlfWApXG4gICAgICAgIC5leHBlY3QoKHJlcykgPT4ge1xuICAgICAgICAgIGV4cGVjdChbMjAwLCA0MDRdKS50b0NvbnRhaW4ocmVzLnN0YXR1cyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAvLyBOw6NvIGRldmUgZGFyIGVycm8gZGUgdmFsaWRhw6fDo28gKDQwMClcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLm5vdC50b0JlKDQwMCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSByZWplaXRhciBjw7NkaWdvIGNvbSAxNyBjYXJhY3RlcmVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdG9vTG9uZ0NvZGUgPSAnMTIzNDU2Nzg5MDEyMzQ1NjcnOyAvLyAxNyBjaGFyc1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KGAvYXBpL2xvcjAxMzgvaXRlbS9kYWRvc0NhZGFzdHJhaXMvaW5mb3JtYWNvZXNHZXJhaXMvJHt0b29Mb25nQ29kZX1gKVxuICAgICAgICAuZXhwZWN0KDQwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgnZXJyb3InKTtcbiAgICB9KTtcblxuICB9KTtcblxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIC8vIFRFU1RFIDY6IEVTVEFCRUxFQ0lNRU5UT1MgKHNlIGRpc3BvbsOtdmVsKVxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGRlc2NyaWJlKCdFc3RhYmVsZWNpbWVudG9zIGRvIEl0ZW0nLCAoKSA9PiB7XG4gICAgXG4gICAgaXQoJ2RldmUgcmV0b3JuYXIgZXN0YWJlbGVjaW1lbnRvcyBzZSBleGlzdGlyZW0nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KGAvYXBpL2xvcjAxMzgvaXRlbS9kYWRvc0NhZGFzdHJhaXMvaW5mb3JtYWNvZXNHZXJhaXMvJHt0ZXN0SXRlbUNvZGV9YClcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBjb25zdCB7IGVzdGFiZWxlY2ltZW50b3MgfSA9IHJlc3BvbnNlLmJvZHkuZGF0YTtcblxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoZXN0YWJlbGVjaW1lbnRvcykpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIFNlIGhvdXZlciBlc3RhYmVsZWNpbWVudG9zLCB2YWxpZGFyIGVzdHJ1dHVyYVxuICAgICAgaWYgKGVzdGFiZWxlY2ltZW50b3MubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBlc3RhYiA9IGVzdGFiZWxlY2ltZW50b3NbMF07XG4gICAgICAgIFxuICAgICAgICBleHBlY3QoZXN0YWIpLnRvSGF2ZVByb3BlcnR5KCdjb2RpZ28nKTtcbiAgICAgICAgZXhwZWN0KGVzdGFiKS50b0hhdmVQcm9wZXJ0eSgnbm9tZScpO1xuICAgICAgICBleHBlY3QodHlwZW9mIGVzdGFiLmNvZGlnbykudG9CZSgnc3RyaW5nJyk7XG4gICAgICAgIGV4cGVjdCh0eXBlb2YgZXN0YWIubm9tZSkudG9CZSgnc3RyaW5nJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgfSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBURVNURSA3OiBDT1JSRUxBVElPTiBJRCBFIEhFQURFUlNcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBkZXNjcmliZSgnSGVhZGVycyBlIENvcnJlbGF0aW9uIElEJywgKCkgPT4ge1xuICAgIFxuICAgIGl0KCdkZXZlIGluY2x1aXIgQ29ycmVsYXRpb24gSUQgbmEgcmVzcG9zdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KGAvYXBpL2xvcjAxMzgvaXRlbS9kYWRvc0NhZGFzdHJhaXMvaW5mb3JtYWNvZXNHZXJhaXMvJHt0ZXN0SXRlbUNvZGV9YCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5oZWFkZXJzWyd4LWNvcnJlbGF0aW9uLWlkJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGV2ZSBhY2VpdGFyIENvcnJlbGF0aW9uIElEIGN1c3RvbWl6YWRvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY3VzdG9tSWQgPSAnaW50ZWdyYXRpb24tdGVzdC0xMjMnO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KGAvYXBpL2xvcjAxMzgvaXRlbS9kYWRvc0NhZGFzdHJhaXMvaW5mb3JtYWNvZXNHZXJhaXMvJHt0ZXN0SXRlbUNvZGV9YClcbiAgICAgICAgLnNldCgnWC1Db3JyZWxhdGlvbi1JRCcsIGN1c3RvbUlkKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmhlYWRlcnNbJ3gtY29ycmVsYXRpb24taWQnXSkudG9CZShjdXN0b21JZCk7XG4gICAgfSk7XG5cbiAgfSk7XG5cbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAvLyBURVNURSA4OiBUSU1FT1VUIEUgUkVTSUzDik5DSUFcbiAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICBkZXNjcmliZSgnVGltZW91dCBlIFJlc2lsw6puY2lhJywgKCkgPT4ge1xuICAgIFxuICAgIGl0KCduw6NvIGRldmUgdHJhdmFyIGVtIHJlcXVpc2nDp8OjbyBpbnbDoWxpZGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKVxuICAgICAgICAuZ2V0KCcvYXBpL2xvcjAxMzgvaXRlbS9kYWRvc0NhZGFzdHJhaXMvaW5mb3JtYWNvZXNHZXJhaXMvSU5WQUxJRCcpXG4gICAgICAgIC50aW1lb3V0KDUwMDApOyAvLyA1cyBtYXhcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLnN0YXR1cykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChbMjAwLCA0MDQsIDQwMF0pLnRvQ29udGFpbihyZXNwb25zZS5zdGF0dXMpO1xuICAgIH0pO1xuXG4gIH0pO1xuXG4gIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgLy8gVEVTVEUgOTogQ09NUEFSQcOHw4NPIE1PQ0sgdnMgUkVBTFxuICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gIGRlc2NyaWJlKCdDb21wYXJhw6fDo28gTW9jayB2cyBSZWFsJywgKCkgPT4ge1xuICAgIFxuICAgIGl0KCdkZXZlIGluZm9ybWFyIHF1YWwgZm9udGUgZGUgZGFkb3MgZXN0w6Egc2VuZG8gdXNhZGEnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhgXG4gICAgICAgIPCfk4ogUkVTVUxUQURPIERPUyBURVNURVM6XG4gICAgICAgIC0gRm9udGUgZGUgZGFkb3M6ICR7dXNpbmdSZWFsRGF0YWJhc2UgPyAnQkFOQ08gUkVBTCcgOiAnTU9DSyd9XG4gICAgICAgIC0gQ8OzZGlnbyB0ZXN0YWRvOiAke3Rlc3RJdGVtQ29kZX1cbiAgICAgICAgLSBBbWJpZW50ZTogJHtwcm9jZXNzLmVudi5OT0RFX0VOVn1cbiAgICAgIGApO1xuXG4gICAgICBleHBlY3QodXNpbmdSZWFsRGF0YWJhc2UpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgfSk7XG5cbn0pOyJdLCJ2ZXJzaW9uIjozfQ==