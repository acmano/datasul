e6adacfb3324db3fd6c521db12fe22f3
"use strict";
// tests/setup.ts
// Setup global para todos os testes
Object.defineProperty(exports, "__esModule", { value: true });
// ========================================
// 2. MOCK DO LOGGER (evita poluir console)
// ========================================
jest.mock('@shared/utils/logger', () => ({
    log: {
        info: jest.fn(),
        error: jest.fn(),
        warn: jest.fn(),
        debug: jest.fn(),
        http: jest.fn(),
    },
}));
// ========================================
// 2.1 MOCK DO UUID (resolve problema ESM)
// ========================================
jest.mock('uuid', () => ({
    v4: jest.fn(() => 'test-uuid-1234-5678-9012'),
}));
// ========================================
// 1. VARIÃVEIS DE AMBIENTE PARA TESTES
// ========================================
process.env.NODE_ENV = 'test';
process.env.PORT = '3001'; // Porta diferente para nÃ£o conflitar
// Database (Mock serÃ¡ usado automaticamente)
process.env.DB_CONNECTION_TYPE = 'sqlserver';
process.env.DB_SERVER = 'test-server';
process.env.DB_PORT = '1433';
process.env.DB_USER = 'test-user';
process.env.DB_PASSWORD = 'test-password';
process.env.DB_DATABASE_EMP = '';
process.env.DB_DATABASE_MULT = '';
process.env.DB_CONNECTION_TIMEOUT = '5000';
process.env.DB_REQUEST_TIMEOUT = '5000';
process.env.DB_ENCRYPT = 'false';
process.env.DB_TRUST_SERVER_CERTIFICATE = 'true';
// Cache (desabilitado para testes por padrÃ£o)
process.env.CACHE_ENABLED = 'false';
process.env.CACHE_STRATEGY = 'memory';
// CORS
process.env.CORS_ALLOWED_ORIGINS = 'http://localhost:3001';
// Timeouts
process.env.HTTP_REQUEST_TIMEOUT = '5000';
process.env.HTTP_HEALTH_TIMEOUT = '2000';
// Shutdown
process.env.SHUTDOWN_TIMEOUT = '1000';
// ========================================
// 3. MOCKS GLOBAIS DE CONSOLE (opcional)
// ========================================
// Silencia console.log/error durante testes (descomente se quiser)
// global.console.log = jest.fn();
// global.console.error = jest.fn();
// global.console.warn = jest.fn();
// ========================================
// 4. TIMEOUT GLOBAL (aumenta se testes forem lentos)
// ========================================
jest.setTimeout(10000); // 10 segundos
// ========================================
// 5. EXTEND EXPECT (matchers customizados)
// ========================================
expect.extend({
    // Matcher customizado para validar erro customizado
    toBeCustomError(received, expectedClass) {
        const pass = received instanceof expectedClass;
        if (pass) {
            return {
                message: () => `Expected error NOT to be instance of ${expectedClass.name}`,
                pass: true,
            };
        }
        else {
            return {
                message: () => `Expected error to be instance of ${expectedClass.name}, but got ${received?.constructor?.name}`,
                pass: false,
            };
        }
    },
    // Matcher para validar estrutura de API response
    toBeApiResponse(received) {
        const hasSuccess = 'success' in received;
        const hasData = 'data' in received || 'error' in received;
        const pass = hasSuccess && hasData;
        if (pass) {
            return {
                message: () => 'Expected NOT to be a valid API response',
                pass: true,
            };
        }
        else {
            return {
                message: () => `Expected to be a valid API response with 'success' and 'data'/'error' fields`,
                pass: false,
            };
        }
    },
});
// ========================================
// 7. CLEANUP APÃ“S CADA TESTE
// ========================================
afterEach(() => {
    jest.clearAllMocks(); // Limpa histÃ³rico de calls de mocks
});
// ========================================
// 8. CLEANUP APÃ“S TODOS OS TESTES
// ========================================
afterAll(async () => {
    // Aguarda promises pendentes
    await new Promise((resolve) => setTimeout(resolve, 500));
    // Fecha conexÃµes abertas (se houver)
    // await DatabaseManager.close();
    // await CacheManager.close();
});
// ========================================
// 9. ERRO DE PROMISES NÃƒO TRATADAS
// ========================================
process.on('unhandledRejection', (reason, promise) => {
    console.error('Unhandled Rejection during test:', reason);
    throw reason;
});
console.log('ðŸ§ª Ambiente de testes configurado');
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvbWFuby9wcm9qZXRvcy9kYXRhc3VsL2xvcjAxMzgvdGVzdHMvc2V0dXAudHMiLCJtYXBwaW5ncyI6IjtBQUFBLGlCQUFpQjtBQUNqQixvQ0FBb0M7O0FBbUNwQywyQ0FBMkM7QUFDM0MsMkNBQTJDO0FBQzNDLDJDQUEyQztBQUMzQyxJQUFJLENBQUMsSUFBSSxDQUFDLHNCQUFzQixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDdkMsR0FBRyxFQUFFO1FBQ0gsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDZixLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNoQixJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNmLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2hCLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0tBQ2hCO0NBQ0YsQ0FBQyxDQUFDLENBQUM7QUFFSiwyQ0FBMkM7QUFDM0MsMENBQTBDO0FBQzFDLDJDQUEyQztBQUMzQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3ZCLEVBQUUsRUFBRSxJQUFJLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLDBCQUEwQixDQUFDO0NBQzlDLENBQUMsQ0FBQyxDQUFDO0FBbkRKLDJDQUEyQztBQUMzQyx1Q0FBdUM7QUFDdkMsMkNBQTJDO0FBQzNDLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQztBQUM5QixPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsQ0FBQyxxQ0FBcUM7QUFFaEUsNkNBQTZDO0FBQzdDLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLEdBQUcsV0FBVyxDQUFDO0FBQzdDLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLGFBQWEsQ0FBQztBQUN0QyxPQUFPLENBQUMsR0FBRyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7QUFDN0IsT0FB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RUFBRTtJQUNiLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDLG9DQUFvQztBQUM1RCxDQUFDLENBQUMsQ0FBQztBQUVILDJDQUEyQztBQUMzQyxrQ0FBa0M7QUFDbEMsMkNBQTJDO0FBQzNDLFFBQVEsQ0FBQyxLQUFLLElBQUksRUFBRTtJQUNsQiw2QkFBNkI7SUFDN0IsTUFBTSxJQUFJLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBRXpELHFDQUFxQztJQUNyQyxpQ0FBaUM7SUFDakMsOEJBQThCO0FBQ2hDLENBQUMsQ0FBQyxDQUFDO0FBRUgsMkNBQTJDO0FBQzNDLG1DQUFtQztBQUNuQywyQ0FBMkM7QUFDM0MsT0FBTyxDQUFDLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsRUFBRTtJQUNuRCxPQUFPLENBQUMsS0FBSyxDQUFDLGtDQUFrQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzFELE1BQU0sTUFBTSxDQUFDO0FBQ2YsQ0FBQyxDQUFDLENBQUM7QUFFSCxPQUFPLENBQUMsR0FBRyxDQUFDLG1DQUFtQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvbWFuby9wcm9qZXRvcy9kYXRhc3VsL2xvcjAxMzgvdGVzdHMvc2V0dXAudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gdGVzdHMvc2V0dXAudHNcbi8vIFNldHVwIGdsb2JhbCBwYXJhIHRvZG9zIG9zIHRlc3Rlc1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyAxLiBWQVJJw4FWRUlTIERFIEFNQklFTlRFIFBBUkEgVEVTVEVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5wcm9jZXNzLmVudi5OT0RFX0VOViA9ICd0ZXN0JztcbnByb2Nlc3MuZW52LlBPUlQgPSAnMzAwMSc7IC8vIFBvcnRhIGRpZmVyZW50ZSBwYXJhIG7Do28gY29uZmxpdGFyXG5cbi8vIERhdGFiYXNlIChNb2NrIHNlcsOhIHVzYWRvIGF1dG9tYXRpY2FtZW50ZSlcbnByb2Nlc3MuZW52LkRCX0NPTk5FQ1RJT05fVFlQRSA9ICdzcWxzZXJ2ZXInO1xucHJvY2Vzcy5lbnYuREJfU0VSVkVSID0gJ3Rlc3Qtc2VydmVyJztcbnByb2Nlc3MuZW52LkRCX1BPUlQgPSAnMTQzMyc7XG5wcm9jZXNzLmVudi5EQl9VU0VSID0gJ3Rlc3QtdXNlcic7XG5wcm9jZXNzLmVudi5EQl9QQVNTV09SRCA9ICd0ZXN0LXBhc3N3b3JkJztcbnByb2Nlc3MuZW52LkRCX0RBVEFCQVNFX0VNUCA9ICcnO1xucHJvY2Vzcy5lbnYuREJfREFUQUJBU0VfTVVMVCA9ICcnO1xucHJvY2Vzcy5lbnYuREJfQ09OTkVDVElPTl9USU1FT1VUID0gJzUwMDAnO1xucHJvY2Vzcy5lbnYuREJfUkVRVUVTVF9USU1FT1VUID0gJzUwMDAnO1xucHJvY2Vzcy5lbnYuREJfRU5DUllQVCA9ICdmYWxzZSc7XG5wcm9jZXNzLmVudi5EQl9UUlVTVF9TRVJWRVJfQ0VSVElGSUNBVEUgPSAndHJ1ZSc7XG5cbi8vIENhY2hlIChkZXNhYmlsaXRhZG8gcGFyYSB0ZXN0ZXMgcG9yIHBhZHLDo28pXG5wcm9jZXNzLmVudi5DQUNIRV9FTkFCTEVEID0gJ2ZhbHNlJztcbnByb2Nlc3MuZW52LkNBQ0hFX1NUUkFURUdZID0gJ21lbW9yeSc7XG5cbi8vIENPUlNcbnByb2Nlc3MuZW52LkNPUlNfQUxMT1dFRF9PUklHSU5TID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMSc7XG5cbi8vIFRpbWVvdXRzXG5wcm9jZXNzLmVudi5IVFRQX1JFUVVFU1RfVElNRU9VVCA9ICc1MDAwJztcbnByb2Nlc3MuZW52LkhUVFBfSEVBTFRIX1RJTUVPVVQgPSAnMjAwMCc7XG5cbi8vIFNodXRkb3duXG5wcm9jZXNzLmVudi5TSFVURE9XTl9USU1FT1VUID0gJzEwMDAnO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyAyLiBNT0NLIERPIExPR0dFUiAoZXZpdGEgcG9sdWlyIGNvbnNvbGUpXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5qZXN0Lm1vY2soJ0BzaGFyZWQvdXRpbHMvbG9nZ2VyJywgKCkgPT4gKHtcbiAgbG9nOiB7XG4gICAgaW5mbzogamVzdC5mbigpLFxuICAgIGVycm9yOiBqZXN0LmZuKCksXG4gICAgd2FybjogamVzdC5mbigpLFxuICAgIGRlYnVnOiBqZXN0LmZuKCksXG4gICAgaHR0cDogamVzdC5mbigpLFxuICB9LFxufSkpO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyAyLjEgTU9DSyBETyBVVUlEIChyZXNvbHZlIHByb2JsZW1hIEVTTSlcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmplc3QubW9jaygndXVpZCcsICgpID0+ICh7XG4gIHY0OiBqZXN0LmZuKCgpID0+ICd0ZXN0LXV1aWQtMTIzNC01Njc4LTkwMTInKSxcbn0pKTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gMy4gTU9DS1MgR0xPQkFJUyBERSBDT05TT0xFIChvcGNpb25hbClcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNpbGVuY2lhIGNvbnNvbGUubG9nL2Vycm9yIGR1cmFudGUgdGVzdGVzIChkZXNjb21lbnRlIHNlIHF1aXNlcilcbi8vIGdsb2JhbC5jb25zb2xlLmxvZyA9IGplc3QuZm4oKTtcbi8vIGdsb2JhbC5jb25zb2xlLmVycm9yID0gamVzdC5mbigpO1xuLy8gZ2xvYmFsLmNvbnNvbGUud2FybiA9IGplc3QuZm4oKTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gNC4gVElNRU9VVCBHTE9CQUwgKGF1bWVudGEgc2UgdGVzdGVzIGZvcmVtIGxlbnRvcylcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmplc3Quc2V0VGltZW91dCgxMDAwMCk7IC8vIDEwIHNlZ3VuZG9zXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIDUuIEVYVEVORCBFWFBFQ1QgKG1hdGNoZXJzIGN1c3RvbWl6YWRvcylcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbmV4cGVjdC5leHRlbmQoe1xuICAvLyBNYXRjaGVyIGN1c3RvbWl6YWRvIHBhcmEgdmFsaWRhciBlcnJvIGN1c3RvbWl6YWRvXG4gIHRvQmVDdXN0b21FcnJvcihyZWNlaXZlZDogYW55LCBleHBlY3RlZENsYXNzOiBhbnkpIHtcbiAgICBjb25zdCBwYXNzID0gcmVjZWl2ZWQgaW5zdGFuY2VvZiBleHBlY3RlZENsYXNzO1xuICAgIFxuICAgIGlmIChwYXNzKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBtZXNzYWdlOiAoKSA9PiBgRXhwZWN0ZWQgZXJyb3IgTk9UIHRvIGJlIGluc3RhbmNlIG9mICR7ZXhwZWN0ZWRDbGFzcy5uYW1lfWAsXG4gICAgICAgIHBhc3M6IHRydWUsXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBtZXNzYWdlOiAoKSA9PiBgRXhwZWN0ZWQgZXJyb3IgdG8gYmUgaW5zdGFuY2Ugb2YgJHtleHBlY3RlZENsYXNzLm5hbWV9LCBidXQgZ290ICR7cmVjZWl2ZWQ/LmNvbnN0cnVjdG9yPy5uYW1lfWAsXG4gICAgICAgIHBhc3M6IGZhbHNlLFxuICAgICAgfTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gTWF0Y2hlciBwYXJhIHZhbGlkYXIgZXN0cnV0dXJhIGRlIEFQSSByZXNwb25zZVxuICB0b0JlQXBpUmVzcG9uc2UocmVjZWl2ZWQ6IGFueSkge1xuICAgIGNvbnN0IGhhc1N1Y2Nlc3MgPSAnc3VjY2VzcycgaW4gcmVjZWl2ZWQ7XG4gICAgY29uc3QgaGFzRGF0YSA9ICdkYXRhJyBpbiByZWNlaXZlZCB8fCAnZXJyb3InIGluIHJlY2VpdmVkO1xuICAgIGNvbnN0IHBhc3MgPSBoYXNTdWNjZXNzICYmIGhhc0RhdGE7XG5cbiAgICBpZiAocGFzcykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbWVzc2FnZTogKCkgPT4gJ0V4cGVjdGVkIE5PVCB0byBiZSBhIHZhbGlkIEFQSSByZXNwb25zZScsXG4gICAgICAgIHBhc3M6IHRydWUsXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBtZXNzYWdlOiAoKSA9PiBgRXhwZWN0ZWQgdG8gYmUgYSB2YWxpZCBBUEkgcmVzcG9uc2Ugd2l0aCAnc3VjY2VzcycgYW5kICdkYXRhJy8nZXJyb3InIGZpZWxkc2AsXG4gICAgICAgIHBhc3M6IGZhbHNlLFxuICAgICAgfTtcbiAgICB9XG4gIH0sXG59KTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gNi4gREVDTEFSQcOHw4NPIERFIFRJUE9TIFBBUkEgTUFUQ0hFUlMgQ1VTVE9NSVpBRE9TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5kZWNsYXJlIGdsb2JhbCB7XG4gIG5hbWVzcGFjZSBqZXN0IHtcbiAgICBpbnRlcmZhY2UgTWF0Y2hlcnM8Uj4ge1xuICAgICAgdG9CZUN1c3RvbUVycm9yKGV4cGVjdGVkQ2xhc3M6IGFueSk6IFI7XG4gICAgICB0b0JlQXBpUmVzcG9uc2UoKTogUjtcbiAgICB9XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gNy4gQ0xFQU5VUCBBUMOTUyBDQURBIFRFU1RFXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5hZnRlckVhY2goKCkgPT4ge1xuICBqZXN0LmNsZWFyQWxsTW9ja3MoKTsgLy8gTGltcGEgaGlzdMOzcmljbyBkZSBjYWxscyBkZSBtb2Nrc1xufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIDguIENMRUFOVVAgQVDDk1MgVE9ET1MgT1MgVEVTVEVTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5hZnRlckFsbChhc3luYyAoKSA9PiB7XG4gIC8vIEFndWFyZGEgcHJvbWlzZXMgcGVuZGVudGVzXG4gIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpO1xuICBcbiAgLy8gRmVjaGEgY29uZXjDtWVzIGFiZXJ0YXMgKHNlIGhvdXZlcilcbiAgLy8gYXdhaXQgRGF0YWJhc2VNYW5hZ2VyLmNsb3NlKCk7XG4gIC8vIGF3YWl0IENhY2hlTWFuYWdlci5jbG9zZSgpO1xufSk7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIDkuIEVSUk8gREUgUFJPTUlTRVMgTsODTyBUUkFUQURBU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxucHJvY2Vzcy5vbigndW5oYW5kbGVkUmVqZWN0aW9uJywgKHJlYXNvbiwgcHJvbWlzZSkgPT4ge1xuICBjb25zb2xlLmVycm9yKCdVbmhhbmRsZWQgUmVqZWN0aW9uIGR1cmluZyB0ZXN0OicsIHJlYXNvbik7XG4gIHRocm93IHJlYXNvbjtcbn0pO1xuXG5jb25zb2xlLmxvZygn8J+nqiBBbWJpZW50ZSBkZSB0ZXN0ZXMgY29uZmlndXJhZG8nKTtcblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gMTAuIEVYUE9SVCBQQVJBIFRPUk5BUiBFU1RFIEFSUVVJVk8gVU0gTcOTRFVMT1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gTmVjZXNzw6FyaW8gcGFyYSBvICdkZWNsYXJlIGdsb2JhbCcgZnVuY2lvbmFyXG5leHBvcnQge307Il0sInZlcnNpb24iOjN9